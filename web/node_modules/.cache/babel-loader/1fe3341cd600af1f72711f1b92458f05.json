{"remainingRequest":"/Users/apple/xiaomi-mall-mobile/web/node_modules/babel-loader/lib/index.js!/Users/apple/xiaomi-mall-mobile/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/xiaomi-mall-mobile/web/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/apple/xiaomi-mall-mobile/web/src/views/MiOrder/MiOrderCheckout.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/apple/xiaomi-mall-mobile/web/src/views/MiOrder/MiOrderCheckout.vue","mtime":1637998175464},{"path":"/Users/apple/xiaomi-mall-mobile/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/xiaomi-mall-mobile/web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/apple/xiaomi-mall-mobile/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/xiaomi-mall-mobile/web/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgT3JkZXIgZnJvbSAnQC9hcGkvb3JkZXJTZXJ2aWNlJzsKaW1wb3J0IERpYWxvZyBmcm9tICdAL2NvbXBvbmVudHMvZGlhbG9nJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjYXJ0TGlzdDogW10sCiAgICAgIGFkZHJlc3M6IHt9LAogICAgICBwYXltZXRob2Q6IFtdLAogICAgICBwcm9kdWN0TW9uZXk6IDAsCiAgICAgIHRvdGFsOiAwCiAgICB9OwogIH0sCiAgYmVmb3JlUm91dGVFbnRlcjogZnVuY3Rpb24gYmVmb3JlUm91dGVFbnRlcih0bywgZnJvbSwgbmV4dCkgewogICAgaWYgKGZyb20ubmFtZSkgewogICAgICBPcmRlci5jaGVja291dCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIG5leHQoZnVuY3Rpb24gKHZtKSB7CiAgICAgICAgICByZXR1cm4gdm0uc2V0RGF0YShyZXMpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG5leHQoZnVuY3Rpb24gKHZtKSB7CiAgICAgICAgcmV0dXJuIHZtLmdldERhdGEoKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXREYXRhOiBmdW5jdGlvbiBnZXREYXRhKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgT3JkZXIuY2hlY2tvdXQoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5zZXREYXRhKHJlcyk7CiAgICAgIH0pOwogICAgfSwKICAgIHNldERhdGE6IGZ1bmN0aW9uIHNldERhdGEocmVzKSB7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Vmlld0xvYWRpbmcnLCBmYWxzZSk7CiAgICAgIHRoaXMuJE5Qcm9ncmVzcy5kb25lKCk7CiAgICAgIHZhciBkYXRhID0gcmVzLmRhdGE7CiAgICAgIHRoaXMuY2FydExpc3QgPSBkYXRhLmNhcnRsaXN0Lml0ZW1zOwogICAgICB0aGlzLmFkZHJlc3MgPSBkYXRhLmFkZHJlc3M7CiAgICAgIHRoaXMucGF5bWV0aG9kID0gZGF0YS5wYXltZXRob2Q7CiAgICAgIHRoaXMucHJvZHVjdE1vbmV5ID0gZGF0YS5wcm9kdWN0TW9uZXk7CiAgICAgIHRoaXMudG90YWwgPSBkYXRhLnRvdGFsOwogICAgfSwKICAgIGNob3NlUGF5OiBmdW5jdGlvbiBjaG9zZVBheShpbmRleCkgewogICAgICB0aGlzLnBheW1ldGhvZC5mb3JFYWNoKGZ1bmN0aW9uIChwYXksIGkpIHsKICAgICAgICBwYXkuY2hlY2tlZCA9IGkgPT09IGluZGV4OwogICAgICB9KTsKICAgIH0sCiAgICB0b1BheTogZnVuY3Rpb24gdG9QYXkoKSB7CiAgICAgIGlmICghdGhpcy5hZGRyZXNzLmFkZHJlc3NfaWQpIHsKICAgICAgICBEaWFsb2cuYWxlcnQoewogICAgICAgICAgdGl0bGU6ICfmuKnppqjmj5DnpLonLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+a3u+WKoOaUtui0p+WcsOWdgCcKICAgICAgICB9KTsgLy8gcmV0dXJuCiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/apple/xiaomi-mall-mobile/web/src/views/MiOrder/MiOrderCheckout.vue"],"names":[],"mappings":";;AA0KA,OAAO,KAAP,MAAkB,oBAAlB;AACA,OAAO,MAAP,MAAmB,qBAAnB;AAEA,eAAe;AACb,EAAA,IADa,kBACN;AACL,WAAO;AACL,MAAA,QAAQ,EAAE,EADL;AAEL,MAAA,OAAO,EAAE,EAFJ;AAGL,MAAA,SAAS,EAAE,EAHN;AAIL,MAAA,YAAY,EAAE,CAJT;AAKL,MAAA,KAAK,EAAE;AALF,KAAP;AAOD,GATY;AAUb,EAAA,gBAVa,4BAUI,EAVJ,EAUQ,IAVR,EAUc,IAVd,EAUoB;AAC/B,QAAG,IAAI,CAAC,IAAR,EAAc;AACZ,MAAA,KAAK,CAAC,QAAN,GAAiB,IAAjB,CAAsB,UAAA,GAAE,EAAK;AAC3B,QAAA,IAAI,CAAC,UAAA,EAAC;AAAA,iBAAK,EAAE,CAAC,OAAH,CAAW,GAAX,CAAL;AAAA,SAAF,CAAJ;AACD,OAFD;AAGF,KAJA,MAIO;AACL,MAAA,IAAI,CAAC,UAAA,EAAC;AAAA,eAAK,EAAE,CAAC,OAAH,EAAL;AAAA,OAAF,CAAJ;AACF;AACD,GAlBY;AAmBb,EAAA,OAAO,EAAE;AACP,IAAA,OADO,qBACG;AAAA;;AACR,MAAA,KAAK,CAAC,QAAN,GAAiB,IAAjB,CAAsB,UAAA,GAAE,EAAK;AAC3B,QAAA,KAAI,CAAC,OAAL,CAAa,GAAb;AACD,OAFD;AAGD,KALM;AAMP,IAAA,OANO,mBAMC,GAND,EAMM;AACX,WAAK,MAAL,CAAY,MAAZ,CAAmB,gBAAnB,EAAqC,KAArC;AACA,WAAK,UAAL,CAAgB,IAAhB;AAEA,UAAI,IAAG,GAAI,GAAG,CAAC,IAAf;AACA,WAAK,QAAL,GAAgB,IAAI,CAAC,QAAL,CAAc,KAA9B;AACA,WAAK,OAAL,GAAe,IAAI,CAAC,OAApB;AACA,WAAK,SAAL,GAAiB,IAAI,CAAC,SAAtB;AACA,WAAK,YAAL,GAAoB,IAAI,CAAC,YAAzB;AACA,WAAK,KAAL,GAAa,IAAI,CAAC,KAAlB;AACD,KAhBM;AAiBP,IAAA,QAjBO,oBAiBE,KAjBF,EAiBS;AACd,WAAK,SAAL,CAAe,OAAf,CAAuB,UAAC,GAAD,EAAM,CAAN,EAAY;AACjC,QAAA,GAAG,CAAC,OAAJ,GAAc,CAAA,KAAM,KAApB;AACD,OAFD;AAGD,KArBM;AAsBP,IAAA,KAtBO,mBAsBC;AACN,UAAG,CAAC,KAAK,OAAL,CAAa,UAAjB,EAA6B;AAC3B,QAAA,MAAM,CAAC,KAAP,CAAa;AACX,UAAA,KAAK,EAAE,MADI;AAEX,UAAA,OAAO,EAAE;AAFE,SAAb,EAD2B,CAK3B;AACF;AACF;AA9BO;AAnBI,CAAf","sourcesContent":["<template>\n  <div class=\"app-shell app-shell-bottom-navigation\">\n    <MiTitle title=\"用户结算\" :show-search-icon=\"false\"/>\n    <div class=\"app-view-wrapper\">\n      <div class=\"checkout app-view app-view-with-header\">\n        <div class=\"page-wrap\">\n          <div class=\"b1 more\">\n            <router-link :to=\"{name: 'addressList', query:{type: 'checkout'}}\" v-if=\"address.address_id\">\n              <div class=\"b11\">\n                <p>\n                  <span>{{address.consignee}}</span>\n                  <span>{{address.tel}}</span>\n                </p>\n              </div>\n\n              <div class=\"b13\">\n                <p>{{address.province}} {{address.city}} {{address.district}} {{address.area}} {{address.address}} ({{address.zipcode}})</p>\n              </div>\n            </router-link>\n\n            <router-link :to=\"{name: 'addressEdit', query:{type: 'checkout'}}\" v-else>\n              <div class=\"b14\">添加收货地址</div>\n            </router-link>\n          </div>\n\n          <div class=\"ui-line\"></div>\n\n          <div class=\"b2\">\n            <ul class=\"\">\n              <li v-for=\"(pay,index) in paymethod\" :key=\"pay.type\">\n                <div\n                  class=\"item ui-flex align-center\"\n                  :class=\"{on:pay.checked}\"\n                  @click=\"chosePay(index)\">\n                  <a href=\"javascript:;\" :class=\"pay.type\">{{pay.value}}</a>\n                  <div class=\"flex\">{{pay.subtitle}}</div>\n                </div>\n              </li>\n            </ul>\n\n            <div class=\"payment-fold-switch ui-flex align-center justify-center\">\n              <span>收起其他支付方式 </span>\n              <i class=\"iconfont icon-back unfold\"></i>\n            </div>\n          </div>\n\n          <div class=\"ui-line\"></div>\n\n          <div class=\"b3\">\n            <dl>\n              <dt class=\"ui-flex align-center justify-space-between\">\n                <strong>包邮</strong>\n\n                <div class=\"ui-flex align-center\">\n                  <span>不限送货时间</span>\n                  <span style=\"display: none;\">工作日送货</span>\n                  <span style=\"display: none;\">双休日、假日送货</span>\n                  <i class=\"iconfont icon-back\"></i>\n                </div>\n              </dt>\n\n              <div class=\"gap-line\" style=\"margin: 0px 0.4rem;\"></div>\n            </dl>\n          </div>\n\n          <div class=\"b3\">\n            <dl>\n              <dt class=\"ui-flex align-center justify-space-between\">\n                <strong>电子发票</strong>\n\n                <div class=\"ui-flex align-center\">\n                  <span>个人</span>\n                  <i class=\"iconfont icon-back\"></i>\n                </div>\n              </dt>\n\n              <div class=\"gap-line\" style=\"margin: 0px 0.4rem;\"></div>\n            </dl>\n          </div>\n\n          <div class=\"b3\">\n            <dl>\n              <dt class=\"ui-flex align-center justify-space-between\">\n                <strong>优惠券</strong>\n                <div class=\"ui-flex align-center\">\n                  <span>已优惠<em>0元</em></span>\n                  <i class=\"iconfont icon-back\"></i>\n                </div>\n              </dt>\n            </dl>\n          </div>\n\n          <div class=\"ui-line\"></div>\n\n          <div class=\"b8\">\n            <div class=\"b8w\" v-for=\"list in cartList\" :key=\"list.goodsId\">\n              <div class=\"b81\">\n                <img :src=\"list.image_url\">\n              </div>\n\n              <div class=\"b82\">\n                <div class=\"name\">\n                  <p>\n                    <span>{{list.short_name}}</span>\n                  </p>\n                </div>\n              </div>\n\n              <div class=\"b83\">\n                <div class=\"item-price\">\n                  <span v-if=\"list.num>1\">x {{list.num}} = </span>\n                  <strong>{{list.subtotal}}</strong>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"ui-line\"></div>\n\n          <div class=\"b5\">\n            <div class=\"b51\">\n              <p>\n                <strong>商品价格：</strong>\n                <span>1997.00</span>\n              </p>\n            </div>\n\n            <div class=\"b52\">\n              <p>\n                <strong>已优惠：</strong>\n                <span>0.00</span>\n              </p>\n            </div>\n\n            <div class=\"b53\">\n              <p>\n                <strong>配送费用：</strong>\n                <span>0.00</span>\n              </p>\n            </div>\n          </div>\n\n          <div class=\"ui-line\"></div>\n        </div>\n      </div>\n\n      <div class=\"ui-mask\" style=\"display: none;\"></div>\n      <div class=\"b7\">\n        <div class=\"info-tips\">\n          <p>配送至：{{address.province}} {{address.city}} {{address.district}} {{address.area}} {{address.address}}</p>\n        </div>\n\n        <div class=\"ui-flex\">\n          <div class=\"b71 ui-box-flex\">\n            <span>共{{total}}件 合计: </span>\n            <strong>{{productMoney}}</strong>\n          </div>\n\n          <div class=\"b72 ui-box-flex\">\n            <a class=\"ui-button\" @click=\"toPay\">\n              <span>去付款</span>\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Order from '@/api/orderService'\nimport Dialog from '@/components/dialog'\n\nexport default {\n  data() {\n    return {\n      cartList: [],\n      address: {},\n      paymethod: [],\n      productMoney: 0,\n      total: 0\n    }\n  },\n  beforeRouteEnter(to, from, next) {\n    if(from.name) {\n      Order.checkout().then(res => {\n        next(vm => vm.setData(res))\n      })\n    } else {\n      next(vm => vm.getData())\n    }\n  },\n  methods: {\n    getData() {\n      Order.checkout().then(res => {\n        this.setData(res)\n      })\n    },\n    setData(res) {\n      this.$store.commit('setViewLoading', false)\n      this.$NProgress.done()\n\n      let data = res.data\n      this.cartList = data.cartlist.items\n      this.address = data.address\n      this.paymethod = data.paymethod\n      this.productMoney = data.productMoney\n      this.total = data.total\n    },\n    chosePay(index) {\n      this.paymethod.forEach((pay, i) => {\n        pay.checked = i === index\n      })\n    },\n    toPay() {\n      if(!this.address.address_id) {\n        Dialog.alert({\n          title: '温馨提示',\n          message: '请添加收货地址'\n        })\n        // return\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.checkout {\n  padding-bottom: 78px;\n  text-align: left;\n  font-size: 12px;\n\n  .b1 {\n    background: #fff url(//s1.mi.com/m/images/m/bd1.png) 0 0 repeat-x;\n    background-size: 26px 4px;\n    padding: 13px 20px;\n    padding-top: 20px;\n    padding-bottom: 15px;\n    position: relative;\n\n    a {\n      display: block;\n      text-align: left;\n      color: #3c3c3c;\n    }\n\n    .b11 {\n      font-size: 15px;\n      font-weight: 700;\n      margin-bottom: 10px;\n      font-size: 16px;\n\n      span {\n        margin-right: 5px;\n      }\n    }\n\n    .b14 {\n      font-size: 13px;\n      font-weight: 700;\n    }\n\n    .b13 {\n      line-height: 14px;\n      color: #757575;\n      margin-right: 15px;\n      font-size: 12px;\n    }\n  }\n\n  .more:after {\n    content: \"\";\n    position: absolute;\n    right: 16px;\n    top: 50%;\n    width: 10px;\n    height: 10px;\n    border-left: 1px solid currentColor;\n    border-top: 1px solid currentColor;\n    transform: translate3d(0, -50%, 0) rotate(135deg);\n  }\n\n  .ui-line {\n    border-top: 1px solid #e0e0e0;\n    border-bottom: 1px solid #e0e0e0;\n  }\n\n  .b2 {\n    background: #fff;\n\n    ul {\n      overflow: hidden;\n      max-height: 100rem;\n      transition: max-height 0.3s ease-in-out;\n      list-style: none;\n    }\n\n    li {\n      margin: 0 20px;\n      border-bottom: 1px solid #eee;\n    }\n\n    .item {\n      padding-right: 30px;\n      background-image: url(//s1.mi.com/m/images/m/check_normal.png);\n      background-position: 100% 50%;\n      background-repeat: no-repeat;\n      background-size: 20px 20px;\n\n      a {\n        display: block;\n        font-size: 13px;\n        line-height: 25px;\n        padding-left: 35px;\n        padding-top: 10px;\n        padding-bottom: 10px;\n        color: #333;\n        text-decoration: none;\n\n        &.weixin_wap {\n          background: url(//s1.mi.com/m/images/m/pay_wx.png) 0 50% no-repeat;\n          background-size: 25px 25px;\n        }\n\n        &.alipaywap {\n          background: url(//s1.mi.com/m/images/m/pay_zfb2.png) 0 50% no-repeat;\n          background-size: 25px 25px;\n        }\n        &.micash_wap {\n          background: url(//s1.mi.com/m/images/m/micash_wap.png) 0 50% no-repeat;\n          background-size: 25px 25px;\n        }\n        &.unionpaywap {\n          background: url(//s1.mi.com/m/images/m/pay_yl1.png) 0 50% no-repeat;\n          background-size: 25px 25px;\n        }\n        &.bestpay_wap {\n          background: url(//s1.mi.com/m/images/m/pay_yzf.png) 0 50% no-repeat;\n          background-size: 25px 25px;\n        }\n        &.mifinanceinstal_m {\n          background: url(//s1.mi.com/m/images/m/pay_mifinanceinstal.png) 0 50%\n            no-repeat;\n          background-size: 25px 25px;\n        }\n        &.antinstal_m {\n          background: url(//s1.mi.com/m/images/m/pay_antinstalment.png) 0 50% no-repeat;\n          background-size: 25px 25px;\n        }\n      }\n\n      .flex {\n        margin-left: 10px;\n        color: #999;\n        font-size: 12px;\n      }\n\n      &.on {\n        background-image: url(//s1.mi.com/m/images/m/check_press.png);\n      }\n    }\n\n    .payment-fold-switch {\n      color: #bdbdbd;\n      line-height: 40px;\n      text-align: center;\n      margin: 0 20px;\n      border-top: 1px solid #eee;\n      font-size: 12px;\n\n      .iconfont {\n        margin-left: 4px;\n        transform: rotate(-90deg);\n        transition: transform 0.2s linear;\n      }\n\n      .iconfont.unfold {\n        transform: rotate(90deg);\n      }\n    }\n  }\n\n  .b3 {\n    dt {\n      padding: 13px 20px;\n\n      span {\n        float: right;\n        color: #bdbdbd;\n        font-size: 12px;\n      }\n\n      em {\n        color: #f60;\n        margin-left: 5px;\n      }\n    }\n\n    .iconfont {\n      margin-left: 4px;\n      font-size: 12px;\n      transform: rotate(-90deg);\n      transition: transform 0.2s linear;\n      color: #bdbdbd;\n    }\n  }\n}\n\nb,strong {\n  font-weight: bolder;\n  font-size: 12px;\n}\n\n.b8w {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  line-height: 15px;\n  margin: 0 20px;\n  padding: 7px 0;\n  border-bottom: 1px solid #eee;\n\n  .b81 {\n    margin-right: 10px;\n\n    img {\n      width: 40px;\n    }\n  }\n\n  .b82 {\n    flex: 1;\n    margin-right: 30px;\n\n    .name p {\n      /* display: box; */\n      box-align: start;\n      text-align: left;\n\n      &>span {\n        display: block;\n        font-size: 12px;\n\n        &:first-child {\n          margin-right: 5px;\n        }\n\n        &:last-child {\n          box-flex: 1;\n          width: 100%;\n        }\n      }\n    }\n  }\n}\n\n.b83 .item-price span {\n  font-size: 12px;\n}\n\n.b5 {\n  padding: 13px 20px;\n  background: #fff;\n  font-size: 12px;\n  text-align: left;\n}\n\n.b52, .b53 {\n  margin-top: 5px;\n}\n\n.b7 {\n  transform: none;\n  position: fixed;\n  z-index: 1000;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: #fff;\n  border-top: 1px solid #e0e0e0;\n\n  .info-tips {\n    background: #fbf3c4;\n    color: #b57842;\n    padding: 6px 10px;\n    opacity: .7;\n\n    p {\n      line-height: 15px;\n      font-size: 12px;\n      text-align: left;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      color: #b57842;\n    }\n  }\n\n  .ui-flex {\n    align-items: center;\n  }\n\n  .b71 {\n    font-size: 16px;\n    color: #ff4d14;\n    width: 100%;\n    text-align: center;\n\n    strong {\n      font-size: 16px;\n    }\n  }\n\n  .b72 {\n    width: 100%;\n  }\n\n  .ui-button {\n    display: block;\n    background-color: #ff5722;\n    text-align: center;\n    height: 50px;\n    line-height: 50px;\n    border: 1px solid #ff5722;\n    font-size: 15px;\n    color: #fff;\n  }\n}\n</style>\n"],"sourceRoot":""}]}