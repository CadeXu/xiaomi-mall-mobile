{"remainingRequest":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/babel-loader/lib/index.js!/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/eslint-loader/index.js??ref--13-0!/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/views/MiDetail/MiDetail.js?vue&type=script&lang=js","dependencies":[{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/views/MiDetail/MiDetail.js","mtime":1636884340405},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Wb2x1bWVzL0hEL3hpYW9NaS9GRS94aWFvbWktbWFsbC1tb2JpbGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCB7IGdldFByb2R1Y3RWaWV3IH0gZnJvbSAnQC9hcGkvY2F0ZWdvcnknOwppbXBvcnQgU3dpcGVyIGZyb20gJ3N3aXBlci9zd2lwZXItYnVuZGxlJzsKaW1wb3J0ICdzd2lwZXIvc3dpcGVyLWJ1bmRsZS5jc3MnOwppbXBvcnQgRE9NUHVyaWZ5IGZyb20gJ2RvbXB1cmlmeSc7CmltcG9ydCBNaUNvbW1lbnQgZnJvbSAnQC9jb21wb25lbnRzL01pQ29tbWVudCc7CmltcG9ydCBNaVJlY29tbWVuZCBmcm9tICdAL2NvbXBvbmVudHMvTWlSZWNvbW1lbmQudnVlJzsKaW1wb3J0IE1pU2t1IGZyb20gJ0AvY29tcG9uZW50cy9NaVNrdS52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgTWlDb21tZW50OiBNaUNvbW1lbnQsCiAgICBNaVJlY29tbWVuZDogTWlSZWNvbW1lbmQsCiAgICBNaVNrdTogTWlTa3UKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwcm9kdWN0RGF0YTogbnVsbCwKICAgICAgZ2FsbGVyeVZpZXc6IG51bGwsCiAgICAgIGRldGFpbFN3aXBlcjogbnVsbCwKICAgICAgdGl0bGVWaWV3OiBudWxsLAogICAgICBzZWxlY3RlZEdvb2Q6IG51bGwsCiAgICAgIGNhbkpvaW5BY3RzOiBudWxsLAogICAgICBzaG93TWFzazogZmFsc2UsCiAgICAgIHNob3dTS1U6IGZhbHNlLAogICAgICBjb21tZW50VmlldzogbnVsbCwKICAgICAgZGVzY1RhYnNWaWV3OiBudWxsLAogICAgICBkZXNjVGFic1ZpZXdJbmRleDogMCwKICAgICAgaWQ6ICcnCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICB0aGlzLiROUHJvZ3Jlc3MuZG9uZSgpOwogICAgdGhpcy5mZXRjaFByb2R1Y3REYXRhKCk7CiAgfSwKICAvLyB3aXRoZHJhdwogIGRlc3RvcnllZDogZnVuY3Rpb24gZGVzdG9yeWVkKCkgewogICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5kZXRhaWxTd2lwZXIpKSB7CiAgICAgIHRoaXMuZGV0YWlsU3dpcGVyLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpdGVtLmRlc3RvcnkoKTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLmRldGFpbFN3aXBlci5kZXN0b3J5KCk7CiAgICB9CgogICAgdGhpcy4kTlByb2dyZXNzLnJlbW92ZSgpOwogIH0sCiAgbWV0aG9kczogewogICAgZmV0Y2hQcm9kdWN0RGF0YTogZnVuY3Rpb24gZmV0Y2hQcm9kdWN0RGF0YSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0UHJvZHVjdFZpZXcoewogICAgICAgICAgICAgICAgICBjb21tb2RpdHlfaWQ6IF90aGlzLiRyb3V0ZS5wYXJhbXMuaWQKICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzLiRzdG9yZS5jb21taXQoJ3NldFZpZXdMb2FkaW5nJywgZmFsc2UpOwoKICAgICAgICAgICAgICAgICAgICB2YXIgdmlld0NvbnRlbnQgPSByZXMuZGF0YS52aWV3X2NvbnRlbnQ7CiAgICAgICAgICAgICAgICAgICAgdmFyIGRlc2NUYWJzVmlldyA9IHZpZXdDb250ZW50LmRlc2NUYWJzVmlldy5kZXNjVGFic1ZpZXc7CiAgICAgICAgICAgICAgICAgICAgZGVzY1RhYnNWaWV3LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWJDb250ZW50ID0gaXRlbS50YWJDb250ZW50OwoKICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWJDb250ZW50Lmxlbmd0aCA+IDMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zaG93VGFiQ29udGVudCA9IHRhYkNvbnRlbnQuc2xpY2UoMCwgMyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ubW9yZVRhYkNvbnRlbnQgPSB0YWJDb250ZW50LnNsaWNlKDMpOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zaG93VGFiQ29udGVudCA9IHRhYkNvbnRlbnQ7CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgaXRlbS5zaG93TW9yZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIF90aGlzLmRlc2NUYWJzVmlldyA9IGRlc2NUYWJzVmlldzsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5nYWxsZXJ5VmlldyA9IHZpZXdDb250ZW50LmdhbGxlcnlWaWV3LmdhbGxlcnlWaWV3OwogICAgICAgICAgICAgICAgICAgIF90aGlzLnRpdGxlVmlldyA9IHZpZXdDb250ZW50LnRpdGxlVmlldy50aXRsZVZpZXc7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMudGl0bGVWaWV3UHJvZHVjdERlc2MgPSBET01QdXJpZnkuc2FuaXRpemUoX3RoaXMudGl0bGVWaWV3LnByb2R1Y3RfZGVzYyk7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2FuSm9pbkFjdHMgPSBfdGhpcy50aXRsZVZpZXcuY2FuSm9pbkFjdHNbMF07CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29tbWVudFZpZXcgPSB2aWV3Q29udGVudC5jb21tZW50Vmlldy5jb21tZW50VmlldzsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9kdWN0RGF0YSA9IHJlcy5kYXRhOwoKICAgICAgICAgICAgICAgICAgICBfdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGV0YWlsU3dpcGVyID0gbmV3IFN3aXBlcignLnN3aXBlci1jb250YWluZXInLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2luYXRpb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgICBlbDogJy5zd2lwZXItcGFnaW5hdGlvbicKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgbG9vcDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgbGF6eTogewogICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRQcmV2TmV4dDogdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnb2JhY2s6IGZ1bmN0aW9uIGdvYmFjaygpIHsKICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgIH0sCiAgICBjbG9zZVNrdTogZnVuY3Rpb24gY2xvc2VTa3UoKSB7CiAgICAgIHRoaXMuc2hvd01hc2sgPSBmYWxzZTsKICAgICAgdGhpcy5zaG93U0tVID0gZmFsc2U7CiAgICB9LAogICAgc2VsZWN0U0tVOiBmdW5jdGlvbiBzZWxlY3RTS1UodmFsKSB7CiAgICAgIHRoaXMuc2VsZWN0ZWRHb29kID0gdmFsOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/views/MiDetail/MiDetail.js"],"names":["getProductView","Swiper","DOMPurify","MiComment","MiRecommend","MiSku","components","data","productData","galleryView","detailSwiper","titleView","selectedGood","canJoinActs","showMask","showSKU","commentView","descTabsView","descTabsViewIndex","id","created","$route","params","$NProgress","done","fetchProductData","destoryed","Array","isArray","forEach","item","destory","remove","methods","commodity_id","then","res","code","$store","commit","viewContent","view_content","tabContent","length","showTabContent","slice","moreTabContent","showMore","titleViewProductDesc","sanitize","product_desc","$nextTick","pagination","el","loop","lazy","loadPrevNext","goback","$router","go","closeSku","selectSKU","val"],"mappings":"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","sourcesContent":["import { getProductView } from '@/api/category'\r\nimport Swiper from 'swiper/swiper-bundle'\r\nimport 'swiper/swiper-bundle.css'\r\nimport DOMPurify from 'dompurify'\r\nimport MiComment from '@/components/MiComment'\r\nimport MiRecommend from '@/components/MiRecommend.vue'\r\nimport MiSku from '@/components/MiSku.vue'\r\n\r\nexport default {\r\n  components: {\r\n    MiComment,\r\n    MiRecommend,\r\n    MiSku\r\n  },\r\n  data() {\r\n    return {\r\n      productData: null,\r\n      galleryView: null,\r\n      detailSwiper: null,\r\n      titleView: null,\r\n      selectedGood: null,\r\n      canJoinActs: null,\r\n      showMask: false,\r\n      showSKU: false,\r\n      commentView: null,\r\n      descTabsView: null,\r\n      descTabsViewIndex: 0,\r\n      id: ''\r\n    }\r\n  },\r\n  created() {\r\n    this.id = this.$route.params.id\r\n    this.$NProgress.done()\r\n    this.fetchProductData()\r\n  },\r\n  // withdraw\r\n  destoryed() {\r\n    if(Array.isArray(this.detailSwiper)) {\r\n      this.detailSwiper.forEach(item => {\r\n        item.destory()\r\n      })\r\n    } else {\r\n      this.detailSwiper.destory()\r\n    }\r\n    this.$NProgress.remove()\r\n  },\r\n  methods: {\r\n    async fetchProductData() {\r\n      await getProductView({\r\n        commodity_id: this.$route.params.id\r\n      }).then(res => {\r\n        if(res.code === 200) {\r\n          this.$store.commit('setViewLoading', false)\r\n          const viewContent = res.data.view_content\r\n          const descTabsView = viewContent.descTabsView.descTabsView\r\n\r\n          descTabsView.forEach(item => {\r\n            const tabContent = item.tabContent\r\n            if(tabContent.length > 3) {\r\n              item.showTabContent = tabContent.slice(0, 3)\r\n              item.moreTabContent = tabContent.slice(3)\r\n            } else {\r\n              item.showTabContent = tabContent\r\n            }\r\n            item.showMore = false\r\n          })\r\n\r\n          this.descTabsView = descTabsView\r\n          this.galleryView = viewContent.galleryView.galleryView\r\n          this.titleView = viewContent.titleView.titleView\r\n          this.titleViewProductDesc = DOMPurify.sanitize(this.titleView.product_desc)\r\n          this.canJoinActs = this.titleView.canJoinActs[0]\r\n          this.commentView = viewContent.commentView.commentView\r\n          this.productData = res.data\r\n\r\n          this.$nextTick(() => {\r\n            this.detailSwiper = new Swiper('.swiper-container', {\r\n              pagination: {\r\n                el: '.swiper-pagination'\r\n              },\r\n              loop: true,\r\n              lazy: {\r\n                loadPrevNext: true\r\n              }\r\n            })\r\n          })\r\n        }\r\n      })\r\n    },\r\n    goback() {\r\n      this.$router.go(-1)\r\n    },\r\n    closeSku() {\r\n      this.showMask = false\r\n      this.showSKU = false\r\n    },\r\n    selectSKU(val) {\r\n      this.selectedGood = val\r\n    }\r\n  }\r\n}\r\n"]}]}