{"remainingRequest":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/thread-loader/dist/cjs.js!/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/babel-loader/lib/index.js!/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/views/MiAddress/MiAddressList.vue?vue&type=script&lang=js","dependencies":[{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/views/MiAddress/MiAddressList.vue","mtime":1637846843821},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7Ci8vIGltcG9ydCB7IGFkZHJlc3NMaXN0LCBhZGRyZXNzRGVsZXRlIH0gZnJvbSAnQC9hcGkvYWRkcmVzcy5qcycKaW1wb3J0IE1pVGl0bGUgZnJvbSAnQC9jb21wb25lbnRzL01pVGl0bGUudnVlJzsKaW1wb3J0IERpYWxvZyBmcm9tICdAL2NvbXBvbmVudHMvZGlhbG9nJzsKaW1wb3J0IEFkZHJlc3MgZnJvbSAnQC9hcGkvYWRkcmVzc1NlcnZpY2UnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgTWlUaXRsZTogTWlUaXRsZSAvLyBNaURpYWxvZwoKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsaXN0czogW10sCiAgICAgIHNob3dEaWFsb2c6IGZhbHNlLAogICAgICByZW1vdmVDYXNoOiB7fQogICAgfTsKICB9LAogIGJlZm9yZVJvdXRlRW50ZXI6IGZ1bmN0aW9uIGJlZm9yZVJvdXRlRW50ZXIodG8sIGZyb20sIG5leHQpIHsKICAgIGlmIChmcm9tLm5hbWUpIHsKICAgICAgLy8gYWRkcmVzc0xpc3QoKS50aGVuKHJlcyA9PiB7CiAgICAgIEFkZHJlc3MubGlzdCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgIG5leHQoZnVuY3Rpb24gKHZtKSB7CiAgICAgICAgICAgIHJldHVybiB2bS5zZXRMaXN0cyhyZXMpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG5leHQoZnVuY3Rpb24gKHZtKSB7CiAgICAgICAgcmV0dXJuIHZtLmdldExpc3RzKCk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0TGlzdHM6IGZ1bmN0aW9uIGdldExpc3RzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgQWRkcmVzcy5saXN0KCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgX3RoaXMuc2V0TGlzdHMocmVzKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNldExpc3RzOiBmdW5jdGlvbiBzZXRMaXN0cyhyZXMpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRWaWV3TG9hZGluZycsIGZhbHNlKTsKICAgICAgdGhpcy4kTlByb2dyZXNzLmRvbmUoKTsKICAgICAgdGhpcy5saXN0cyA9IHJlcy5kYXRhOwogICAgfSwKICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGxpc3QsIGluZGV4KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgLy8gdGhpcy5yZW1vdmVDYXNoID0gewogICAgICAvLyAgIGlkOiBsaXN0LmFkZHJlc3NfaWQsCiAgICAgIC8vICAgaW5kZXgKICAgICAgLy8gfQogICAgICAvLyB0aGlzLnNob3dEaWFsb2cgPSB0cnVlCiAgICAgIC8vIGludm9rZSBmdW5jdGlvbiBjb21wb25lbnQKICAgICAgRGlhbG9nLmNvbmZpcm0oewogICAgICAgIG1lc3NhZ2U6ICfnoa7lrprliKDpmaTlvZPliY3lnLDlnYA/JwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChhY3Rpb24pIHsKICAgICAgICBjb25zb2xlLmxvZygnKysrKysrKysrKysnKTsKICAgICAgICBjb25zb2xlLmxvZyhhY3Rpb24pOwogICAgICAgIEFkZHJlc3MucmVtb3ZlKGxpc3QuYWRkcmVzc19pZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgIF90aGlzMi5saXN0cy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfSk7CiAgICB9IC8vIGNvbmZpcm1SZW1vdmUoKSB7CiAgICAvLyAgIGxldCB7IGlkLCBpbmRleCB9ID0gdGhpcy5yZW1vdmVDYXNoCiAgICAvLyAgIGFkZHJlc3NEZWxldGUoewogICAgLy8gICAgIGFkZHJlc3NfaWQ6IGlkCiAgICAvLyAgIH0pLnRoZW4ocmVzID0+IHsKICAgIC8vICAgICBpZihyZXMuc3RhdHVzID09PSAyMDApIHsKICAgIC8vICAgICAgIHRoaXMubGlzdHMuc3BsaWNlKGluZGV4LCAxKQogICAgLy8gICAgIH0KICAgIC8vICAgfSkKICAgIC8vIH0KCiAgfQp9Ow=="},{"version":3,"sources":["/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/views/MiAddress/MiAddressList.vue"],"names":[],"mappings":";;AA0DA;AACA,OAAO,OAAP,MAAoB,0BAApB;AACA,OAAO,MAAP,MAAmB,qBAAnB;AACA,OAAO,OAAP,MAAoB,sBAApB;AAEA,eAAe;AACb,EAAA,UAAU,EAAE;AACV,IAAA,OAAM,EAAN,OADU,CAEV;;AAFU,GADC;AAKb,EAAA,IALa,kBAKN;AACL,WAAO;AACL,MAAA,KAAK,EAAE,EADF;AAEL,MAAA,UAAU,EAAE,KAFP;AAGL,MAAA,UAAU,EAAE;AAHP,KAAP;AAKD,GAXY;AAYb,EAAA,gBAZa,4BAYI,EAZJ,EAYQ,IAZR,EAYc,IAZd,EAYoB;AAC/B,QAAG,IAAI,CAAC,IAAR,EAAc;AACZ;AACA,MAAA,OAAO,CAAC,IAAR,GAAe,IAAf,CAAoB,UAAA,GAAE,EAAK;AACzB,YAAG,GAAG,CAAC,MAAJ,KAAe,GAAlB,EAAuB;AACrB,UAAA,IAAI,CAAC,UAAA,EAAC;AAAA,mBAAK,EAAE,CAAC,QAAH,CAAY,GAAZ,CAAL;AAAA,WAAF,CAAJ;AACF;AACD,OAJD;AAKF,KAPA,MAOO;AACL,MAAA,IAAI,CAAC,UAAA,EAAC;AAAA,eAAK,EAAE,CAAC,QAAH,EAAL;AAAA,OAAF,CAAJ;AACF;AACD,GAvBY;AAwBb,EAAA,OAAO,EAAE;AACP,IAAA,QADO,sBACI;AAAA;;AACT,MAAA,OAAO,CAAC,IAAR,GAAe,IAAf,CAAoB,UAAA,GAAE,EAAK;AACzB,YAAG,GAAG,CAAC,MAAJ,KAAe,GAAlB,EAAuB;AACrB,UAAA,KAAI,CAAC,QAAL,CAAc,GAAd;AACF;AACD,OAJD;AAKD,KAPM;AAQP,IAAA,QARO,oBAQE,GARF,EAQO;AACZ,WAAK,MAAL,CAAY,MAAZ,CAAmB,gBAAnB,EAAqC,KAArC;AACA,WAAK,UAAL,CAAgB,IAAhB;AACA,WAAK,KAAL,GAAa,GAAG,CAAC,IAAjB;AACD,KAZM;AAaP,IAAA,MAbO,kBAaA,IAbA,EAaM,KAbN,EAaa;AAAA;;AAClB;AACA;AACA;AACA;AACA;AAEA;AACA,MAAA,MAAM,CAAC,OAAP,CAAe;AACb,QAAA,OAAO,EAAE;AADI,OAAf,EAEG,IAFH,CAEQ,UAAC,MAAD,EAAY;AAClB,QAAA,OAAO,CAAC,GAAR,CAAY,aAAZ;AACA,QAAA,OAAO,CAAC,GAAR,CAAY,MAAZ;AACA,QAAA,OAAO,CAAC,MAAR,CAAe,IAAI,CAAC,UAApB,EAAgC,IAAhC,CAAqC,UAAA,GAAE,EAAK;AAC1C,cAAG,GAAG,CAAC,MAAJ,KAAe,GAAlB,EAAuB;AACrB,YAAA,MAAI,CAAC,KAAL,CAAW,MAAX,CAAkB,KAAlB,EAAyB,CAAzB;AACF;AACD,SAJD;AAKD,OAVD,EAUG,KAVH,CAUS,UAAA,GAAE,EAAK;AACd,QAAA,OAAO,CAAC,GAAR,CAAY,GAAZ;AACD,OAZD;AAaF,KAlCO,CAmCP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AA5CO;AAxBI,CAAf","sourcesContent":["<template>\n  <div class=\"app-shell app-shell-bottom-navigation\">\n    <div class=\"app-view-wrapper\">\n\n      <MiTitle title=\"收货地址\" :show-search-icon=\"false\"/>\n\n      <div class=\"container app-view app-view-with-header\">\n        <div class=\"page-wrap\">\n          <div class=\"address-manager\">\n            <div class=\"address-manager-list\">\n              <div\n                v-for=\"(list,index) in lists\"\n                :key=\"list.address_id\"\n                class=\"ui-card\"\n              >\n                <ul class=\"ui-card-item ui-list\">\n                  <li class=\"ui-list-item identity\">\n                    <a @click=\"remove(list, index)\">删除</a>\n                    <span class=\"consignee\">{{list.consignee}}</span>\n                    <span>{{list.tel}}</span>\n                    <em v-if=\"list.is_default\"> [默认]</em>\n                  </li>\n\n                  <router-link\n                    :to=\"{name: 'addressEdit', query: {address_id: list.address_id}}\"\n                    tag=\"li\"\n                    class=\"ui-list-item edit\">\n                    <p>{{list.province}} {{list.city}} {{list.district}} {{list.area}}</p>\n                    <p>{{list.address}}</p>\n                  </router-link>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"add\">\n          <router-link\n            :to=\"{name: 'addressEdit'}\"\n            class=\"btn ui-button ui-button-active\"\n          >\n            <span>新建地址</span>\n          </router-link>\n        </div>\n      </div>\n    </div>\n\n    <!-- Normally use custom component -->\n    <!-- <MiDialog\n      v-model:value=\"showDialog\"\n      message=\"确定删除当前地址?\"\n      show-cancel-button\n      @confirm=\"confirmRemove\">\n    </MiDialog> -->\n  </div>\n</template>\n\n<script>\n// import { addressList, addressDelete } from '@/api/address.js'\nimport MiTitle from '@/components/MiTitle.vue'\nimport Dialog from '@/components/dialog'\nimport Address from '@/api/addressService'\n\nexport default {\n  components: {\n    MiTitle\n    // MiDialog\n  },\n  data() {\n    return {\n      lists: [],\n      showDialog: false,\n      removeCash: {}\n    }\n  },\n  beforeRouteEnter(to, from, next) {\n    if(from.name) {\n      // addressList().then(res => {\n      Address.list().then(res => {\n        if(res.status === 200) {\n          next(vm => vm.setLists(res))\n        }\n      })\n    } else {\n      next(vm => vm.getLists())\n    }\n  },\n  methods: {\n    getLists() {\n      Address.list().then(res => {\n        if(res.status === 200) {\n          this.setLists(res)\n        }\n      })\n    },\n    setLists(res) {\n      this.$store.commit('setViewLoading', false)\n      this.$NProgress.done()\n      this.lists = res.data\n    },\n    remove(list, index) {\n      // this.removeCash = {\n      //   id: list.address_id,\n      //   index\n      // }\n      // this.showDialog = true\n\n      // invoke function component\n      Dialog.confirm({\n        message: '确定删除当前地址?'\n      }).then((action) => {\n        console.log('+++++++++++')\n        console.log(action)\n        Address.remove(list.address_id).then(res => {\n          if(res.status === 200) {\n            this.lists.splice(index, 1)\n          }\n        })\n      }).catch(err => {\n        console.log(err)\n      })\n    }\n    // confirmRemove() {\n    //   let { id, index } = this.removeCash\n    //   addressDelete({\n    //     address_id: id\n    //   }).then(res => {\n    //     if(res.status === 200) {\n    //       this.lists.splice(index, 1)\n    //     }\n    //   })\n    // }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.address-manager {\n  position: relative;\n  padding-bottom: 50px;\n\n  .ui-card {\n    border: 1px solid #f6f6f6;\n    overflow: hidden;\n    margin: 10px;\n    border-radius: 3px;\n    background: #fff;\n    text-align: left;\n\n    .ui-list {\n      padding-top: 0;\n      padding-bottom: 0;\n      position: relative;\n\n      .ui-list-item {\n        border-bottom: 1px solid #f6f6f6;\n        display: block;\n        font-size: 14px;\n        overflow: hidden;\n        background: #fff;\n        padding: 10px 15px;\n\n        &:last-child {\n          border: 0;\n        }\n      }\n\n      .edit {\n        position: relative;\n        padding-right: 25px;\n        font-size: 12px;\n\n        &:after {\n          content: \" \";\n          position: absolute;\n          width: 7px;\n          height: 7px;\n          right: 7px;\n          top: 50%;\n          margin-top: 4px;\n          border-right: 1px solid #999;\n          border-bottom: 1px solid #999;\n          transform: rotate(-45deg);\n        }\n      }\n    }\n\n    .ui-card-item {\n      padding: 10px;\n\n      p {\n        line-height: 18px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n    }\n  }\n\n  .identity {\n    a {\n      float: right;\n      color: #999;\n    }\n\n    em {\n    color: #f60;\n    font-size: 10px;\n    font-style: normal;\n    margin-left: 3px;\n  }\n  }\n\n  .consignee {\n    margin-right: 30px;\n    color: #f60;\n  }\n}\n\n.add {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: #fff;\n  z-index: 1;\n\n  span {\n    font-size: 15px;\n    color: #fff;\n  }\n}\n</style>\n"],"sourceRoot":""}]}