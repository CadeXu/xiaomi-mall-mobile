{"remainingRequest":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/babel-loader/lib/index.js!/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/views/MiList.vue?vue&type=script&lang=js","dependencies":[{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/views/MiList.vue","mtime":1637193349424},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Wb2x1bWVzL0hEL3hpYW9NaS9GRS94aWFvbWktbWFsbC1tb2JpbGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IHsgZ2V0Q29tbW9kaXR5QnlJZCB9IGZyb20gJ0AvYXBpL2NhdGVnb3J5JzsgLy8gaW1wb3J0IE1pU2VhcmNoIGZyb20gJ0AvY29tcG9uZW50cy9NaVRpdGxlLnZ1ZScKLy8gaW1wb3J0IGJ1cyBmcm9tICdAL3V0aWwvYnVzLmpzJwoKaW1wb3J0IE1pUmVjb21tZW5kIGZyb20gJ0AvY29tcG9uZW50cy9NaVJlY29tbWVuZC52dWUnOwppbXBvcnQgRE9NUHVyaWZ5IGZyb20gJ2RvbXB1cmlmeSc7CmltcG9ydCBNaVRpdGxlIGZyb20gJ0AvY29tcG9uZW50cy9NaVRpdGxlLnZ1ZSc7IC8vIGltcG9ydCBQYWdlRm9vdGVyIGZyb20gJ0AvY29tcG9uZW50cy9QYWdlRm9vdGVyLnZ1ZScKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICAvLyBNaVNlYXJjaCwKICAgIE1pUmVjb21tZW5kOiBNaVJlY29tbWVuZCwKICAgIE1pVGl0bGU6IE1pVGl0bGUgLy8gUGFnZUZvb3RlcgoKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb21tb2RpdHlMaXN0OiBudWxsIC8vIGxvYWRpbmc6IHRydWUKCiAgICB9OwogIH0sCiAgYmVmb3JlUm91dGVFbnRlcjogZnVuY3Rpb24gYmVmb3JlUm91dGVFbnRlcih0bywgZnJvbSwgbmV4dCkgewogICAgaWYgKGZyb20ubmFtZSkgewogICAgICBnZXRDb21tb2RpdHlCeUlkKHsKICAgICAgICBjYXRlZ29yeV9pZDogdG8ucGFyYW1zLmlkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICBuZXh0KGZ1bmN0aW9uICh2bSkgewogICAgICAgICAgICByZXR1cm4gdm0uc2V0TGlzdChyZXMuZGF0YS5saXN0KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBuZXh0KGZ1bmN0aW9uICh2bSkgewogICAgICAgIHJldHVybiB2bS5mZXRjaENvbW1vZGl0eUJ5SWQoKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICAvLyBjcmVhdGVkKCkgewogIC8vICAgdGhpcy5mZXRjaENvbW1vZGl0eUJ5SWQoewogIC8vICAgICBjYXRlZ29yeV9pZDogdGhpcy4kcm91dGUucGFyYW1zLmlkCiAgLy8gICB9KQogIC8vIH0sCiAgZGVzdG9yeWVkOiBmdW5jdGlvbiBkZXN0b3J5ZWQoKSB7CiAgICB0aGlzLiROUHJvZ3Jlc3MucmVtb3ZlKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZXRMaXN0OiBmdW5jdGlvbiBzZXRMaXN0KGxpc3QpIHsKICAgICAgdGhpcy4kTlByb2dyZXNzLmRvbmUoKTsKICAgICAgbGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaXRlbS5wcm9kdWN0X2Rlc2MgPSBET01QdXJpZnkuc2FuaXRpemUoaXRlbS5wcm9kdWN0X2Rlc2MpOwogICAgICB9KTsKICAgICAgdGhpcy5jb21tb2RpdHlMaXN0ID0gbGlzdDsgLy8gdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgLy8gYnVzLmVtaXQoJ2xvYWRpbmcnLCBmYWxzZSkKCiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Vmlld0xvYWRpbmcnLCBmYWxzZSk7CiAgICB9LAogICAgZmV0Y2hDb21tb2RpdHlCeUlkOiBmdW5jdGlvbiBmZXRjaENvbW1vZGl0eUJ5SWQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGdldENvbW1vZGl0eUJ5SWQoewogICAgICAgICAgICAgICAgICBjYXRlZ29yeV9pZDogX3RoaXMuJHJvdXRlLnBhcmFtcy5pZAogICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0TGlzdChyZXMuZGF0YS5saXN0KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/views/MiList.vue"],"names":[],"mappings":";;;;AAqDA,SAAS,gBAAT,QAAiC,gBAAjC,C,CACA;AACA;;AACA,OAAO,WAAP,MAAwB,8BAAxB;AACA,OAAO,SAAP,MAAsB,WAAtB;AACA,OAAO,OAAP,MAAoB,0BAApB,C,CACA;;AAEA,eAAe;AACb,EAAA,UAAU,EAAE;AACV;AACA,IAAA,WAAW,EAAX,WAFU;AAGV,IAAA,OAAM,EAAN,OAHU,CAIV;;AAJU,GADC;AAOb,EAAA,IAPa,kBAON;AACL,WAAO;AACL,MAAA,aAAa,EAAE,IADV,CAEL;;AAFK,KAAP;AAID,GAZY;AAab,EAAA,gBAba,4BAaI,EAbJ,EAaQ,IAbR,EAac,IAbd,EAaoB;AAC/B,QAAG,IAAI,CAAC,IAAR,EAAc;AACZ,MAAA,gBAAgB,CAAC;AACf,QAAA,WAAW,EAAE,EAAE,CAAC,MAAH,CAAU;AADR,OAAD,CAAhB,CAEG,IAFH,CAEQ,UAAA,GAAE,EAAK;AACb,YAAG,GAAG,CAAC,IAAJ,KAAa,GAAhB,EAAqB;AACnB,UAAA,IAAI,CAAC,UAAA,EAAC;AAAA,mBAAK,EAAE,CAAC,OAAH,CAAW,GAAG,CAAC,IAAJ,CAAS,IAApB,CAAL;AAAA,WAAF,CAAJ;AACF;AACD,OAND;AAOF,KARA,MAQO;AACL,MAAA,IAAI,CAAC,UAAA,EAAC;AAAA,eAAK,EAAE,CAAC,kBAAH,EAAL;AAAA,OAAF,CAAJ;AACF;AACD,GAzBY;AA0Bb;AACA;AACA;AACA;AACA;AACA,EAAA,SA/Ba,uBA+BD;AACV,SAAK,UAAL,CAAgB,MAAhB;AACD,GAjCY;AAkCb,EAAA,OAAO,EAAE;AACP,IAAA,OADO,mBACC,IADD,EACO;AACZ,WAAK,UAAL,CAAgB,IAAhB;AACA,MAAA,IAAI,CAAC,OAAL,CAAa,UAAA,IAAG,EAAK;AACnB,QAAA,IAAI,CAAC,YAAL,GAAoB,SAAS,CAAC,QAAV,CAAmB,IAAI,CAAC,YAAxB,CAApB;AACD,OAFD;AAGA,WAAK,aAAL,GAAqB,IAArB,CALY,CAMZ;AACA;;AACA,WAAK,MAAL,CAAY,MAAZ,CAAmB,gBAAnB,EAAqC,KAArC;AACD,KAVM;AAWD,IAAA,kBAXC,gCAWoB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACnB,gBAAgB,CAAC;AACrB,kBAAA,WAAW,EAAE,KAAI,CAAC,MAAL,CAAY,MAAZ,CAAmB;AADX,iBAAD,CAAhB,CAEH,IAFG,CAEE,UAAA,GAAE,EAAK;AACb,sBAAG,GAAG,CAAC,IAAJ,KAAa,GAAhB,EAAqB;AACnB,oBAAA,KAAI,CAAC,OAAL,CAAa,GAAG,CAAC,IAAJ,CAAS,IAAtB;AACF;AACD,iBANK,CADmB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQ3B;AAnBO;AAlCI,CAAf","sourcesContent":["<template>\r\n  <div class=\"app-shell\">\r\n    <mi-title title=\"商品列表\"/>\r\n\r\n    <!-- <div v-if=\"loading\">\r\n      <span>Loading . . .</span>\r\n    </div> -->\r\n\r\n    <!-- <div v-else class=\"app-view-wrapper\"> -->\r\n    <div class=\"app-view-wrapper\">\r\n      <div class=\"app-view app-view-with-header app-view-with-footer\">\r\n        <ol>\r\n          <li\r\n            v-for=\"list in commodityList\"\r\n            :key=\"list.product_id\"\r\n            class=\"item ui-flex align-center\"\r\n          >\r\n            <a class=\"item-img exposure\">\r\n              <img\r\n                :src=\"list.img_url\"\r\n                lazy=\"loaded\"\r\n              />\r\n              <span>\r\n                <img\r\n                  :src=\"list.icon_img\"\r\n                  lazy=\"loaded\"\r\n                />\r\n              </span>\r\n            </a>\r\n            <div class=\"item-intro box-flex flex\">\r\n              <div class=\"item-name flex\">\r\n                <p>{{list.name}}</p>\r\n              </div>\r\n              <div class=\"item-brief flex\">\r\n                <p v-html=\"list.product_desc\" />\r\n              </div>\r\n              <div class=\"item-intro-price flex\">\r\n                <span class=\"price\">\r\n                  &nbsp;{{list.price}}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </li>\r\n        </ol>\r\n\r\n        <mi-recommend />\r\n      </div>\r\n    </div>\r\n    <page-footer/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getCommodityById } from '@/api/category'\r\n// import MiSearch from '@/components/MiTitle.vue'\r\n// import bus from '@/util/bus.js'\r\nimport MiRecommend from '@/components/MiRecommend.vue'\r\nimport DOMPurify from 'dompurify'\r\nimport MiTitle from '@/components/MiTitle.vue'\r\n// import PageFooter from '@/components/PageFooter.vue'\r\n\r\nexport default {\r\n  components: {\r\n    // MiSearch,\r\n    MiRecommend,\r\n    MiTitle\r\n    // PageFooter\r\n  },\r\n  data() {\r\n    return {\r\n      commodityList: null\r\n      // loading: true\r\n    }\r\n  },\r\n  beforeRouteEnter(to, from, next) {\r\n    if(from.name) {\r\n      getCommodityById({\r\n        category_id: to.params.id\r\n      }).then(res => {\r\n        if(res.code === 200) {\r\n          next(vm => vm.setList(res.data.list))\r\n        }\r\n      })\r\n    } else {\r\n      next(vm => vm.fetchCommodityById())\r\n    }\r\n  },\r\n  // created() {\r\n  //   this.fetchCommodityById({\r\n  //     category_id: this.$route.params.id\r\n  //   })\r\n  // },\r\n  destoryed() {\r\n    this.$NProgress.remove()\r\n  },\r\n  methods: {\r\n    setList(list) {\r\n      this.$NProgress.done()\r\n      list.forEach(item => {\r\n        item.product_desc = DOMPurify.sanitize(item.product_desc)\r\n      })\r\n      this.commodityList = list\r\n      // this.loading = false\r\n      // bus.emit('loading', false)\r\n      this.$store.commit('setViewLoading', false)\r\n    },\r\n    async fetchCommodityById() {\r\n      await getCommodityById({\r\n        category_id: this.$route.params.id\r\n      }).then(res => {\r\n        if(res.code === 200) {\r\n          this.setList(res.data.list)\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.item:not(:last-child) {\r\n  padding: 0 0 3px;\r\n  position: relative;\r\n}\r\n\r\n.item:not(:last-child)::after {\r\n  content: \"\";\r\n  position: absolute;\r\n  bottom: 1px;\r\n  left: 1px;\r\n  right: 1px;\r\n  border-bottom: 1px solid #e4e4e4;\r\n}\r\n\r\n.item-img {\r\n  position: relative;\r\n  width: 156px;\r\n  height: 156px;\r\n  text-align: center;\r\n  display: block;\r\n\r\n  img {\r\n    width: auto;\r\n    height: 100%;\r\n  }\r\n\r\n  span {\r\n    display: block;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 78px;\r\n  }\r\n}\r\n\r\n.item-img span img {\r\n  width: auto;\r\n  height: 16px;\r\n}\r\n\r\n.item-intro {\r\n  display: block;\r\n  padding: 0 16px 4px;\r\n  width: 185px;\r\n  box-sizing: border-box;\r\n  text-align: left;\r\n\r\n  .item-name {\r\n    font-size: 16px;\r\n    color: rgba(0,0,0,.87);\r\n    margin-bottom: 8px;\r\n  }\r\n\r\n  .item-brief {\r\n    font-size: 12px;\r\n    color: rgba(0,0,0,.54);\r\n    margin-bottom: 8px;\r\n    line-height: 16px;\r\n    height: 32px;\r\n    overflow: hidden;\r\n\r\n    p {\r\n      text-overflow: ellipsis;\r\n      overflow: hidden;\r\n      -webkit-line-clamp: 2;\r\n      -webkit-box-orient: vertical;\r\n      word-break: break-all;\r\n    }\r\n  }\r\n\r\n  span {\r\n    color: #ff6000;\r\n  }\r\n}\r\n\r\n// .price {\r\n//   position: relative;\r\n//   padding-left: 8px;\r\n//   line-height: 18px;\r\n// }\r\n\r\n// .price:before {\r\n//   content: \"\\A5\";\r\n//   position: absolute;\r\n//   left: 0;\r\n//   top: 0;\r\n//   font-size: 16px;\r\n//   text-decoration: none;\r\n// }\r\n</style>\r\n"],"sourceRoot":""}]}