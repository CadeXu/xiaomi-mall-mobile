{"remainingRequest":"/Users/apple/xiaoMi/FE/xiaomi-mall-mobile/node_modules/babel-loader/lib/index.js!/Users/apple/xiaoMi/FE/xiaomi-mall-mobile/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/xiaoMi/FE/xiaomi-mall-mobile/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/apple/xiaoMi/FE/xiaomi-mall-mobile/src/components/MiAddressAll.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/apple/xiaoMi/FE/xiaomi-mall-mobile/src/components/MiAddressAll.vue","mtime":1637845727772},{"path":"/Users/apple/xiaoMi/FE/xiaomi-mall-mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/xiaoMi/FE/xiaomi-mall-mobile/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/apple/xiaoMi/FE/xiaomi-mall-mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/xiaoMi/FE/xiaomi-mall-mobile/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCBhZGRyZXNzQWxsIGZyb20gJ0AvbW9jay9hZGRyZXNzQWxsLmpzJzsKaW1wb3J0IHsgZ2V0QWxsQWRkcmVzcywgYWRkcmVzc1JlZ2lvbiB9IGZyb20gJ0AvYXBpL2FkZHJlc3MuanMnOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY3VySW5kZXg6IDAsCiAgICAgIHJlZ2lvbnM6IFt7CiAgICAgICAgLy8gUHJvdmluY2UKICAgICAgICBpZDogMCwKICAgICAgICBuYW1lOiAn6K+36YCJ5oupJywKICAgICAgICBsaXN0OiBbXQogICAgICB9LCB7CiAgICAgICAgLy8gY2l0eQogICAgICAgIGlkOiAwLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGxpc3Q6IFtdCiAgICAgIH0sIHsKICAgICAgICAvLyBkaXN0cmljdAogICAgICAgIGlkOiAwLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGxpc3Q6IFtdCiAgICAgIH0sIHsKICAgICAgICAvLyBhcmVhCiAgICAgICAgaWQ6IDAsCiAgICAgICAgbmFtZTogJycsCiAgICAgICAgbGlzdDogW10KICAgICAgfV0sCiAgICAgIGN1ckxpc3Q6IFtdCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIGN1ckluZGV4OiBmdW5jdGlvbiBjdXJJbmRleCh2YWwpIHsKICAgICAgdGhpcy5jdXJMaXN0ID0gdGhpcy5yZWdpb25zW3ZhbF0ubGlzdDsKICAgIH0sCiAgICByZWdpb25zOiB7CiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIodmFsKSB7CiAgICAgICAgdGhpcy5jdXJMaXN0ID0gdmFsW3RoaXMuY3VySW5kZXhdLmxpc3Q7CiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldEFsbCgpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0QWxsOiBmdW5jdGlvbiBnZXRBbGwoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBnZXRBbGxBZGRyZXNzKCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgX3RoaXMucmVnaW9uc1tfdGhpcy5jdXJJbmRleF0ubGlzdCA9IGFkZHJlc3NBbGwuZGF0YTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNlbGVjdDogZnVuY3Rpb24gc2VsZWN0KGl0ZW0pIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLnJlZ2lvbnNbdGhpcy5jdXJJbmRleF0ubmFtZSA9IGl0ZW0ubmFtZTsKICAgICAgdGhpcy5yZWdpb25zW3RoaXMuY3VySW5kZXhdLmlkID0gaXRlbS5pZDsKCiAgICAgIGlmICh0aGlzLmN1ckluZGV4IDwgMikgewogICAgICAgIC8vIGNpdHkKICAgICAgICB0aGlzLmN1ckluZGV4Kys7CiAgICAgICAgdGhpcy5yZWdpb25zW3RoaXMuY3VySW5kZXhdLm5hbWUgPSAn6K+36YCJ5oupJzsKICAgICAgICB0aGlzLnJlZ2lvbnNbdGhpcy5jdXJJbmRleF0ubGlzdCA9IGl0ZW0uY2hpbGQ7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5jdXJJbmRleCA9PT0gMikgewogICAgICAgIC8vIHJlZ2lvbgogICAgICAgIHRoaXMuY3VySW5kZXgrKzsKICAgICAgICB0aGlzLnJlZ2lvbnNbdGhpcy5jdXJJbmRleF0ubmFtZSA9ICfor7fpgInmi6knOwogICAgICAgIGFkZHJlc3NSZWdpb24oewogICAgICAgICAgcGFyZW50X2lkOiBpdGVtLmlkCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAvLyB0aGlzLnJlZ2lvbnNbdGhpcy5jdXJJbmRleF0ubGlzdCA9IHJlcy5kYXRhCiAgICAgICAgICBfdGhpczIuY3VyTGlzdCA9IHJlcy5kYXRhOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIGFyZWEKICAgICAgICB2YXIgcmVnaW9uID0gdGhpcy5yZWdpb25zOwogICAgICAgIHRoaXMuJGVtaXQoJ3JlZ2lvbicsIHsKICAgICAgICAgIC8vIHRyYW5zZm9ybSB0byBwYXJlbnQgY29tcG9uZW50CiAgICAgICAgICBwcm92aW5jZTogcmVnaW9uWzBdLm5hbWUsCiAgICAgICAgICBwcm92aW5jZV9pZDogcmVnaW9uWzBdLmlkLAogICAgICAgICAgY2l0eTogcmVnaW9uWzFdLm5hbWUsCiAgICAgICAgICBjaXR5X2lkOiByZWdpb25bMV0uaWQsCiAgICAgICAgICBkaXN0cmljdDogcmVnaW9uWzJdLm5hbWUsCiAgICAgICAgICBkaXN0cmljdF9pZDogcmVnaW9uWzJdLmlkLAogICAgICAgICAgYXJlYTogcmVnaW9uWzNdLm5hbWUsCiAgICAgICAgICBhcmVhX2lkOiByZWdpb25bM10uaWQKICAgICAgICB9KTsKICAgICAgICB0aGlzLmNsb3NlKCk7CiAgICAgIH0KICAgIH0sCiAgICBjaGFuZ2VUYWI6IGZ1bmN0aW9uIGNoYW5nZVRhYihpbmRleCkgewogICAgICB0aGlzLmN1ckluZGV4ID0gaW5kZXg7CiAgICAgIHRoaXMucmVnaW9uc1tpbmRleF0ubmFtZSA9ICfor7fpgInmi6knOwoKICAgICAgZm9yICh2YXIgaSA9IGluZGV4ICsgMTsgaSA8IDQ7ICsraSkgewogICAgICAgIHRoaXMucmVnaW9uc1tpXSA9IHsKICAgICAgICAgIGlkOiAwLAogICAgICAgICAgbmFtZTogJycsCiAgICAgICAgICBsaXN0OiBbXQogICAgICAgIH07CiAgICAgIH0KICAgIH0sCiAgICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoKSB7CiAgICAgIHRoaXMuY3VySW5kZXggPSAwOwogICAgICB0aGlzLnJlZ2lvbnNbMF0ubmFtZSA9ICfor7fpgInmi6knOwoKICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCA0OyBpKyspIHsKICAgICAgICB0aGlzLnJlZ2lvbnNbaV0gPSB7CiAgICAgICAgICBpZDogMCwKICAgICAgICAgIG5hbWU6ICcnLAogICAgICAgICAgbGlzdDogW10KICAgICAgICB9OwogICAgICB9CgogICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6dmFsdWUnLCBmYWxzZSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/apple/xiaoMi/FE/xiaomi-mall-mobile/src/components/MiAddressAll.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"popup-regions-box\">\n    <div v-if=\"value\" class=\"ui-mask\"></div>\n\n    <transition name=\"bottom-up\">\n      <div v-if=\"value\" class=\"ui-pop\">\n        <div class=\"ui-pop-close\" @click=\"close\">\n          <a>\n            <i class=\"image-icons iconfont icon-icon-close\"></i>\n          </a>\n        </div>\n\n        <div class=\"ui-pop-title\">选择地址</div>\n\n        <div class=\"ui-pop-conten\">\n          <div class=\"region-tab\">\n            <span\n              v-for=\"(item,index) in regions\"\n              :key=\"index\"\n              :class=\"{'active': index===curIndex}\"\n              @click=\"changeTab(index)\"\n            >\n              {{item.name}}\n            </span>\n          </div>\n\n          <div class=\"region-list\">\n            <dl class=\"rl1\">\n              <dd\n                v-for=\"item in curList\"\n                :key=\"item.id\"\n                @click=\"select(item)\"\n              >\n                {{item.name}}\n              </dd>\n            </dl>\n          </div>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport addressAll from '@/mock/addressAll.js'\nimport { getAllAddress, addressRegion } from '@/api/address.js'\n\nexport default {\n  props: {\n    value: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      curIndex: 0,\n      regions: [\n        {\n          // Province\n          id: 0,\n          name: '请选择',\n          list: []\n        },\n        {\n          // city\n          id: 0,\n          name: '',\n          list: []\n        },\n        {\n          // district\n          id: 0,\n          name: '',\n          list: []\n        },\n        {\n          // area\n          id: 0,\n          name: '',\n          list: []\n        }\n      ],\n      curList: []\n    }\n  },\n  watch: {\n    curIndex(val) {\n      this.curList = this.regions[val].list\n    },\n    regions: {\n      deep: true,\n      handler(val) {\n        this.curList = val[this.curIndex].list\n      }\n    }\n  },\n  created() {\n    this.getAll()\n  },\n  methods: {\n    getAll() {\n      getAllAddress().then(res => {\n        if(res.status === 200) {\n          this.regions[this.curIndex].list = addressAll.data\n        }\n      })\n    },\n    select(item) {\n      this.regions[this.curIndex].name = item.name\n      this.regions[this.curIndex].id = item.id\n      if(this.curIndex < 2) {\n        // city\n        this.curIndex++\n        this.regions[this.curIndex].name = '请选择'\n        this.regions[this.curIndex].list = item.child\n      } else if(this.curIndex === 2) {\n        // region\n        this.curIndex++\n        this.regions[this.curIndex].name = '请选择'\n        addressRegion({\n          parent_id: item.id\n        }).then(res => {\n          // this.regions[this.curIndex].list = res.data\n          this.curList = res.data\n        })\n      } else {\n        // area\n        let region = this.regions\n        this.$emit('region', {\n          // transform to parent component\n          province: region[0].name,\n          province_id: region[0].id,\n          city: region[1].name,\n          city_id: region[1].id,\n          district: region[2].name,\n          district_id: region[2].id,\n          area: region[3].name,\n          area_id: region[3].id\n        })\n        this.close()\n      }\n    },\n    changeTab(index) {\n      this.curIndex = index\n      this.regions[index].name = '请选择'\n      for(let i = index + 1; i < 4; ++i) {\n        this.regions[i] = {\n          id: 0,\n          name: '',\n          list: []\n        }\n      }\n    },\n    close() {\n      this.curIndex = 0\n      this.regions[0].name = '请选择'\n      for(let i = 1; i < 4; i++) {\n        this.regions[i] = {\n          id: 0,\n          name: '',\n          list: []\n        }\n      }\n      this.$emit('update:value', false)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.popup-regions-box {\n  font-size: 12px;\n\n  .ui-pop {\n    top: auto;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: #fff;\n    position: fixed;\n    overflow: hidden;\n    z-index: 101;\n    text-align: left;\n\n    .ui-pop-close {\n      display: block;\n      top: 10px;\n      right: 0;\n      position: absolute;\n      z-index: 1;\n    }\n\n    .ui-pop-close i {\n      color: #a6a6a6;\n      font-size: 20px;\n      font-weight: 900;\n      line-height: 40px;\n    }\n  }\n\n  .ui-pop-title {\n    font-size: 15px;\n    text-align: center;\n    line-height: 50px;\n  }\n\n  .region-tab {\n    border-bottom: 1px solid #f6f6f6;\n    padding: 0 10px;\n\n    span {\n      padding: 8px;\n      display: inline-block;\n\n      &.active {\n        border-bottom: 2px solid #f60;\n        color: #f60;\n      }\n    }\n  }\n\n  .region-list {\n    height: 200px;\n    overflow: auto;\n\n    dl {\n      padding: 5px 10px;\n    }\n\n    dd {\n      display: block;\n      padding: 5px 8px;\n    }\n  }\n}\n\n.bottom-up-enter-active, .bottom-up-leave-active {\n  transition: all .5s;\n}\n.bottom-up-enter {\n  transform: translateY(100%);\n}\n.bottom-up-enter-to, .bottom-up-leave {\n  transform: translateX(0);\n}\n.bottom-up-leave-to {\n  transform: translateY(100%);\n}\n</style>\n"],"sourceRoot":""}]}