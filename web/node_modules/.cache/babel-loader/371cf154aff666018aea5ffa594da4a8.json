{"remainingRequest":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/babel-loader/lib/index.js!/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/components/MiAddressAll.vue?vue&type=template&id=3784e10e&scoped=true","dependencies":[{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/components/MiAddressAll.vue","mtime":1637845727772},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":499162500000},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCB7IG9wZW5CbG9jayBhcyBfb3BlbkJsb2NrLCBjcmVhdGVFbGVtZW50QmxvY2sgYXMgX2NyZWF0ZUVsZW1lbnRCbG9jaywgY3JlYXRlQ29tbWVudFZOb2RlIGFzIF9jcmVhdGVDb21tZW50Vk5vZGUsIGNyZWF0ZUVsZW1lbnRWTm9kZSBhcyBfY3JlYXRlRWxlbWVudFZOb2RlLCByZW5kZXJMaXN0IGFzIF9yZW5kZXJMaXN0LCBGcmFnbWVudCBhcyBfRnJhZ21lbnQsIHRvRGlzcGxheVN0cmluZyBhcyBfdG9EaXNwbGF5U3RyaW5nLCBub3JtYWxpemVDbGFzcyBhcyBfbm9ybWFsaXplQ2xhc3MsIFRyYW5zaXRpb24gYXMgX1RyYW5zaXRpb24sIHdpdGhDdHggYXMgX3dpdGhDdHgsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgd2l0aFNjb3BlSWQgYXMgX3dpdGhTY29wZUlkLCBwdXNoU2NvcGVJZCBhcyBfcHVzaFNjb3BlSWQsIHBvcFNjb3BlSWQgYXMgX3BvcFNjb3BlSWQgfSBmcm9tICJ2dWUiOwoKX3B1c2hTY29wZUlkKCJkYXRhLXYtMzc4NGUxMGUiKTsKCnZhciBfaG9pc3RlZF8xID0gewogIGNsYXNzOiAicG9wdXAtcmVnaW9ucy1ib3giCn07CnZhciBfaG9pc3RlZF8yID0gewogIGtleTogMCwKICBjbGFzczogInVpLW1hc2siCn07CnZhciBfaG9pc3RlZF8zID0gewogIGtleTogMCwKICBjbGFzczogInVpLXBvcCIKfTsKCnZhciBfaG9pc3RlZF80ID0gLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoImEiLCBudWxsLCBbLyojX19QVVJFX18qL19jcmVhdGVFbGVtZW50Vk5vZGUoImkiLCB7CiAgY2xhc3M6ICJpbWFnZS1pY29ucyBpY29uZm9udCBpY29uLWljb24tY2xvc2UiCn0pXSwgLTEKLyogSE9JU1RFRCAqLwopOwoKdmFyIF9ob2lzdGVkXzUgPSBbX2hvaXN0ZWRfNF07Cgp2YXIgX2hvaXN0ZWRfNiA9IC8qI19fUFVSRV9fKi9fY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCB7CiAgY2xhc3M6ICJ1aS1wb3AtdGl0bGUiCn0sICLpgInmi6nlnLDlnYAiLCAtMQovKiBIT0lTVEVEICovCik7Cgp2YXIgX2hvaXN0ZWRfNyA9IHsKICBjbGFzczogInVpLXBvcC1jb250ZW4iCn07CnZhciBfaG9pc3RlZF84ID0gewogIGNsYXNzOiAicmVnaW9uLXRhYiIKfTsKdmFyIF9ob2lzdGVkXzkgPSBbIm9uQ2xpY2siXTsKdmFyIF9ob2lzdGVkXzEwID0gewogIGNsYXNzOiAicmVnaW9uLWxpc3QiCn07CnZhciBfaG9pc3RlZF8xMSA9IHsKICBjbGFzczogInJsMSIKfTsKdmFyIF9ob2lzdGVkXzEyID0gWyJvbkNsaWNrIl07CgpfcG9wU2NvcGVJZCgpOwoKZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcihfY3R4LCBfY2FjaGUsICRwcm9wcywgJHNldHVwLCAkZGF0YSwgJG9wdGlvbnMpIHsKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xLCBbJHByb3BzLnZhbHVlID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMikpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgidi1pZiIsIHRydWUpLCBfY3JlYXRlVk5vZGUoX1RyYW5zaXRpb24sIHsKICAgIG5hbWU6ICJib3R0b20tdXAiCiAgfSwgewogICAgZGVmYXVsdDogX3dpdGhDdHgoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gWyRwcm9wcy52YWx1ZSA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVFbGVtZW50QmxvY2soImRpdiIsIF9ob2lzdGVkXzMsIFtfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCB7CiAgICAgICAgY2xhc3M6ICJ1aS1wb3AtY2xvc2UiLAogICAgICAgIG9uQ2xpY2s6IF9jYWNoZVswXSB8fCAoX2NhY2hlWzBdID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuICRvcHRpb25zLmNsb3NlICYmICRvcHRpb25zLmNsb3NlLmFwcGx5KCRvcHRpb25zLCBhcmd1bWVudHMpOwogICAgICAgIH0pCiAgICAgIH0sIF9ob2lzdGVkXzUpLCBfaG9pc3RlZF82LCBfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF83LCBbX2NyZWF0ZUVsZW1lbnRWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfOCwgWyhfb3BlbkJsb2NrKHRydWUpLCBfY3JlYXRlRWxlbWVudEJsb2NrKF9GcmFnbWVudCwgbnVsbCwgX3JlbmRlckxpc3QoJGRhdGEucmVnaW9ucywgZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygic3BhbiIsIHsKICAgICAgICAgIGtleTogaW5kZXgsCiAgICAgICAgICBjbGFzczogX25vcm1hbGl6ZUNsYXNzKHsKICAgICAgICAgICAgJ2FjdGl2ZSc6IGluZGV4ID09PSAkZGF0YS5jdXJJbmRleAogICAgICAgICAgfSksCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCRldmVudCkgewogICAgICAgICAgICByZXR1cm4gJG9wdGlvbnMuY2hhbmdlVGFiKGluZGV4KTsKICAgICAgICAgIH0KICAgICAgICB9LCBfdG9EaXNwbGF5U3RyaW5nKGl0ZW0ubmFtZSksIDExCiAgICAgICAgLyogVEVYVCwgQ0xBU1MsIFBST1BTICovCiAgICAgICAgLCBfaG9pc3RlZF85KTsKICAgICAgfSksIDEyOAogICAgICAvKiBLRVlFRF9GUkFHTUVOVCAqLwogICAgICApKV0pLCBfY3JlYXRlRWxlbWVudFZOb2RlKCJkaXYiLCBfaG9pc3RlZF8xMCwgW19jcmVhdGVFbGVtZW50Vk5vZGUoImRsIiwgX2hvaXN0ZWRfMTEsIFsoX29wZW5CbG9jayh0cnVlKSwgX2NyZWF0ZUVsZW1lbnRCbG9jayhfRnJhZ21lbnQsIG51bGwsIF9yZW5kZXJMaXN0KCRkYXRhLmN1ckxpc3QsIGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUVsZW1lbnRCbG9jaygiZGQiLCB7CiAgICAgICAgICBrZXk6IGl0ZW0uaWQsCiAgICAgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKCRldmVudCkgewogICAgICAgICAgICByZXR1cm4gJG9wdGlvbnMuc2VsZWN0KGl0ZW0pOwogICAgICAgICAgfQogICAgICAgIH0sIF90b0Rpc3BsYXlTdHJpbmcoaXRlbS5uYW1lKSwgOQogICAgICAgIC8qIFRFWFQsIFBST1BTICovCiAgICAgICAgLCBfaG9pc3RlZF8xMik7CiAgICAgIH0pLCAxMjgKICAgICAgLyogS0VZRURfRlJBR01FTlQgKi8KICAgICAgKSldKV0pXSldKSkgOiBfY3JlYXRlQ29tbWVudFZOb2RlKCJ2LWlmIiwgdHJ1ZSldOwogICAgfSksCiAgICBfOiAxCiAgICAvKiBTVEFCTEUgKi8KCiAgfSldKTsKfQ=="},{"version":3,"sources":["/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/components/MiAddressAll.vue"],"names":[],"mappings":";;;;;;AACO,EAAA,KAAK,EAAC;;;;AACS,EAAA,KAAK,EAAC;;;;AAGJ,EAAA,KAAK,EAAC;;;8BAEpB,mBAAA,CAEI,GAFJ,EAEI,IAFJ,EAEI,C,aADF,mBAAA,CAAoD,GAApD,EAAoD;AAAjD,EAAA,KAAK,EAAC;AAA2C,CAApD,CACE,CAFJ,E;;AAAA,C;;kBAAA,U;;8BAKF,mBAAA,CAAoC,KAApC,EAAoC;AAA/B,EAAA,KAAK,EAAC;AAAyB,CAApC,EAA0B,MAA1B,EAA8B,CAAA;AAAA;AAA9B,C;;;AAEK,EAAA,KAAK,EAAC;;;AACJ,EAAA,KAAK,EAAC;;;;AAWN,EAAA,KAAK,EAAC;;;AACL,EAAA,KAAK,EAAC;;;;;;;uBA1BpB,mBAAA,CAuCM,KAvCN,EAAA,UAAA,EAuCM,CAtCO,MAAA,CAAA,K,kBAAX,mBAAA,CAAwC,KAAxC,EAAA,UAAA,C,qCAsCI,EApCJ,YAAA,CAmCa,WAnCb,EAmCa;AAnCD,IAAA,IAAI,EAAC;AAmCJ,GAnCb,EAA4B;sBAC1B;AAAA,aAiCM,CAjCK,MAAA,CAAA,K,kBAAX,mBAAA,CAiCM,KAjCN,EAAA,UAAA,EAiCM,CAhCJ,mBAAA,CAIM,KAJN,EAIM;AAJD,QAAA,KAAK,EAAC,cAIL;AAJqB,QAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAA,iBAAE,QAAA,CAAA,KAAA,IAAA,QAAA,CAAA,KAAA,OAAA,QAAA,YAAF;AAAA,SAAA;AAI1B,OAJN,E,UAAA,CAgCI,EA1BJ,UA0BI,EAxBJ,mBAAA,CAuBM,KAvBN,EAAA,UAAA,EAuBM,CAtBJ,mBAAA,CASM,KATN,EAAA,UAAA,EASM,E,kBARJ,mBAAA,CAOO,SAPP,EAOO,IAPP,EAOO,WAAA,CANkB,KAAA,CAAA,OAMlB,EANyB,UAAtB,IAAsB,EAAjB,KAAiB,EAAZ;6BADpB,mBAAA,CAOO,MAPP,EAOO;AALJ,UAAA,GAAG,EAAE,KAKD;AAJJ,UAAA,KAAK,EAAA,eAAA,CAAA;AAAA,sBAAa,KAAK,KAAG,KAAA,CAAA;AAArB,WAAA,CAID;AAHJ,UAAA,OAAK,EAAA,iBAAA,MAAA;AAAA,mBAAE,QAAA,CAAA,SAAA,CAAU,KAAV,CAAF;AAAA;AAGD,SAPP,E,iBAMI,IAAI,CAAC,I,CANT,EAMa;AAAA;AANb,UAMa,UANb,C;OAOO,CAPP,E;;AAAA,OAQI,EATN,CAsBI,EAXJ,mBAAA,CAUM,KAVN,EAAA,WAAA,EAUM,CATJ,mBAAA,CAQK,IARL,EAAA,WAAA,EAQK,E,kBAPH,mBAAA,CAMK,SANL,EAMK,IANL,EAMK,WAAA,CALY,KAAA,CAAA,OAKZ,EALmB,UAAf,IAAe,EAAX;6BADb,mBAAA,CAMK,IANL,EAMK;AAJF,UAAA,GAAG,EAAE,IAAI,CAAC,EAIR;AAHF,UAAA,OAAK,EAAA,iBAAA,MAAA;AAAA,mBAAE,QAAA,CAAA,MAAA,CAAO,IAAP,CAAF;AAAA;AAGH,SANL,E,iBAKI,IAAI,CAAC,I,CALT,EAKa;AAAA;AALb,UAKa,WALb,C;OAMK,CANL,E;;AAAA,OAOG,EARL,CASI,CAVN,CAWI,CAvBN,CAwBI,CAjCN,C,qCAiCM,CAjCN;AAAA,K,CAD0B;;;;AAAA,GAA5B,CAoCI,CAvCN,C","sourcesContent":["<template>\n  <div class=\"popup-regions-box\">\n    <div v-if=\"value\" class=\"ui-mask\"></div>\n\n    <transition name=\"bottom-up\">\n      <div v-if=\"value\" class=\"ui-pop\">\n        <div class=\"ui-pop-close\" @click=\"close\">\n          <a>\n            <i class=\"image-icons iconfont icon-icon-close\"></i>\n          </a>\n        </div>\n\n        <div class=\"ui-pop-title\">选择地址</div>\n\n        <div class=\"ui-pop-conten\">\n          <div class=\"region-tab\">\n            <span\n              v-for=\"(item,index) in regions\"\n              :key=\"index\"\n              :class=\"{'active': index===curIndex}\"\n              @click=\"changeTab(index)\"\n            >\n              {{item.name}}\n            </span>\n          </div>\n\n          <div class=\"region-list\">\n            <dl class=\"rl1\">\n              <dd\n                v-for=\"item in curList\"\n                :key=\"item.id\"\n                @click=\"select(item)\"\n              >\n                {{item.name}}\n              </dd>\n            </dl>\n          </div>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport addressAll from '@/mock/addressAll.js'\nimport { getAllAddress, addressRegion } from '@/api/address.js'\n\nexport default {\n  props: {\n    value: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      curIndex: 0,\n      regions: [\n        {\n          // Province\n          id: 0,\n          name: '请选择',\n          list: []\n        },\n        {\n          // city\n          id: 0,\n          name: '',\n          list: []\n        },\n        {\n          // district\n          id: 0,\n          name: '',\n          list: []\n        },\n        {\n          // area\n          id: 0,\n          name: '',\n          list: []\n        }\n      ],\n      curList: []\n    }\n  },\n  watch: {\n    curIndex(val) {\n      this.curList = this.regions[val].list\n    },\n    regions: {\n      deep: true,\n      handler(val) {\n        this.curList = val[this.curIndex].list\n      }\n    }\n  },\n  created() {\n    this.getAll()\n  },\n  methods: {\n    getAll() {\n      getAllAddress().then(res => {\n        if(res.status === 200) {\n          this.regions[this.curIndex].list = addressAll.data\n        }\n      })\n    },\n    select(item) {\n      this.regions[this.curIndex].name = item.name\n      this.regions[this.curIndex].id = item.id\n      if(this.curIndex < 2) {\n        // city\n        this.curIndex++\n        this.regions[this.curIndex].name = '请选择'\n        this.regions[this.curIndex].list = item.child\n      } else if(this.curIndex === 2) {\n        // region\n        this.curIndex++\n        this.regions[this.curIndex].name = '请选择'\n        addressRegion({\n          parent_id: item.id\n        }).then(res => {\n          // this.regions[this.curIndex].list = res.data\n          this.curList = res.data\n        })\n      } else {\n        // area\n        let region = this.regions\n        this.$emit('region', {\n          // transform to parent component\n          province: region[0].name,\n          province_id: region[0].id,\n          city: region[1].name,\n          city_id: region[1].id,\n          district: region[2].name,\n          district_id: region[2].id,\n          area: region[3].name,\n          area_id: region[3].id\n        })\n        this.close()\n      }\n    },\n    changeTab(index) {\n      this.curIndex = index\n      this.regions[index].name = '请选择'\n      for(let i = index + 1; i < 4; ++i) {\n        this.regions[i] = {\n          id: 0,\n          name: '',\n          list: []\n        }\n      }\n    },\n    close() {\n      this.curIndex = 0\n      this.regions[0].name = '请选择'\n      for(let i = 1; i < 4; i++) {\n        this.regions[i] = {\n          id: 0,\n          name: '',\n          list: []\n        }\n      }\n      this.$emit('update:value', false)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.popup-regions-box {\n  font-size: 12px;\n\n  .ui-pop {\n    top: auto;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: #fff;\n    position: fixed;\n    overflow: hidden;\n    z-index: 101;\n    text-align: left;\n\n    .ui-pop-close {\n      display: block;\n      top: 10px;\n      right: 0;\n      position: absolute;\n      z-index: 1;\n    }\n\n    .ui-pop-close i {\n      color: #a6a6a6;\n      font-size: 20px;\n      font-weight: 900;\n      line-height: 40px;\n    }\n  }\n\n  .ui-pop-title {\n    font-size: 15px;\n    text-align: center;\n    line-height: 50px;\n  }\n\n  .region-tab {\n    border-bottom: 1px solid #f6f6f6;\n    padding: 0 10px;\n\n    span {\n      padding: 8px;\n      display: inline-block;\n\n      &.active {\n        border-bottom: 2px solid #f60;\n        color: #f60;\n      }\n    }\n  }\n\n  .region-list {\n    height: 200px;\n    overflow: auto;\n\n    dl {\n      padding: 5px 10px;\n    }\n\n    dd {\n      display: block;\n      padding: 5px 8px;\n    }\n  }\n}\n\n.bottom-up-enter-active, .bottom-up-leave-active {\n  transition: all .5s;\n}\n.bottom-up-enter {\n  transform: translateY(100%);\n}\n.bottom-up-enter-to, .bottom-up-leave {\n  transform: translateX(0);\n}\n.bottom-up-leave-to {\n  transform: translateY(100%);\n}\n</style>\n"],"sourceRoot":""}]}