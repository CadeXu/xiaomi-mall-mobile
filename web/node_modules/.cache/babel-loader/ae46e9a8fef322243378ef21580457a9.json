{"remainingRequest":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/thread-loader/dist/cjs.js!/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/babel-loader/lib/index.js!/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/eslint-loader/index.js??ref--13-0!/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/views/MiCart/MiCart.js?vue&type=script&lang=js","dependencies":[{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/views/MiCart/MiCart.js","mtime":1637933789673},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1ZvbHVtZXMvSEQveGlhb01pL0ZFL3hpYW9taS1tYWxsLW1vYmlsZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgeyBjYXJ0TGlzdCB9IGZyb20gJ0AvbW9jay9jYXJ0LmpzJzsgLy8gaW1wb3J0IE1pU2VhcmNoIGZyb20gJ0AvY29tcG9uZW50cy9NaVRpdGxlLnZ1ZScKCmltcG9ydCBNaVBvcCBmcm9tICdAL2NvbXBvbmVudHMvTWlQb3AudnVlJzsKaW1wb3J0IE1pUmVjb21tZW5kIGZyb20gJ0AvY29tcG9uZW50cy9NaVJlY29tbWVuZC52dWUnOwppbXBvcnQgeyBnZXRDYXJ0TGlzdCwgc2VsZWN0R29vZHMsIHNlbGVjdFNlcnZpY2VzLCBlZGl0Q2FydCwgLy8gYWRkR29vZHMsCmRlbGV0ZUdvb2RzIH0gZnJvbSAnQC9hcGkvY2FydCc7CmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcE11dGF0aW9ucyB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgLy8gTWlTZWFyY2gsCiAgICBNaVBvcDogTWlQb3AsCiAgICBNaVJlY29tbWVuZDogTWlSZWNvbW1lbmQKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjYXJ0TGlzdDogbnVsbCwKICAgICAgc2VydmljZUluZm9MaXN0OiBudWxsLAogICAgICAvLyBDdXJyZW50bHkuIHNlcnZpY2UgbGlzdCBkb3NlIG5vdCBiZSBzZWxlY3RlZAogICAgICBzaG93U2VydmljZUluZm86IGZhbHNlLAogICAgICBzZXJ2aWNlU2VsZWN0TWVzc2FnZTogJ+ivt+mAieaLqeacjeWKoeexu+WeiycsCiAgICAgIHNlcnZpY2VTZWxlY3RDYXNoQXJyOiBbXSwKICAgICAgc2VydmljZVNlbGVjdENhc2hJdGVtOiBudWxsLAogICAgICAvLyBDdXJyZW50LCBzZWxlY3RlZCBzZXJ2aWNlIG9iamVjdCBpbiBwb3B1cAogICAgICB0b3RhbE51bWJlcjogMCwKICAgICAgdG90YWxQcmljZTogMAogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBjYXJ0TGlzdDogewogICAgICBkZWVwOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHZhbCkgewogICAgICAgIHZhciBhbGwgPSAwOwogICAgICAgIHZhciBudW0gPSAwOwogICAgICAgIHZhciBwcmljZSA9IDA7CiAgICAgICAgdmFsLmZvckVhY2goZnVuY3Rpb24gKGxpc3QpIHsKICAgICAgICAgIGlmIChsaXN0LnNlbF9zdGF0dXMpIHsKICAgICAgICAgICAgbnVtICs9IGxpc3QubnVtOwoKICAgICAgICAgICAgaWYgKGxpc3QucHJpY2UpIHsKICAgICAgICAgICAgICBwcmljZSArPSBsaXN0Lm51bSAqIGxpc3QucHJpY2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBhbGwgKz0gbGlzdC5udW07CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy50b3RhbE51bWJlciA9IG51bTsKICAgICAgICB0aGlzLnRvdGFsUHJpY2UgPSBwcmljZTsKICAgICAgICB0aGlzLnNldENhcnRDb3VudChhbGwpOwogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycyhbJ2lzTG9naW4nXSkpLAogIGJlZm9yZVJvdXRlRW50ZXI6IGZ1bmN0aW9uIGJlZm9yZVJvdXRlRW50ZXIodG8sIGZyb20sIG5leHQpIHsKICAgIGlmIChmcm9tLm5hbWUpIHsKICAgICAgZ2V0Q2FydExpc3QoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBuZXh0KGZ1bmN0aW9uICh2bSkgewogICAgICAgICAgcmV0dXJuIHZtLnNldENhcnRMaXN0KHJlcyk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgbmV4dChmdW5jdGlvbiAodm0pIHsKICAgICAgICByZXR1cm4gdm0uZmV0Y2hDYXJ0TGlzdCgpOwogICAgICB9KTsKICAgIH0KICB9LAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwTXV0YXRpb25zKHsKICAgIHNldENhcnRDb3VudDogJ2NhcnQvc2V0Q291bnQnCiAgfSkpLCB7fSwgewogICAgZmV0Y2hDYXJ0TGlzdDogZnVuY3Rpb24gZmV0Y2hDYXJ0TGlzdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGdldENhcnRMaXN0KCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMuc2V0Q2FydExpc3QocmVzKTsKICAgICAgfSk7CiAgICB9LAogICAgc2V0Q2FydExpc3Q6IGZ1bmN0aW9uIHNldENhcnRMaXN0KHJlcykgewogICAgICB0aGlzLiROUHJvZ3Jlc3MuZG9uZSgpOwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldFZpZXdMb2FkaW5nJywgZmFsc2UpOwogICAgICAvKioKICAgICAgICogZ2V0IGRhdGEgZnJvbSByZW1vdGUKICAgICAgICovCiAgICAgIC8vIHRoaXMuY2FydExpc3QgPSByZXMuZGF0YS5pdGVtcwoKICAgICAgLyoqCiAgICAgICAqIGdldCBkYXRhIGZyb20gbW9jawogICAgICAgKi8KCiAgICAgIHZhciBpdGVtcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY2FydExpc3QpKS5kYXRhLml0ZW1zOwogICAgICAvKioKICAgICAgICogRGVhbCBzZXJpdmNlCiAgICAgICAqIGRlZmF1bHQgc2VydmljZSwgc2VydmljZXMgd2hpY2ggbmVlZCB0byBzZWxlY3QKICAgICAgICovCiAgICAgIC8vIHRoZSBzZWxlY3RlZCBzZXJ2aWNlIG9mIHNlbGVjdGVkIGdvb2RzCiAgICAgIC8vIGxpa2U6IGFmdGVyIGhhdmUgc2VsZWN0ZWQgc29tZSBnb29kcywgaXQgd2lsbCBzZWxlY3Qgc29tZSBuZWNlc3Nhcnkgc2VydmljZSBieSBkZWZhdWx0CgogICAgICB2YXIgc2VydmljZVNlbGVjdCA9IFtdOwogICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgaWYgKGl0ZW0uc2VydmljZV9pbmZvKSB7CiAgICAgICAgICAvLyBwdXQgaXRlbXMgLT4gc2VydmljZV9pbmZvIC0+IHNlcnZpY2VfaW5mbyBpbiB0aGlzIHZhcmlhYmxlCiAgICAgICAgICAvLyBtZWFud2hpbGUga2VlcCB0aGUgc2VydmljZV9pbmZvIGlzIGNvbW1vbiBzZXJ2aWNlCiAgICAgICAgICAvLyBvciB0aGUgc2VydmljZV9pbmZvIGRvZXMgbm90IGJlbG9uZyB0byBzcGVjaWFsIGdvb2RzCiAgICAgICAgICAvLyBzbyB0aGF0IHBhZ2UgaXMgZ29pbmcgdG8gcmVuZGVyCiAgICAgICAgICBpdGVtLnNlcnZpY2VMaXN0ID0gW107CiAgICAgICAgICBpdGVtLnNlcnZpY2VfaW5mby5mb3JFYWNoKGZ1bmN0aW9uIChzZXJ2aWNlKSB7CiAgICAgICAgICAgIHNlcnZpY2Uuc2VydmljZV9pbmZvLmZvckVhY2goZnVuY3Rpb24gKGluZm8pIHsKICAgICAgICAgICAgICBpZiAoIWluZm8uc2VsX3N0YXR1cykgewogICAgICAgICAgICAgICAgaXRlbS5zZXJ2aWNlTGlzdC5wdXNoKGluZm8pOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5zZWxfc3RhdHVzKSB7CiAgICAgICAgICAgICAgICBzZXJ2aWNlU2VsZWN0LnB1c2goX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBpbmZvKSwge30sIHsKICAgICAgICAgICAgICAgICAgcGFyZW50X2dvb2RzSWQ6IGl0ZW0uZ29vZHNJZCAvLyBhZnRlciB0aGlzLCBpdCByZXByZXNlbnQgc2VydmljZSBvciBnaWZ0IHdoZW4gcGFyZW50X2dvb2RzSWQgPT09IGdvb2RzSWQKCiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7IC8vIHB1dCAnc2VydmljZVNlbGVjdCcgYmVoaW5kIHRoZSByZWxhdGVkIGdvb2RzCgogICAgICBzZXJ2aWNlU2VsZWN0LmZvckVhY2goZnVuY3Rpb24gKGluZm8pIHsKICAgICAgICB2YXIgaW5kZXggPSBpdGVtcy5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIC8vIGl0IHJlcHJlc2VudCBzZXJ2aWNlIG9yIGdpZnQgd2hlbiBwYXJlbnRfZ29vZHNJZCA9PT0gZ29vZHNJZAogICAgICAgICAgcmV0dXJuIGl0ZW0uZ29vZHNJZCA9PT0gaW5mby5wYXJlbnRfZ29vZHNJZDsKICAgICAgICB9KTsKICAgICAgICBpdGVtcy5zcGxpY2UoaW5kZXggKyAxLCAwLCB7CiAgICAgICAgICBnb29kc0lkOiBpbmZvLnNlcnZpY2VfZ29vZHNfaWQsCiAgICAgICAgICBpbWFnZV91cmw6IGluZm8uc2VydmljZV9pbWFnZV91cmwsCiAgICAgICAgICBudW06IGluZm8ubnVtLAogICAgICAgICAgYnV5X2xpbWl0OiBpdGVtc1tpbmRleF0ubnVtLAogICAgICAgICAgcHJpY2U6IGluZm8uc2VydmljZV9wcmljZSwKICAgICAgICAgIHByb2R1Y3RfbmFtZTogaW5mby5zZXJ2aWNlX3Nob3J0X25hbWUsCiAgICAgICAgICBzZWxfc3RhdHVzOiAxLAogICAgICAgICAgcGFyZW50X2dvb2RzSWQ6IGluZm8ucGFyZW50X2dvb2RzSWQsCiAgICAgICAgICAvLyByZXByZXNlbnQgdGhpcyBzZXJ2aWNlIGlzIGRlZmF1bHQgc2VydmljZSBiZWxvbmcgdG8gc29tZSBnb29kcwogICAgICAgICAgaXNTZXJ2aWNlOiB0cnVlCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICAvKioKICAgICAgICogRGVhbCBnaWZ0cwogICAgICAgKi8KICAgICAgLy8gdGhlIHNlZWxjdGVkIGdpZnRzIG9mIHNlbGVjdGVkIGdvb29kcwoKICAgICAgdmFyIGdpZnRTZWxlY3QgPSBbXTsKICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGlmIChpdGVtLnNlbF9zdGF0dXMgJiYgaXRlbS5naWZ0KSB7CiAgICAgICAgICBpdGVtLmdpZnQuZm9yRWFjaChmdW5jdGlvbiAoZ2lmdCkgewogICAgICAgICAgICBnaWZ0U2VsZWN0LnB1c2goX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBnaWZ0KSwge30sIHsKICAgICAgICAgICAgICBwYXJlbnRfZ29vZHNJZDogaXRlbS5nb29kc0lkCiAgICAgICAgICAgIH0pKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7IC8vIHB1dCAnZ2lmdFNlbGVjdCcgYmVoaW5kIHJlbGF0ZWQgZ29vZHMKCiAgICAgIGdpZnRTZWxlY3QuZm9yRWFjaChmdW5jdGlvbiAoZ2lmdCkgewogICAgICAgIHZhciBpbmRleCA9IGl0ZW1zLmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIGl0ZW0uZ29vZHNJZCA9PSBnaWZ0LnBhcmVudF9nb29kc0lkOwogICAgICAgIH0pOwogICAgICAgIGl0ZW1zLnNwbGljZShpbmRleCArIDEsIDAsIHsKICAgICAgICAgIGJ1eV9saW1pdDogaXRlbXNbaW5kZXhdLm51bSwKICAgICAgICAgIGdvb2RzSWQ6IGdpZnQuYWN0SWQsCiAgICAgICAgICBpbWFnZV91cmw6IGdpZnQuaW1hZ2VfdXJsLAogICAgICAgICAgbnVtOiBpdGVtc1tpbmRleF0ubnVtLAogICAgICAgICAgcHJvZHVjdF9uYW1lOiBnaWZ0LnByb2R1Y3RfbmFtZSwKICAgICAgICAgIHNlbF9zdGF0dXM6IDEsCiAgICAgICAgICBwYXJlbnRfZ29vZHNJZDogZ2lmdC5wYXJlbnRfZ29vZHNJZCwKICAgICAgICAgIGlzR2lmdDogdHJ1ZQogICAgICAgIH0pOwogICAgICB9KTsgLy8gdGhpcy5jYXJ0TGlzdCA9IFtdCgogICAgICB0aGlzLmNhcnRMaXN0ID0gaXRlbXM7CiAgICAgIGNvbnNvbGUubG9nKGl0ZW1zKTsKICAgIH0sCiAgICBjYXJ0U2VsZWN0OiBmdW5jdGlvbiBjYXJ0U2VsZWN0KGl0ZW0sIGluZGV4KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIHNlbF9zdGF0dXMgPSBpdGVtLnNlbF9zdGF0dXMgPyAwIDogMTsKICAgICAgc2VsZWN0R29vZHMoewogICAgICAgIGdvb2RzSWQ6IGl0ZW0uZ29vZHNJZCwKICAgICAgICBzZWxlY3Rfc3RhdHVzOiBzZWxfc3RhdHVzCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgIGl0ZW0uc2VsX3N0YXR1cyA9IHNlbF9zdGF0dXM7CgogICAgICAgICAgaWYgKCFpdGVtLnNlbF9zdGF0dXMpIHsKICAgICAgICAgICAgLy8gQ2FuY2VsIHNlbGVjdGVkIGdvb2RzCiAgICAgICAgICAgIC8vIElmIGhhdmluZyBzZXJ2aWNlcyBhbmQgZ2lmdCwgZGVsZXRlIGl0CiAgICAgICAgICAgIHZhciBzdWJJbmRleCA9IF90aGlzMi5jYXJ0TGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKGxpc3QpIHsKICAgICAgICAgICAgICByZXR1cm4gbGlzdC5wYXJlbnRfZ29vZHNJZCA9PT0gaXRlbS5nb29kc0lkOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHdoaWxlIChzdWJJbmRleCA+IC0xKSB7CiAgICAgICAgICAgICAgX3RoaXMyLmNhcnRMaXN0LnNwbGljZShzdWJJbmRleCwgMSk7CgogICAgICAgICAgICAgIHN1YkluZGV4ID0gX3RoaXMyLmNhcnRMaXN0LmZpbmRJbmRleChmdW5jdGlvbiAobGlzdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGxpc3QucGFyZW50X2dvb2RzSWQgPT09IGl0ZW0uZ29vZHNJZDsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSAvLyBzZXQgYWxsIHNlbGVjdGVkIHN0YXR1cyBhcyAwCiAgICAgICAgICAgIC8vIG1lYW53aGlsZSBwdXQgaXQgaW50byBvcHRpb25hbCBzZXJ2aWNlIGxpc3QKCgogICAgICAgICAgICBpdGVtLnNlcnZpY2VfaW5mby5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0KSB7CiAgICAgICAgICAgICAgbGlzdC5zZXJ2aWNlX2luZm8uZm9yRWFjaChmdW5jdGlvbiAoaW5mbykgewogICAgICAgICAgICAgICAgaWYgKGluZm8uc2VsX3N0YXR1cykgewogICAgICAgICAgICAgICAgICBpbmZvLnNlbF9zdGF0dXMgPSAwOwogICAgICAgICAgICAgICAgICBpdGVtLnNlcnZpY2VMaXN0LnB1c2goaW5mbyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gU2VsZWN0ZWQgc3RhdHVzCiAgICAgICAgICAgIGlmIChpdGVtLmdpZnQgJiYgaXRlbS5naWZ0Lmxlbmd0aCkgewogICAgICAgICAgICAgIC8vIHRyYW5zZm9ybSBnaWZ0IHRvIGdvb2RzIGlmIGhhdmluZyBnaWZ0CiAgICAgICAgICAgICAgaXRlbS5naWZ0LmZvckVhY2goZnVuY3Rpb24gKGdpZnQpIHsKICAgICAgICAgICAgICAgIF90aGlzMi5jYXJ0TGlzdC5zcGxpY2UoaW5kZXggKyAxLCAwLCB7CiAgICAgICAgICAgICAgICAgIGJ1eV9saW1pdDogaXRlbS5udW0sCiAgICAgICAgICAgICAgICAgIGdvb2RzSWQ6IGdpZnQuYWN0SWQsCiAgICAgICAgICAgICAgICAgIGltYWdlX3VybDogZ2lmdC5pbWFnZV91cmwsCiAgICAgICAgICAgICAgICAgIG51bTogaXRlbS5udW0sCiAgICAgICAgICAgICAgICAgIHByb2R1Y3RfbmFtZTogZ2lmdC5wcm9kdWN0X25hbWUsCiAgICAgICAgICAgICAgICAgIHNlbF9zdGF0dXM6IDEsCiAgICAgICAgICAgICAgICAgIHBhcmVudF9nb29kc0lkOiBpdGVtLmdvb2RzSWQsCiAgICAgICAgICAgICAgICAgIGlzR2lmdDogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGNhcnRFZGl0OiBmdW5jdGlvbiBjYXJ0RWRpdChpdGVtLCBudW0pIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBpZiAobnVtIDwgMCAmJiBpdGVtLm51bSA9PT0gMSkgcmV0dXJuOwogICAgICBpZiAobnVtID4gMCAmJiBpdGVtLm51bSA9PSBpdGVtLmJ1eV9saW1pdCkgcmV0dXJuOwogICAgICB2YXIgY29uc3VtcHRpb24gPSBudW0gPiAwID8gMiA6IDE7CiAgICAgIGVkaXRDYXJ0KHsKICAgICAgICBnb29kc0lkOiBpdGVtLmdvb2RzSWQsCiAgICAgICAgY29uc3VtcHRpb246IGNvbnN1bXB0aW9uCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMgJiYgcmVzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICBpdGVtLm51bSArPSBudW07IC8vIGRlYWwgcmVsYXRlZCBxdWFudGl0eSBvZiBnaWZ0IGFuZCBzZXJ2aWNlCgogICAgICAgICAgX3RoaXMzLmNhcnRMaXN0LmZvckVhY2goZnVuY3Rpb24gKGxpc3QpIHsKICAgICAgICAgICAgaWYgKGxpc3QucGFyZW50X2dvb2RzSWQgPT09IGl0ZW0uZ29vZHNJZCkgewogICAgICAgICAgICAgIC8vIGRlYWwgc2VydmljZSBxdWFudGl0eQogICAgICAgICAgICAgIGxpc3QuYnV5X2xpbWl0ID0gaXRlbS5udW07CgogICAgICAgICAgICAgIGlmIChsaXN0LmlzR2lmdCkgewogICAgICAgICAgICAgICAgLy8gZGVhbCBnaWZ0IHF1YW50aXR5CiAgICAgICAgICAgICAgICBsaXN0Lm51bSA9IGl0ZW0ubnVtOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICB0b0NhcnRTZWxTZXJ2aWNlOiBmdW5jdGlvbiB0b0NhcnRTZWxTZXJ2aWNlKGl0ZW0pIHsKICAgICAgdGhpcy5zaG93U2VydmljZUluZm8gPSB0cnVlOwogICAgICB2YXIgYXJyID0gW107CiAgICAgIGl0ZW0uc2VydmljZV9pbmZvLmZvckVhY2goZnVuY3Rpb24gKGxpc3QsIGluZGV4KSB7CiAgICAgICAgdmFyIGN1ckxpc3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGxpc3QpKTsKICAgICAgICBjdXJMaXN0LnNlcnZpY2VfaW5mbyA9IFtdOwogICAgICAgIGxpc3Quc2VydmljZV9pbmZvLmZvckVhY2goZnVuY3Rpb24gKHNlcnZpY2UpIHsKICAgICAgICAgIGlmICghc2VydmljZS5zZWxfc3RhdHVzKSB7CiAgICAgICAgICAgIGN1ckxpc3Quc2VydmljZV9pbmZvLnB1c2goc2VydmljZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgYXJyLnB1c2goY3VyTGlzdCk7CiAgICAgIH0pOwogICAgICB0aGlzLnNlcnZpY2VJbmZvTGlzdCA9IGFycjsKICAgICAgdGhpcy5zZXJ2aWNlU2VsZWN0Q2FzaEl0ZW0gPSBpdGVtOwogICAgfSwKICAgIHNlbGVjdFNlcnZpY2U6IGZ1bmN0aW9uIHNlbGVjdFNlcnZpY2UobGlzdCwgc2VydmljZSkgewogICAgICBpZiAoc2VydmljZS5zZWxfc3RhdHVzKSB7CiAgICAgICAgc2VydmljZS5zZWxfc3RhdHVzID0gMDsKICAgICAgfSBlbHNlIHsKICAgICAgICBsaXN0LnNlcnZpY2VfaW5mby5mb3JFYWNoKGZ1bmN0aW9uIChpbmZvKSB7CiAgICAgICAgICBpbmZvLnNlbF9zdGF0dXMgPSAwOwogICAgICAgIH0pOwogICAgICAgIHNlcnZpY2Uuc2VsX3N0YXR1cyA9IDE7CiAgICAgIH0KCiAgICAgIHZhciBhcnIgPSBbXTsKICAgICAgdGhpcy5zZXJ2aWNlSW5mb0xpc3QuZm9yRWFjaChmdW5jdGlvbiAobGlzdCkgewogICAgICAgIGxpc3Quc2VydmljZV9pbmZvLmZvckVhY2goZnVuY3Rpb24gKHNlcnZpY2UpIHsKICAgICAgICAgIGlmIChzZXJ2aWNlLnNlbF9zdGF0dXMpIHsKICAgICAgICAgICAgYXJyLnB1c2goc2VydmljZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICB0aGlzLnNlcnZpY2VTZWxlY3RNZXNzYWdlID0gYXJyLmxlbmd0aCA/ICJcdTVERjJcdTkwMDlcdTYyRTkiLmNvbmNhdChhcnIubGVuZ3RoLCAiXHU5ODc5XHU2NzBEXHU1MkExIikgOiAn6K+36YCJ5oup5pyN5Yqh57G75Z6LJzsKICAgICAgdGhpcy5zZXJ2aWNlU2VsZWN0Q2FzaEFyciA9IGFycjsKICAgIH0sCiAgICBzZXJ2aWNlU2VsZWN0U3VibWl0OiBmdW5jdGlvbiBzZXJ2aWNlU2VsZWN0U3VibWl0KCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHZhciBjYXNoSXRlbSA9IHRoaXMuc2VydmljZVNlbGVjdENhc2hJdGVtOwogICAgICBzZWxlY3RTZXJ2aWNlcyh7CiAgICAgICAgcGFyZW50X2dvb2RzSWQ6IGNhc2hJdGVtLnBhcmVudF9nb29kc0lkLAogICAgICAgIHNlcnZpY2VfZ29vZHNfaWQ6IGNhc2hJdGVtLmdvb2RzSWQsCiAgICAgICAgc2VsX3N0YXR1czogMQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICB2YXIgYXJyID0gX3RoaXM0LnNlcnZpY2VTZWxlY3RDYXNoQXJyOwoKICAgICAgICAgIGlmIChhcnIubGVuZ3RoKSB7CiAgICAgICAgICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0KSB7CiAgICAgICAgICAgICAgLy8gZGVsZXRlIHRoZSBzZWxlY3RlZCBzZXJ2aWNlIGZyb20gb3B0aW9uYWwgc2VydmljZSBsaXN0CiAgICAgICAgICAgICAgdmFyIHNlcnZpY2VMaXN0SW5kZXggPSBjYXNoSXRlbS5zZXJ2aWNlTGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKHNlcnZpY2UpIHsKICAgICAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlLnNlcnZpY2VfZ29vZHNfaWQgPT09IGxpc3Quc2VydmljZV9nb29kc19pZDsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBjYXNoSXRlbS5zZXJ2aWNlTGlzdC5zcGxpY2Uoc2VydmljZUxpc3RJbmRleCwgMSk7IC8vIGZvciBvcmlnaW5hbCBzZXJ2aWNlIGxpc3QsIGNoYW5nZSB0aGUgc2VsZWN0IHN0YXR1cwoKICAgICAgICAgICAgICBjYXNoSXRlbS5zZXJ2aWNlX2luZm8uZm9yRWFjaChmdW5jdGlvbiAoaW5mbykgewogICAgICAgICAgICAgICAgaW5mby5zZXJ2aWNlX2luZm8uZm9yRWFjaChmdW5jdGlvbiAoc2VydmljZSkgewogICAgICAgICAgICAgICAgICBpZiAoc2VydmljZS5zZXJ2aWNlX2dvb2RzX2lkID09PSBsaXN0LnNlcnZpY2VfZ29vZHNfaWQpIHsKICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlLnNlbF9zdGF0dXMgPSAxOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsgLy8gdHJhbnNmb3JtIHNlbGVjdGVkIHNlcnZpY2UgdG8gZ29vZHMKCiAgICAgICAgICAgICAgdmFyIGluZGV4ID0gX3RoaXM0LmNhcnRMaXN0LmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZ29vZHNJZCA9PT0gY2FzaEl0ZW0uZ29vZHNJZDsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgX3RoaXM0LmNhcnRMaXN0LnNwbGljZShpbmRleCArIDEsIDAsIHsKICAgICAgICAgICAgICAgIGJ1eV9saW1pdDogY2FzaEl0ZW0ubnVtLAogICAgICAgICAgICAgICAgZ29vZHNJZDogbGlzdC5zZXJ2aWNlX2dvb2RzX2lkLAogICAgICAgICAgICAgICAgaW1hZ2VfdXJsOiBsaXN0LnNlcnZpY2VfaW1hZ2VfdXJsLAogICAgICAgICAgICAgICAgbnVtOiBsaXN0Lm51bSwKICAgICAgICAgICAgICAgIHByaWNlOiBsaXN0LnNlcnZpY2VfcHJpY2UsCiAgICAgICAgICAgICAgICBwcm9kdWN0X25hbWU6IGxpc3Quc2VydmljZV9zaG9ydF9uYW1lLAogICAgICAgICAgICAgICAgc2VsX3N0YXR1czogMSwKICAgICAgICAgICAgICAgIHBhcmVudF9nb29kc0lkOiBjYXNoSXRlbS5nb29kc0lkLAogICAgICAgICAgICAgICAgaXNTZXJ2aWNlOiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIF90aGlzNC5zaG93U2VydmljZUluZm8gPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGNhcnREZWxldGU6IGZ1bmN0aW9uIGNhcnREZWxldGUoaXRlbSwgaW5kZXgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICBkZWxldGVHb29kcyh7CiAgICAgICAgZ29vZHNJZDogaXRlbS5nb29kc0lkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIC8vIHB1dCBzZXJ2aWNlIGludG8gcmVsYXRlZCBnb29kcyBsaXN0CiAgICAgICAgX3RoaXM1LmNhcnRMaXN0LnNwbGljZShpbmRleCwgMSk7CgogICAgICAgIGlmIChpdGVtLnBhcmVudF9nb29kc0lkKSB7CiAgICAgICAgICB2YXIgY3VyR29vZCA9IF90aGlzNS5jYXJ0TGlzdC5maW5kKGZ1bmN0aW9uIChsaXN0KSB7CiAgICAgICAgICAgIHJldHVybiBsaXN0Lmdvb2RzSWQgPT09IGl0ZW0ucGFyZW50X2dvb2RzSWQ7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBjdXJHb29kLnNlcnZpY2VfaW5mby5mb3JFYWNoKGZ1bmN0aW9uIChpbmZvKSB7CiAgICAgICAgICAgIGluZm8uc2VydmljZV9pbmZvLmZvckVhY2goZnVuY3Rpb24gKHNlcnZpY2UpIHsKICAgICAgICAgICAgICBpZiAoc2VydmljZS5zZXJ2aWNlX2dvb2RzX2lkID09PSBpdGVtLmdvb2RzSWQpIHsKICAgICAgICAgICAgICAgIHNlcnZpY2Uuc2VsX3N0YXR1cyA9IDA7CiAgICAgICAgICAgICAgICBjdXJHb29kLnNlcnZpY2VMaXN0LnB1c2goc2VydmljZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBkZWxldGUgYWxsIHNlcnZpY2UgYW5kIGdpZnQgYmVsb25nIHRvIHRoaXMgZ29vZHMKICAgICAgICAgIHZhciBzdWJJbmRleCA9IF90aGlzNS5jYXJ0TGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKGxpc3QpIHsKICAgICAgICAgICAgcmV0dXJuIGxpc3QucGFyZW50X2dvb2RzSWQgPT09IGl0ZW0uZ29vZHNJZDsKICAgICAgICAgIH0pOwoKICAgICAgICAgIHdoaWxlIChzdWJJbmRleCA+IC0xKSB7CiAgICAgICAgICAgIF90aGlzNS5jYXJ0TGlzdC5zcGxpY2Uoc3ViSW5kZXgsIDEpOwoKICAgICAgICAgICAgc3ViSW5kZXggPSBfdGhpczUuY2FydExpc3QuZmluZEluZGV4KGZ1bmN0aW9uIChsaXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIGxpc3QucGFyZW50X2dvb2RzSWQgPT09IGl0ZW0uZ29vZHNJZDsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9KQp9Ow=="},{"version":3,"sources":["/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/views/MiCart/MiCart.js"],"names":["cartList","MiPop","MiRecommend","getCartList","selectGoods","selectServices","editCart","deleteGoods","mapGetters","mapMutations","components","data","serviceInfoList","showServiceInfo","serviceSelectMessage","serviceSelectCashArr","serviceSelectCashItem","totalNumber","totalPrice","watch","deep","handler","val","all","num","price","forEach","list","sel_status","setCartCount","computed","beforeRouteEnter","to","from","next","name","then","res","vm","setCartList","fetchCartList","methods","$NProgress","done","$store","commit","items","JSON","parse","stringify","serviceSelect","item","service_info","serviceList","service","info","push","parent_goodsId","goodsId","index","findIndex","splice","service_goods_id","image_url","service_image_url","buy_limit","service_price","product_name","service_short_name","isService","giftSelect","gift","actId","isGift","console","log","cartSelect","select_status","status","subIndex","length","cartEdit","consumption","toCartSelService","arr","curList","selectService","serviceSelectSubmit","cashItem","serviceListIndex","cartDelete","curGood","find"],"mappings":"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","sourcesContent":["import { cartList } from '@/mock/cart.js'\n// import MiSearch from '@/components/MiTitle.vue'\nimport MiPop from '@/components/MiPop.vue'\nimport MiRecommend from '@/components/MiRecommend.vue'\nimport {\n  getCartList,\n  selectGoods,\n  selectServices,\n  editCart,\n  // addGoods,\n  deleteGoods\n} from '@/api/cart'\nimport { mapGetters, mapMutations } from 'vuex'\n\nexport default {\n  components: {\n    // MiSearch,\n    MiPop,\n    MiRecommend\n  },\n  data() {\n    return {\n      cartList: null,\n      serviceInfoList: null, // Currently. service list dose not be selected\n      showServiceInfo: false,\n      serviceSelectMessage: '请选择服务类型',\n      serviceSelectCashArr: [],\n      serviceSelectCashItem: null, // Current, selected service object in popup\n      totalNumber: 0,\n      totalPrice: 0\n    }\n  },\n  watch: {\n    cartList: {\n      deep: true,\n      handler(val) {\n        let all = 0\n        let num = 0\n        let price = 0\n        val.forEach(list => {\n          if(list.sel_status) {\n            num += list.num\n            if(list.price) {\n              price += list.num * list.price\n            }\n          }\n          all += list.num\n        })\n\n        this.totalNumber = num\n        this.totalPrice = price\n        this.setCartCount(all)\n      }\n    }\n  },\n  computed: {\n    ...mapGetters(['isLogin'])\n  },\n  beforeRouteEnter(to, from, next) {\n    if(from.name) {\n      getCartList().then(res => {\n        next(vm => vm.setCartList(res))\n      })\n    } else {\n      next(vm => vm.fetchCartList())\n    }\n  },\n  methods: {\n    ...mapMutations({\n      setCartCount: 'cart/setCount'\n    }),\n    fetchCartList() {\n      getCartList().then(res => {\n        this.setCartList(res)\n      })\n    },\n    setCartList(res) {\n      this.$NProgress.done()\n      this.$store.commit('setViewLoading', false)\n      /**\n       * get data from remote\n       */\n      // this.cartList = res.data.items\n\n      /**\n       * get data from mock\n       */\n      let items = JSON.parse(JSON.stringify(cartList)).data.items\n\n      /**\n       * Deal serivce\n       * default service, services which need to select\n       */\n      // the selected service of selected goods\n      // like: after have selected some goods, it will select some necessary service by default\n      let serviceSelect = []\n      items.forEach(item => {\n        if(item.service_info) {\n          // put items -> service_info -> service_info in this variable\n          // meanwhile keep the service_info is common service\n          // or the service_info does not belong to special goods\n          // so that page is going to render\n          item.serviceList = []\n          item.service_info.forEach(service => {\n            service.service_info.forEach(info => {\n              if(!info.sel_status) {\n                item.serviceList.push(info)\n              } else if(item.sel_status) {\n                serviceSelect.push({\n                  ...info,\n                  parent_goodsId: item.goodsId\n                  // after this, it represent service or gift when parent_goodsId === goodsId\n                })\n              }\n            })\n          })\n        }\n      })\n\n      // put 'serviceSelect' behind the related goods\n      serviceSelect.forEach(info => {\n        let index = items.findIndex(item => {\n          // it represent service or gift when parent_goodsId === goodsId\n          return item.goodsId === info.parent_goodsId\n        })\n        items.splice(index + 1, 0, {\n          goodsId: info.service_goods_id,\n          image_url: info.service_image_url,\n          num: info.num,\n          buy_limit: items[index].num,\n          price: info.service_price,\n          product_name: info.service_short_name,\n          sel_status: 1,\n          parent_goodsId: info.parent_goodsId, // represent this service is default service belong to some goods\n          isService: true\n        })\n      })\n\n      /**\n       * Deal gifts\n       */\n      // the seelcted gifts of selected gooods\n      let giftSelect = []\n      items.forEach(item => {\n        if(item.sel_status && item.gift) {\n          item.gift.forEach(gift => {\n            giftSelect.push({\n              ...gift,\n              parent_goodsId: item.goodsId\n            })\n          })\n        }\n      })\n      // put 'giftSelect' behind related goods\n      giftSelect.forEach(gift => {\n        let index = items.findIndex(item => {\n          return item.goodsId == gift.parent_goodsId\n        })\n        items.splice(index + 1, 0, {\n          buy_limit: items[index].num,\n          goodsId: gift.actId,\n          image_url: gift.image_url,\n          num: items[index].num,\n          product_name: gift.product_name,\n          sel_status: 1,\n          parent_goodsId: gift.parent_goodsId,\n          isGift: true\n        })\n      })\n      // this.cartList = []\n      this.cartList = items\n      console.log(items)\n    },\n    cartSelect(item, index) {\n      let sel_status = item.sel_status ? 0 : 1\n      selectGoods({\n        goodsId: item.goodsId,\n        select_status: sel_status\n      }).then(res => {\n        if(res.status === 200) {\n          item.sel_status = sel_status\n          if(!item.sel_status) {\n            // Cancel selected goods\n            // If having services and gift, delete it\n            let subIndex = this.cartList.findIndex(list => {\n              return list.parent_goodsId === item.goodsId\n            })\n            while(subIndex > -1) {\n              this.cartList.splice(subIndex, 1)\n              subIndex = this.cartList.findIndex(list => {\n                return list.parent_goodsId === item.goodsId\n              })\n            }\n            // set all selected status as 0\n            // meanwhile put it into optional service list\n            item.service_info.forEach(list => {\n              list.service_info.forEach(info => {\n                if(info.sel_status) {\n                  info.sel_status = 0\n                  item.serviceList.push(info)\n                }\n              })\n            })\n          } else {\n            // Selected status\n            if(item.gift && item.gift.length) {\n              // transform gift to goods if having gift\n              item.gift.forEach(gift => {\n                this.cartList.splice(index + 1, 0, {\n                  buy_limit: item.num,\n                  goodsId: gift.actId,\n                  image_url: gift.image_url,\n                  num: item.num,\n                  product_name: gift.product_name,\n                  sel_status: 1,\n                  parent_goodsId: item.goodsId,\n                  isGift: true\n                })\n              })\n            }\n          }\n        }\n      })\n    },\n    cartEdit(item, num) {\n      if(num < 0 && item.num === 1) return\n      if(num > 0 && item.num == item.buy_limit) return\n\n      let consumption = num > 0 ? 2 : 1\n      editCart({\n        goodsId: item.goodsId,\n        consumption\n      }).then(res => {\n        if(res && res.status === 200) {\n          item.num += num\n          // deal related quantity of gift and service\n          this.cartList.forEach(list => {\n            if(list.parent_goodsId === item.goodsId) {\n              // deal service quantity\n              list.buy_limit = item.num\n              if(list.isGift) {\n                // deal gift quantity\n                list.num = item.num\n              }\n            }\n          })\n        }\n      })\n    },\n    toCartSelService(item) {\n      this.showServiceInfo = true\n      let arr = []\n      item.service_info.forEach((list, index) => {\n        let curList = JSON.parse(JSON.stringify(list))\n        curList.service_info = []\n        list.service_info.forEach(service => {\n          if(!service.sel_status) {\n            curList.service_info.push(service)\n          }\n        })\n        arr.push(curList)\n      })\n      this.serviceInfoList = arr\n      this.serviceSelectCashItem = item\n    },\n    selectService(list, service) {\n      if(service.sel_status) {\n        service.sel_status = 0\n      } else {\n        list.service_info.forEach(info => {\n          info.sel_status = 0\n        })\n        service.sel_status = 1\n      }\n      let arr = []\n      this.serviceInfoList.forEach(list => {\n        list.service_info.forEach(service => {\n          if(service.sel_status) {\n            arr.push(service)\n          }\n        })\n      })\n      this.serviceSelectMessage = arr.length ? `已选择${arr.length}项服务` : '请选择服务类型'\n      this.serviceSelectCashArr = arr\n    },\n    serviceSelectSubmit() {\n      let cashItem = this.serviceSelectCashItem\n      selectServices({\n        parent_goodsId: cashItem.parent_goodsId,\n        service_goods_id: cashItem.goodsId,\n        sel_status: 1\n      }).then(res => {\n        if(res.status === 200) {\n          let arr = this.serviceSelectCashArr\n          if(arr.length) {\n            arr.forEach(list => {\n              // delete the selected service from optional service list\n              let serviceListIndex = cashItem.serviceList.findIndex(service => {\n                return service.service_goods_id === list.service_goods_id\n              })\n              cashItem.serviceList.splice(serviceListIndex, 1)\n\n              // for original service list, change the select status\n              cashItem.service_info.forEach(info => {\n                info.service_info.forEach(service => {\n                  if(service.service_goods_id === list.service_goods_id) {\n                    service.sel_status = 1\n                  }\n                })\n              })\n\n              // transform selected service to goods\n              let index = this.cartList.findIndex(item => {\n                return item.goodsId === cashItem.goodsId\n              })\n              this.cartList.splice(index + 1, 0, {\n                buy_limit: cashItem.num,\n                goodsId: list.service_goods_id,\n                image_url: list.service_image_url,\n                num: list.num,\n                price: list.service_price,\n                product_name: list.service_short_name,\n                sel_status: 1,\n                parent_goodsId: cashItem.goodsId,\n                isService: true\n              })\n            })\n          }\n          this.showServiceInfo = false\n        }\n      })\n    },\n    cartDelete(item, index) {\n      deleteGoods({\n        goodsId: item.goodsId\n      }).then(res => {\n        // put service into related goods list\n        this.cartList.splice(index, 1)\n        if(item.parent_goodsId) {\n          let curGood = this.cartList.find(list => {\n            return list.goodsId === item.parent_goodsId\n          })\n          curGood.service_info.forEach(info => {\n            info.service_info.forEach(service => {\n              if(service.service_goods_id === item.goodsId) {\n                service.sel_status = 0\n                curGood.serviceList.push(service)\n              }\n            })\n          })\n        } else {\n          // delete all service and gift belong to this goods\n          let subIndex = this.cartList.findIndex(list => {\n            return list.parent_goodsId === item.goodsId\n          })\n          while(subIndex > -1) {\n            this.cartList.splice(subIndex, 1)\n            subIndex = this.cartList.findIndex(list => {\n              return list.parent_goodsId === item.goodsId\n            })\n          }\n        }\n      })\n    }\n  }\n}\n"]}]}