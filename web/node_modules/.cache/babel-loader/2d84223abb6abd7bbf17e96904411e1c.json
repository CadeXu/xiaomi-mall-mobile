{"remainingRequest":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/babel-loader/lib/index.js!/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/eslint-loader/index.js??ref--13-0!/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/views/MiCart/MiCart.js?vue&type=script&lang=js","dependencies":[{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/views/MiCart/MiCart.js","mtime":1637193447305},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1ZvbHVtZXMvSEQveGlhb01pL0ZFL3hpYW9taS1tYWxsLW1vYmlsZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgeyBjYXJ0TGlzdCB9IGZyb20gJ0AvbW9jay9jYXJ0LmpzJzsgLy8gaW1wb3J0IE1pU2VhcmNoIGZyb20gJ0AvY29tcG9uZW50cy9NaVRpdGxlLnZ1ZScKCmltcG9ydCBNaVBvcCBmcm9tICdAL2NvbXBvbmVudHMvTWlQb3AudnVlJzsKaW1wb3J0IE1pUmVjb21tZW5kIGZyb20gJ0AvY29tcG9uZW50cy9NaVJlY29tbWVuZC52dWUnOwppbXBvcnQgeyBnZXRDYXJ0TGlzdCwgc2VsZWN0R29vZHMsIHNlbGVjdFNlcnZpY2VzLCBlZGl0Q2FydCwgLy8gYWRkR29vZHMsCmRlbGV0ZUdvb2RzIH0gZnJvbSAnQC9hcGkvY2FydCc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICAvLyBNaVNlYXJjaCwKICAgIE1pUG9wOiBNaVBvcCwKICAgIE1pUmVjb21tZW5kOiBNaVJlY29tbWVuZAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNhcnRMaXN0OiBudWxsLAogICAgICBzZXJ2aWNlSW5mb0xpc3Q6IG51bGwsCiAgICAgIC8vIEN1cnJlbnRseS4gc2VydmljZSBsaXN0IGRvc2Ugbm90IGJlIHNlbGVjdGVkCiAgICAgIHNob3dTZXJ2aWNlSW5mbzogZmFsc2UsCiAgICAgIHNlcnZpY2VTZWxlY3RNZXNzYWdlOiAn6K+36YCJ5oup5pyN5Yqh57G75Z6LJywKICAgICAgc2VydmljZVNlbGVjdENhc2hBcnI6IFtdLAogICAgICBzZXJ2aWNlU2VsZWN0Q2FzaEl0ZW06IG51bGwsCiAgICAgIC8vIEN1cnJlbnQsIHNlbGVjdGVkIHNlcnZpY2Ugb2JqZWN0IGluIHBvcHVwCiAgICAgIHRvdGFsTnVtYmVyOiAwLAogICAgICB0b3RhbFByaWNlOiAwCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIGNhcnRMaXN0OiB7CiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIodmFsKSB7CiAgICAgICAgdmFyIG51bSA9IDA7CiAgICAgICAgdmFyIHByaWNlID0gMDsKICAgICAgICB2YWwuZm9yRWFjaChmdW5jdGlvbiAobGlzdCkgewogICAgICAgICAgaWYgKGxpc3Quc2VsX3N0YXR1cykgewogICAgICAgICAgICBudW0gKz0gbGlzdC5udW07CgogICAgICAgICAgICBpZiAobGlzdC5wcmljZSkgewogICAgICAgICAgICAgIHByaWNlICs9IGxpc3QubnVtICogbGlzdC5wcmljZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMudG90YWxOdW1iZXIgPSBudW07CiAgICAgICAgdGhpcy50b3RhbFByaWNlID0gcHJpY2U7CiAgICAgIH0KICAgIH0KICB9LAogIGJlZm9yZVJvdXRlRW50ZXI6IGZ1bmN0aW9uIGJlZm9yZVJvdXRlRW50ZXIodG8sIGZyb20sIG5leHQpIHsKICAgIGlmIChmcm9tLm5hbWUpIHsKICAgICAgZ2V0Q2FydExpc3QoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBuZXh0KGZ1bmN0aW9uICh2bSkgewogICAgICAgICAgcmV0dXJuIHZtLnNldENhcnRMaXN0KHJlcyk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgbmV4dChmdW5jdGlvbiAodm0pIHsKICAgICAgICByZXR1cm4gdm0uZmV0Y2hDYXJ0TGlzdCgpOwogICAgICB9KTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGZldGNoQ2FydExpc3Q6IGZ1bmN0aW9uIGZldGNoQ2FydExpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBnZXRDYXJ0TGlzdCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLnNldENhcnRMaXN0KHJlcyk7CiAgICAgIH0pOwogICAgfSwKICAgIHNldENhcnRMaXN0OiBmdW5jdGlvbiBzZXRDYXJ0TGlzdChyZXMpIHsKICAgICAgdGhpcy4kTlByb2dyZXNzLmRvbmUoKTsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRWaWV3TG9hZGluZycsIGZhbHNlKTsKICAgICAgLyoqCiAgICAgICAqIGdldCBkYXRhIGZyb20gcmVtb3RlCiAgICAgICAqLwogICAgICAvLyB0aGlzLmNhcnRMaXN0ID0gcmVzLmRhdGEuaXRlbXMKCiAgICAgIC8qKgogICAgICAgKiBnZXQgZGF0YSBmcm9tIG1vY2sKICAgICAgICovCgogICAgICB2YXIgaXRlbXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNhcnRMaXN0KSkuZGF0YS5pdGVtczsKICAgICAgLyoqCiAgICAgICAqIERlYWwgc2VyaXZjZQogICAgICAgKiBkZWZhdWx0IHNlcnZpY2UsIHNlcnZpY2VzIHdoaWNoIG5lZWQgdG8gc2VsZWN0CiAgICAgICAqLwogICAgICAvLyB0aGUgc2VsZWN0ZWQgc2VydmljZSBvZiBzZWxlY3RlZCBnb29kcwogICAgICAvLyBsaWtlOiBhZnRlciBoYXZlIHNlbGVjdGVkIHNvbWUgZ29vZHMsIGl0IHdpbGwgc2VsZWN0IHNvbWUgbmVjZXNzYXJ5IHNlcnZpY2UgYnkgZGVmYXVsdAoKICAgICAgdmFyIHNlcnZpY2VTZWxlY3QgPSBbXTsKICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGlmIChpdGVtLnNlcnZpY2VfaW5mbykgewogICAgICAgICAgLy8gcHV0IGl0ZW1zIC0+IHNlcnZpY2VfaW5mbyAtPiBzZXJ2aWNlX2luZm8gaW4gdGhpcyB2YXJpYWJsZQogICAgICAgICAgLy8gbWVhbndoaWxlIGtlZXAgdGhlIHNlcnZpY2VfaW5mbyBpcyBjb21tb24gc2VydmljZQogICAgICAgICAgLy8gb3IgdGhlIHNlcnZpY2VfaW5mbyBkb2VzIG5vdCBiZWxvbmcgdG8gc3BlY2lhbCBnb29kcwogICAgICAgICAgLy8gc28gdGhhdCBwYWdlIGlzIGdvaW5nIHRvIHJlbmRlcgogICAgICAgICAgaXRlbS5zZXJ2aWNlTGlzdCA9IFtdOwogICAgICAgICAgaXRlbS5zZXJ2aWNlX2luZm8uZm9yRWFjaChmdW5jdGlvbiAoc2VydmljZSkgewogICAgICAgICAgICBzZXJ2aWNlLnNlcnZpY2VfaW5mby5mb3JFYWNoKGZ1bmN0aW9uIChpbmZvKSB7CiAgICAgICAgICAgICAgaWYgKCFpbmZvLnNlbF9zdGF0dXMpIHsKICAgICAgICAgICAgICAgIGl0ZW0uc2VydmljZUxpc3QucHVzaChpbmZvKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uc2VsX3N0YXR1cykgewogICAgICAgICAgICAgICAgc2VydmljZVNlbGVjdC5wdXNoKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaW5mbyksIHt9LCB7CiAgICAgICAgICAgICAgICAgIHBhcmVudF9nb29kc0lkOiBpdGVtLmdvb2RzSWQgLy8gYWZ0ZXIgdGhpcywgaXQgcmVwcmVzZW50IHNlcnZpY2Ugb3IgZ2lmdCB3aGVuIHBhcmVudF9nb29kc0lkID09PSBnb29kc0lkCgogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOyAvLyBwdXQgJ3NlcnZpY2VTZWxlY3QnIGJlaGluZCB0aGUgcmVsYXRlZCBnb29kcwoKICAgICAgc2VydmljZVNlbGVjdC5mb3JFYWNoKGZ1bmN0aW9uIChpbmZvKSB7CiAgICAgICAgdmFyIGluZGV4ID0gaXRlbXMuZmluZEluZGV4KGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAvLyBpdCByZXByZXNlbnQgc2VydmljZSBvciBnaWZ0IHdoZW4gcGFyZW50X2dvb2RzSWQgPT09IGdvb2RzSWQKICAgICAgICAgIHJldHVybiBpdGVtLmdvb2RzSWQgPT09IGluZm8ucGFyZW50X2dvb2RzSWQ7CiAgICAgICAgfSk7CiAgICAgICAgaXRlbXMuc3BsaWNlKGluZGV4ICsgMSwgMCwgewogICAgICAgICAgZ29vZHNJZDogaW5mby5zZXJ2aWNlX2dvb2RzX2lkLAogICAgICAgICAgaW1hZ2VfdXJsOiBpbmZvLnNlcnZpY2VfaW1hZ2VfdXJsLAogICAgICAgICAgbnVtOiBpbmZvLm51bSwKICAgICAgICAgIGJ1eV9saW1pdDogaXRlbXNbaW5kZXhdLm51bSwKICAgICAgICAgIHByaWNlOiBpbmZvLnNlcnZpY2VfcHJpY2UsCiAgICAgICAgICBwcm9kdWN0X25hbWU6IGluZm8uc2VydmljZV9zaG9ydF9uYW1lLAogICAgICAgICAgc2VsX3N0YXR1czogMSwKICAgICAgICAgIHBhcmVudF9nb29kc0lkOiBpbmZvLnBhcmVudF9nb29kc0lkLAogICAgICAgICAgLy8gcmVwcmVzZW50IHRoaXMgc2VydmljZSBpcyBkZWZhdWx0IHNlcnZpY2UgYmVsb25nIHRvIHNvbWUgZ29vZHMKICAgICAgICAgIGlzU2VydmljZTogdHJ1ZQogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgLyoqCiAgICAgICAqIERlYWwgZ2lmdHMKICAgICAgICovCiAgICAgIC8vIHRoZSBzZWVsY3RlZCBnaWZ0cyBvZiBzZWxlY3RlZCBnb29vZHMKCiAgICAgIHZhciBnaWZ0U2VsZWN0ID0gW107CiAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpZiAoaXRlbS5zZWxfc3RhdHVzICYmIGl0ZW0uZ2lmdCkgewogICAgICAgICAgaXRlbS5naWZ0LmZvckVhY2goZnVuY3Rpb24gKGdpZnQpIHsKICAgICAgICAgICAgZ2lmdFNlbGVjdC5wdXNoKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZ2lmdCksIHt9LCB7CiAgICAgICAgICAgICAgcGFyZW50X2dvb2RzSWQ6IGl0ZW0uZ29vZHNJZAogICAgICAgICAgICB9KSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOyAvLyBwdXQgJ2dpZnRTZWxlY3QnIGJlaGluZCByZWxhdGVkIGdvb2RzCgogICAgICBnaWZ0U2VsZWN0LmZvckVhY2goZnVuY3Rpb24gKGdpZnQpIHsKICAgICAgICB2YXIgaW5kZXggPSBpdGVtcy5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBpdGVtLmdvb2RzSWQgPT0gZ2lmdC5wYXJlbnRfZ29vZHNJZDsKICAgICAgICB9KTsKICAgICAgICBpdGVtcy5zcGxpY2UoaW5kZXggKyAxLCAwLCB7CiAgICAgICAgICBidXlfbGltaXQ6IGl0ZW1zW2luZGV4XS5udW0sCiAgICAgICAgICBnb29kc0lkOiBnaWZ0LmFjdElkLAogICAgICAgICAgaW1hZ2VfdXJsOiBnaWZ0LmltYWdlX3VybCwKICAgICAgICAgIG51bTogaXRlbXNbaW5kZXhdLm51bSwKICAgICAgICAgIHByb2R1Y3RfbmFtZTogZ2lmdC5wcm9kdWN0X25hbWUsCiAgICAgICAgICBzZWxfc3RhdHVzOiAxLAogICAgICAgICAgcGFyZW50X2dvb2RzSWQ6IGdpZnQucGFyZW50X2dvb2RzSWQsCiAgICAgICAgICBpc0dpZnQ6IHRydWUKICAgICAgICB9KTsKICAgICAgfSk7IC8vIHRoaXMuY2FydExpc3QgPSBbXQoKICAgICAgdGhpcy5jYXJ0TGlzdCA9IGl0ZW1zOwogICAgICBjb25zb2xlLmxvZyhpdGVtcyk7CiAgICB9LAogICAgY2FydFNlbGVjdDogZnVuY3Rpb24gY2FydFNlbGVjdChpdGVtLCBpbmRleCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBzZWxfc3RhdHVzID0gaXRlbS5zZWxfc3RhdHVzID8gMCA6IDE7CiAgICAgIHNlbGVjdEdvb2RzKHsKICAgICAgICBnb29kc0lkOiBpdGVtLmdvb2RzSWQsCiAgICAgICAgc2VsZWN0X3N0YXR1czogc2VsX3N0YXR1cwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICBpdGVtLnNlbF9zdGF0dXMgPSBzZWxfc3RhdHVzOwoKICAgICAgICAgIGlmICghaXRlbS5zZWxfc3RhdHVzKSB7CiAgICAgICAgICAgIC8vIENhbmNlbCBzZWxlY3RlZCBnb29kcwogICAgICAgICAgICAvLyBJZiBoYXZpbmcgc2VydmljZXMgYW5kIGdpZnQsIGRlbGV0ZSBpdAogICAgICAgICAgICB2YXIgc3ViSW5kZXggPSBfdGhpczIuY2FydExpc3QuZmluZEluZGV4KGZ1bmN0aW9uIChsaXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIGxpc3QucGFyZW50X2dvb2RzSWQgPT09IGl0ZW0uZ29vZHNJZDsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICB3aGlsZSAoc3ViSW5kZXggPiAtMSkgewogICAgICAgICAgICAgIF90aGlzMi5jYXJ0TGlzdC5zcGxpY2Uoc3ViSW5kZXgsIDEpOwoKICAgICAgICAgICAgICBzdWJJbmRleCA9IF90aGlzMi5jYXJ0TGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKGxpc3QpIHsKICAgICAgICAgICAgICAgIHJldHVybiBsaXN0LnBhcmVudF9nb29kc0lkID09PSBpdGVtLmdvb2RzSWQ7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gLy8gc2V0IGFsbCBzZWxlY3RlZCBzdGF0dXMgYXMgMAogICAgICAgICAgICAvLyBtZWFud2hpbGUgcHV0IGl0IGludG8gb3B0aW9uYWwgc2VydmljZSBsaXN0CgoKICAgICAgICAgICAgaXRlbS5zZXJ2aWNlX2luZm8uZm9yRWFjaChmdW5jdGlvbiAobGlzdCkgewogICAgICAgICAgICAgIGxpc3Quc2VydmljZV9pbmZvLmZvckVhY2goZnVuY3Rpb24gKGluZm8pIHsKICAgICAgICAgICAgICAgIGlmIChpbmZvLnNlbF9zdGF0dXMpIHsKICAgICAgICAgICAgICAgICAgaW5mby5zZWxfc3RhdHVzID0gMDsKICAgICAgICAgICAgICAgICAgaXRlbS5zZXJ2aWNlTGlzdC5wdXNoKGluZm8pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIFNlbGVjdGVkIHN0YXR1cwogICAgICAgICAgICBpZiAoaXRlbS5naWZ0ICYmIGl0ZW0uZ2lmdC5sZW5ndGgpIHsKICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2lmdCB0byBnb29kcyBpZiBoYXZpbmcgZ2lmdAogICAgICAgICAgICAgIGl0ZW0uZ2lmdC5mb3JFYWNoKGZ1bmN0aW9uIChnaWZ0KSB7CiAgICAgICAgICAgICAgICBfdGhpczIuY2FydExpc3Quc3BsaWNlKGluZGV4ICsgMSwgMCwgewogICAgICAgICAgICAgICAgICBidXlfbGltaXQ6IGl0ZW0ubnVtLAogICAgICAgICAgICAgICAgICBnb29kc0lkOiBnaWZ0LmFjdElkLAogICAgICAgICAgICAgICAgICBpbWFnZV91cmw6IGdpZnQuaW1hZ2VfdXJsLAogICAgICAgICAgICAgICAgICBudW06IGl0ZW0ubnVtLAogICAgICAgICAgICAgICAgICBwcm9kdWN0X25hbWU6IGdpZnQucHJvZHVjdF9uYW1lLAogICAgICAgICAgICAgICAgICBzZWxfc3RhdHVzOiAxLAogICAgICAgICAgICAgICAgICBwYXJlbnRfZ29vZHNJZDogaXRlbS5nb29kc0lkLAogICAgICAgICAgICAgICAgICBpc0dpZnQ6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjYXJ0RWRpdDogZnVuY3Rpb24gY2FydEVkaXQoaXRlbSwgbnVtKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgaWYgKG51bSA8IDAgJiYgaXRlbS5udW0gPT09IDEpIHJldHVybjsKICAgICAgaWYgKG51bSA+IDAgJiYgaXRlbS5udW0gPT0gaXRlbS5idXlfbGltaXQpIHJldHVybjsKICAgICAgdmFyIGNvbnN1bXB0aW9uID0gbnVtID4gMCA/IDIgOiAxOwogICAgICBlZGl0Q2FydCh7CiAgICAgICAgZ29vZHNJZDogaXRlbS5nb29kc0lkLAogICAgICAgIGNvbnN1bXB0aW9uOiBjb25zdW1wdGlvbgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzICYmIHJlcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgaXRlbS5udW0gKz0gbnVtOyAvLyBkZWFsIHJlbGF0ZWQgcXVhbnRpdHkgb2YgZ2lmdCBhbmQgc2VydmljZQoKICAgICAgICAgIF90aGlzMy5jYXJ0TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0KSB7CiAgICAgICAgICAgIGlmIChsaXN0LnBhcmVudF9nb29kc0lkID09PSBpdGVtLmdvb2RzSWQpIHsKICAgICAgICAgICAgICAvLyBkZWFsIHNlcnZpY2UgcXVhbnRpdHkKICAgICAgICAgICAgICBsaXN0LmJ1eV9saW1pdCA9IGl0ZW0ubnVtOwoKICAgICAgICAgICAgICBpZiAobGlzdC5pc0dpZnQpIHsKICAgICAgICAgICAgICAgIC8vIGRlYWwgZ2lmdCBxdWFudGl0eQogICAgICAgICAgICAgICAgbGlzdC5udW0gPSBpdGVtLm51bTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgdG9DYXJ0U2VsU2VydmljZTogZnVuY3Rpb24gdG9DYXJ0U2VsU2VydmljZShpdGVtKSB7CiAgICAgIHRoaXMuc2hvd1NlcnZpY2VJbmZvID0gdHJ1ZTsKICAgICAgdmFyIGFyciA9IFtdOwogICAgICBpdGVtLnNlcnZpY2VfaW5mby5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0LCBpbmRleCkgewogICAgICAgIHZhciBjdXJMaXN0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShsaXN0KSk7CiAgICAgICAgY3VyTGlzdC5zZXJ2aWNlX2luZm8gPSBbXTsKICAgICAgICBsaXN0LnNlcnZpY2VfaW5mby5mb3JFYWNoKGZ1bmN0aW9uIChzZXJ2aWNlKSB7CiAgICAgICAgICBpZiAoIXNlcnZpY2Uuc2VsX3N0YXR1cykgewogICAgICAgICAgICBjdXJMaXN0LnNlcnZpY2VfaW5mby5wdXNoKHNlcnZpY2UpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGFyci5wdXNoKGN1ckxpc3QpOwogICAgICB9KTsKICAgICAgdGhpcy5zZXJ2aWNlSW5mb0xpc3QgPSBhcnI7CiAgICAgIHRoaXMuc2VydmljZVNlbGVjdENhc2hJdGVtID0gaXRlbTsKICAgIH0sCiAgICBzZWxlY3RTZXJ2aWNlOiBmdW5jdGlvbiBzZWxlY3RTZXJ2aWNlKGxpc3QsIHNlcnZpY2UpIHsKICAgICAgaWYgKHNlcnZpY2Uuc2VsX3N0YXR1cykgewogICAgICAgIHNlcnZpY2Uuc2VsX3N0YXR1cyA9IDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGlzdC5zZXJ2aWNlX2luZm8uZm9yRWFjaChmdW5jdGlvbiAoaW5mbykgewogICAgICAgICAgaW5mby5zZWxfc3RhdHVzID0gMDsKICAgICAgICB9KTsKICAgICAgICBzZXJ2aWNlLnNlbF9zdGF0dXMgPSAxOwogICAgICB9CgogICAgICB2YXIgYXJyID0gW107CiAgICAgIHRoaXMuc2VydmljZUluZm9MaXN0LmZvckVhY2goZnVuY3Rpb24gKGxpc3QpIHsKICAgICAgICBsaXN0LnNlcnZpY2VfaW5mby5mb3JFYWNoKGZ1bmN0aW9uIChzZXJ2aWNlKSB7CiAgICAgICAgICBpZiAoc2VydmljZS5zZWxfc3RhdHVzKSB7CiAgICAgICAgICAgIGFyci5wdXNoKHNlcnZpY2UpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgdGhpcy5zZXJ2aWNlU2VsZWN0TWVzc2FnZSA9IGFyci5sZW5ndGggPyAiXHU1REYyXHU5MDA5XHU2MkU5Ii5jb25jYXQoYXJyLmxlbmd0aCwgIlx1OTg3OVx1NjcwRFx1NTJBMSIpIDogJ+ivt+mAieaLqeacjeWKoeexu+Weiyc7CiAgICAgIHRoaXMuc2VydmljZVNlbGVjdENhc2hBcnIgPSBhcnI7CiAgICB9LAogICAgc2VydmljZVNlbGVjdFN1Ym1pdDogZnVuY3Rpb24gc2VydmljZVNlbGVjdFN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB2YXIgY2FzaEl0ZW0gPSB0aGlzLnNlcnZpY2VTZWxlY3RDYXNoSXRlbTsKICAgICAgc2VsZWN0U2VydmljZXMoewogICAgICAgIHBhcmVudF9nb29kc0lkOiBjYXNoSXRlbS5wYXJlbnRfZ29vZHNJZCwKICAgICAgICBzZXJ2aWNlX2dvb2RzX2lkOiBjYXNoSXRlbS5nb29kc0lkLAogICAgICAgIHNlbF9zdGF0dXM6IDEKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgdmFyIGFyciA9IF90aGlzNC5zZXJ2aWNlU2VsZWN0Q2FzaEFycjsKCiAgICAgICAgICBpZiAoYXJyLmxlbmd0aCkgewogICAgICAgICAgICBhcnIuZm9yRWFjaChmdW5jdGlvbiAobGlzdCkgewogICAgICAgICAgICAgIC8vIGRlbGV0ZSB0aGUgc2VsZWN0ZWQgc2VydmljZSBmcm9tIG9wdGlvbmFsIHNlcnZpY2UgbGlzdAogICAgICAgICAgICAgIHZhciBzZXJ2aWNlTGlzdEluZGV4ID0gY2FzaEl0ZW0uc2VydmljZUxpc3QuZmluZEluZGV4KGZ1bmN0aW9uIChzZXJ2aWNlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gc2VydmljZS5zZXJ2aWNlX2dvb2RzX2lkID09PSBsaXN0LnNlcnZpY2VfZ29vZHNfaWQ7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgY2FzaEl0ZW0uc2VydmljZUxpc3Quc3BsaWNlKHNlcnZpY2VMaXN0SW5kZXgsIDEpOyAvLyBmb3Igb3JpZ2luYWwgc2VydmljZSBsaXN0LCBjaGFuZ2UgdGhlIHNlbGVjdCBzdGF0dXMKCiAgICAgICAgICAgICAgY2FzaEl0ZW0uc2VydmljZV9pbmZvLmZvckVhY2goZnVuY3Rpb24gKGluZm8pIHsKICAgICAgICAgICAgICAgIGluZm8uc2VydmljZV9pbmZvLmZvckVhY2goZnVuY3Rpb24gKHNlcnZpY2UpIHsKICAgICAgICAgICAgICAgICAgaWYgKHNlcnZpY2Uuc2VydmljZV9nb29kc19pZCA9PT0gbGlzdC5zZXJ2aWNlX2dvb2RzX2lkKSB7CiAgICAgICAgICAgICAgICAgICAgc2VydmljZS5zZWxfc3RhdHVzID0gMTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSk7IC8vIHRyYW5zZm9ybSBzZWxlY3RlZCBzZXJ2aWNlIHRvIGdvb2RzCgogICAgICAgICAgICAgIHZhciBpbmRleCA9IF90aGlzNC5jYXJ0TGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmdvb2RzSWQgPT09IGNhc2hJdGVtLmdvb2RzSWQ7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIF90aGlzNC5jYXJ0TGlzdC5zcGxpY2UoaW5kZXggKyAxLCAwLCB7CiAgICAgICAgICAgICAgICBidXlfbGltaXQ6IGNhc2hJdGVtLm51bSwKICAgICAgICAgICAgICAgIGdvb2RzSWQ6IGxpc3Quc2VydmljZV9nb29kc19pZCwKICAgICAgICAgICAgICAgIGltYWdlX3VybDogbGlzdC5zZXJ2aWNlX2ltYWdlX3VybCwKICAgICAgICAgICAgICAgIG51bTogbGlzdC5udW0sCiAgICAgICAgICAgICAgICBwcmljZTogbGlzdC5zZXJ2aWNlX3ByaWNlLAogICAgICAgICAgICAgICAgcHJvZHVjdF9uYW1lOiBsaXN0LnNlcnZpY2Vfc2hvcnRfbmFtZSwKICAgICAgICAgICAgICAgIHNlbF9zdGF0dXM6IDEsCiAgICAgICAgICAgICAgICBwYXJlbnRfZ29vZHNJZDogY2FzaEl0ZW0uZ29vZHNJZCwKICAgICAgICAgICAgICAgIGlzU2VydmljZTogdHJ1ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpczQuc2hvd1NlcnZpY2VJbmZvID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjYXJ0RGVsZXRlOiBmdW5jdGlvbiBjYXJ0RGVsZXRlKGl0ZW0sIGluZGV4KSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgZGVsZXRlR29vZHMoewogICAgICAgIGdvb2RzSWQ6IGl0ZW0uZ29vZHNJZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyBwdXQgc2VydmljZSBpbnRvIHJlbGF0ZWQgZ29vZHMgbGlzdAogICAgICAgIF90aGlzNS5jYXJ0TGlzdC5zcGxpY2UoaW5kZXgsIDEpOwoKICAgICAgICBpZiAoaXRlbS5wYXJlbnRfZ29vZHNJZCkgewogICAgICAgICAgdmFyIGN1ckdvb2QgPSBfdGhpczUuY2FydExpc3QuZmluZChmdW5jdGlvbiAobGlzdCkgewogICAgICAgICAgICByZXR1cm4gbGlzdC5nb29kc0lkID09PSBpdGVtLnBhcmVudF9nb29kc0lkOwogICAgICAgICAgfSk7CgogICAgICAgICAgY3VyR29vZC5zZXJ2aWNlX2luZm8uZm9yRWFjaChmdW5jdGlvbiAoaW5mbykgewogICAgICAgICAgICBpbmZvLnNlcnZpY2VfaW5mby5mb3JFYWNoKGZ1bmN0aW9uIChzZXJ2aWNlKSB7CiAgICAgICAgICAgICAgaWYgKHNlcnZpY2Uuc2VydmljZV9nb29kc19pZCA9PT0gaXRlbS5nb29kc0lkKSB7CiAgICAgICAgICAgICAgICBzZXJ2aWNlLnNlbF9zdGF0dXMgPSAwOwogICAgICAgICAgICAgICAgY3VyR29vZC5zZXJ2aWNlTGlzdC5wdXNoKHNlcnZpY2UpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gZGVsZXRlIGFsbCBzZXJ2aWNlIGFuZCBnaWZ0IGJlbG9uZyB0byB0aGlzIGdvb2RzCiAgICAgICAgICB2YXIgc3ViSW5kZXggPSBfdGhpczUuY2FydExpc3QuZmluZEluZGV4KGZ1bmN0aW9uIChsaXN0KSB7CiAgICAgICAgICAgIHJldHVybiBsaXN0LnBhcmVudF9nb29kc0lkID09PSBpdGVtLmdvb2RzSWQ7CiAgICAgICAgICB9KTsKCiAgICAgICAgICB3aGlsZSAoc3ViSW5kZXggPiAtMSkgewogICAgICAgICAgICBfdGhpczUuY2FydExpc3Quc3BsaWNlKHN1YkluZGV4LCAxKTsKCiAgICAgICAgICAgIHN1YkluZGV4ID0gX3RoaXM1LmNhcnRMaXN0LmZpbmRJbmRleChmdW5jdGlvbiAobGlzdCkgewogICAgICAgICAgICAgIHJldHVybiBsaXN0LnBhcmVudF9nb29kc0lkID09PSBpdGVtLmdvb2RzSWQ7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/views/MiCart/MiCart.js"],"names":["cartList","MiPop","MiRecommend","getCartList","selectGoods","selectServices","editCart","deleteGoods","components","data","serviceInfoList","showServiceInfo","serviceSelectMessage","serviceSelectCashArr","serviceSelectCashItem","totalNumber","totalPrice","watch","deep","handler","val","num","price","forEach","list","sel_status","beforeRouteEnter","to","from","next","name","then","res","vm","setCartList","fetchCartList","methods","$NProgress","done","$store","commit","items","JSON","parse","stringify","serviceSelect","item","service_info","serviceList","service","info","push","parent_goodsId","goodsId","index","findIndex","splice","service_goods_id","image_url","service_image_url","buy_limit","service_price","product_name","service_short_name","isService","giftSelect","gift","actId","isGift","console","log","cartSelect","select_status","status","subIndex","length","cartEdit","consumption","toCartSelService","arr","curList","selectService","serviceSelectSubmit","cashItem","serviceListIndex","cartDelete","curGood","find"],"mappings":"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","sourcesContent":["import { cartList } from '@/mock/cart.js'\n// import MiSearch from '@/components/MiTitle.vue'\nimport MiPop from '@/components/MiPop.vue'\nimport MiRecommend from '@/components/MiRecommend.vue'\nimport {\n  getCartList,\n  selectGoods,\n  selectServices,\n  editCart,\n  // addGoods,\n  deleteGoods\n} from '@/api/cart'\n\nexport default {\n  components: {\n    // MiSearch,\n    MiPop,\n    MiRecommend\n  },\n  data() {\n    return {\n      cartList: null,\n      serviceInfoList: null, // Currently. service list dose not be selected\n      showServiceInfo: false,\n      serviceSelectMessage: '请选择服务类型',\n      serviceSelectCashArr: [],\n      serviceSelectCashItem: null, // Current, selected service object in popup\n      totalNumber: 0,\n      totalPrice: 0\n    }\n  },\n  watch: {\n    cartList: {\n      deep: true,\n      handler(val) {\n        let num = 0\n        let price = 0\n        val.forEach(list => {\n          if(list.sel_status) {\n            num += list.num\n            if(list.price) {\n              price += list.num * list.price\n            }\n          }\n        })\n        this.totalNumber = num\n        this.totalPrice = price\n      }\n    }\n  },\n  beforeRouteEnter(to, from, next) {\n    if(from.name) {\n      getCartList().then(res => {\n        next(vm => vm.setCartList(res))\n      })\n    } else {\n      next(vm => vm.fetchCartList())\n    }\n  },\n  methods: {\n    fetchCartList() {\n      getCartList().then(res => {\n        this.setCartList(res)\n      })\n    },\n    setCartList(res) {\n      this.$NProgress.done()\n      this.$store.commit('setViewLoading', false)\n      /**\n       * get data from remote\n       */\n      // this.cartList = res.data.items\n\n      /**\n       * get data from mock\n       */\n      let items = JSON.parse(JSON.stringify(cartList)).data.items\n\n      /**\n       * Deal serivce\n       * default service, services which need to select\n       */\n      // the selected service of selected goods\n      // like: after have selected some goods, it will select some necessary service by default\n      let serviceSelect = []\n      items.forEach(item => {\n        if(item.service_info) {\n          // put items -> service_info -> service_info in this variable\n          // meanwhile keep the service_info is common service\n          // or the service_info does not belong to special goods\n          // so that page is going to render\n          item.serviceList = []\n          item.service_info.forEach(service => {\n            service.service_info.forEach(info => {\n              if(!info.sel_status) {\n                item.serviceList.push(info)\n              } else if(item.sel_status) {\n                serviceSelect.push({\n                  ...info,\n                  parent_goodsId: item.goodsId\n                  // after this, it represent service or gift when parent_goodsId === goodsId\n                })\n              }\n            })\n          })\n        }\n      })\n\n      // put 'serviceSelect' behind the related goods\n      serviceSelect.forEach(info => {\n        let index = items.findIndex(item => {\n          // it represent service or gift when parent_goodsId === goodsId\n          return item.goodsId === info.parent_goodsId\n        })\n        items.splice(index + 1, 0, {\n          goodsId: info.service_goods_id,\n          image_url: info.service_image_url,\n          num: info.num,\n          buy_limit: items[index].num,\n          price: info.service_price,\n          product_name: info.service_short_name,\n          sel_status: 1,\n          parent_goodsId: info.parent_goodsId, // represent this service is default service belong to some goods\n          isService: true\n        })\n      })\n\n      /**\n       * Deal gifts\n       */\n      // the seelcted gifts of selected gooods\n      let giftSelect = []\n      items.forEach(item => {\n        if(item.sel_status && item.gift) {\n          item.gift.forEach(gift => {\n            giftSelect.push({\n              ...gift,\n              parent_goodsId: item.goodsId\n            })\n          })\n        }\n      })\n      // put 'giftSelect' behind related goods\n      giftSelect.forEach(gift => {\n        let index = items.findIndex(item => {\n          return item.goodsId == gift.parent_goodsId\n        })\n        items.splice(index + 1, 0, {\n          buy_limit: items[index].num,\n          goodsId: gift.actId,\n          image_url: gift.image_url,\n          num: items[index].num,\n          product_name: gift.product_name,\n          sel_status: 1,\n          parent_goodsId: gift.parent_goodsId,\n          isGift: true\n        })\n      })\n      // this.cartList = []\n      this.cartList = items\n      console.log(items)\n    },\n    cartSelect(item, index) {\n      let sel_status = item.sel_status ? 0 : 1\n      selectGoods({\n        goodsId: item.goodsId,\n        select_status: sel_status\n      }).then(res => {\n        if(res.status === 200) {\n          item.sel_status = sel_status\n          if(!item.sel_status) {\n            // Cancel selected goods\n            // If having services and gift, delete it\n            let subIndex = this.cartList.findIndex(list => {\n              return list.parent_goodsId === item.goodsId\n            })\n            while(subIndex > -1) {\n              this.cartList.splice(subIndex, 1)\n              subIndex = this.cartList.findIndex(list => {\n                return list.parent_goodsId === item.goodsId\n              })\n            }\n            // set all selected status as 0\n            // meanwhile put it into optional service list\n            item.service_info.forEach(list => {\n              list.service_info.forEach(info => {\n                if(info.sel_status) {\n                  info.sel_status = 0\n                  item.serviceList.push(info)\n                }\n              })\n            })\n          } else {\n            // Selected status\n            if(item.gift && item.gift.length) {\n              // transform gift to goods if having gift\n              item.gift.forEach(gift => {\n                this.cartList.splice(index + 1, 0, {\n                  buy_limit: item.num,\n                  goodsId: gift.actId,\n                  image_url: gift.image_url,\n                  num: item.num,\n                  product_name: gift.product_name,\n                  sel_status: 1,\n                  parent_goodsId: item.goodsId,\n                  isGift: true\n                })\n              })\n            }\n          }\n        }\n      })\n    },\n    cartEdit(item, num) {\n      if(num < 0 && item.num === 1) return\n      if(num > 0 && item.num == item.buy_limit) return\n\n      let consumption = num > 0 ? 2 : 1\n      editCart({\n        goodsId: item.goodsId,\n        consumption\n      }).then(res => {\n        if(res && res.status === 200) {\n          item.num += num\n          // deal related quantity of gift and service\n          this.cartList.forEach(list => {\n            if(list.parent_goodsId === item.goodsId) {\n              // deal service quantity\n              list.buy_limit = item.num\n              if(list.isGift) {\n                // deal gift quantity\n                list.num = item.num\n              }\n            }\n          })\n        }\n      })\n    },\n    toCartSelService(item) {\n      this.showServiceInfo = true\n      let arr = []\n      item.service_info.forEach((list, index) => {\n        let curList = JSON.parse(JSON.stringify(list))\n        curList.service_info = []\n        list.service_info.forEach(service => {\n          if(!service.sel_status) {\n            curList.service_info.push(service)\n          }\n        })\n        arr.push(curList)\n      })\n      this.serviceInfoList = arr\n      this.serviceSelectCashItem = item\n    },\n    selectService(list, service) {\n      if(service.sel_status) {\n        service.sel_status = 0\n      } else {\n        list.service_info.forEach(info => {\n          info.sel_status = 0\n        })\n        service.sel_status = 1\n      }\n      let arr = []\n      this.serviceInfoList.forEach(list => {\n        list.service_info.forEach(service => {\n          if(service.sel_status) {\n            arr.push(service)\n          }\n        })\n      })\n      this.serviceSelectMessage = arr.length ? `已选择${arr.length}项服务` : '请选择服务类型'\n      this.serviceSelectCashArr = arr\n    },\n    serviceSelectSubmit() {\n      let cashItem = this.serviceSelectCashItem\n      selectServices({\n        parent_goodsId: cashItem.parent_goodsId,\n        service_goods_id: cashItem.goodsId,\n        sel_status: 1\n      }).then(res => {\n        if(res.status === 200) {\n          let arr = this.serviceSelectCashArr\n          if(arr.length) {\n            arr.forEach(list => {\n              // delete the selected service from optional service list\n              let serviceListIndex = cashItem.serviceList.findIndex(service => {\n                return service.service_goods_id === list.service_goods_id\n              })\n              cashItem.serviceList.splice(serviceListIndex, 1)\n\n              // for original service list, change the select status\n              cashItem.service_info.forEach(info => {\n                info.service_info.forEach(service => {\n                  if(service.service_goods_id === list.service_goods_id) {\n                    service.sel_status = 1\n                  }\n                })\n              })\n\n              // transform selected service to goods\n              let index = this.cartList.findIndex(item => {\n                return item.goodsId === cashItem.goodsId\n              })\n              this.cartList.splice(index + 1, 0, {\n                buy_limit: cashItem.num,\n                goodsId: list.service_goods_id,\n                image_url: list.service_image_url,\n                num: list.num,\n                price: list.service_price,\n                product_name: list.service_short_name,\n                sel_status: 1,\n                parent_goodsId: cashItem.goodsId,\n                isService: true\n              })\n            })\n          }\n          this.showServiceInfo = false\n        }\n      })\n    },\n    cartDelete(item, index) {\n      deleteGoods({\n        goodsId: item.goodsId\n      }).then(res => {\n        // put service into related goods list\n        this.cartList.splice(index, 1)\n        if(item.parent_goodsId) {\n          let curGood = this.cartList.find(list => {\n            return list.goodsId === item.parent_goodsId\n          })\n          curGood.service_info.forEach(info => {\n            info.service_info.forEach(service => {\n              if(service.service_goods_id === item.goodsId) {\n                service.sel_status = 0\n                curGood.serviceList.push(service)\n              }\n            })\n          })\n        } else {\n          // delete all service and gift belong to this goods\n          let subIndex = this.cartList.findIndex(list => {\n            return list.parent_goodsId === item.goodsId\n          })\n          while(subIndex > -1) {\n            this.cartList.splice(subIndex, 1)\n            subIndex = this.cartList.findIndex(list => {\n              return list.parent_goodsId === item.goodsId\n            })\n          }\n        }\n      })\n    }\n  }\n}\n"]}]}