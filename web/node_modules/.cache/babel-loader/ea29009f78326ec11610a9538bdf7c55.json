{"remainingRequest":"/Users/apple/xiaoMi/FE/xiaomi-mall-mobile/node_modules/babel-loader/lib/index.js!/Users/apple/xiaoMi/FE/xiaomi-mall-mobile/node_modules/eslint-loader/index.js??ref--13-0!/Users/apple/xiaoMi/FE/xiaomi-mall-mobile/src/views/MiCart/MiCart.js?vue&type=script&lang=js","dependencies":[{"path":"/Users/apple/xiaoMi/FE/xiaomi-mall-mobile/src/views/MiCart/MiCart.js","mtime":1637933789673},{"path":"/Users/apple/xiaoMi/FE/xiaomi-mall-mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/xiaoMi/FE/xiaomi-mall-mobile/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/apple/xiaoMi/FE/xiaomi-mall-mobile/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2FwcGxlL3hpYW9NaS9GRS94aWFvbWktbWFsbC1tb2JpbGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0IHsgY2FydExpc3QgfSBmcm9tICdAL21vY2svY2FydC5qcyc7IC8vIGltcG9ydCBNaVNlYXJjaCBmcm9tICdAL2NvbXBvbmVudHMvTWlUaXRsZS52dWUnCgppbXBvcnQgTWlQb3AgZnJvbSAnQC9jb21wb25lbnRzL01pUG9wLnZ1ZSc7CmltcG9ydCBNaVJlY29tbWVuZCBmcm9tICdAL2NvbXBvbmVudHMvTWlSZWNvbW1lbmQudnVlJzsKaW1wb3J0IHsgZ2V0Q2FydExpc3QsIHNlbGVjdEdvb2RzLCBzZWxlY3RTZXJ2aWNlcywgZWRpdENhcnQsIC8vIGFkZEdvb2RzLApkZWxldGVHb29kcyB9IGZyb20gJ0AvYXBpL2NhcnQnOwppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBNdXRhdGlvbnMgfSBmcm9tICd2dWV4JzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIC8vIE1pU2VhcmNoLAogICAgTWlQb3A6IE1pUG9wLAogICAgTWlSZWNvbW1lbmQ6IE1pUmVjb21tZW5kCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2FydExpc3Q6IG51bGwsCiAgICAgIHNlcnZpY2VJbmZvTGlzdDogbnVsbCwKICAgICAgLy8gQ3VycmVudGx5LiBzZXJ2aWNlIGxpc3QgZG9zZSBub3QgYmUgc2VsZWN0ZWQKICAgICAgc2hvd1NlcnZpY2VJbmZvOiBmYWxzZSwKICAgICAgc2VydmljZVNlbGVjdE1lc3NhZ2U6ICfor7fpgInmi6nmnI3liqHnsbvlnosnLAogICAgICBzZXJ2aWNlU2VsZWN0Q2FzaEFycjogW10sCiAgICAgIHNlcnZpY2VTZWxlY3RDYXNoSXRlbTogbnVsbCwKICAgICAgLy8gQ3VycmVudCwgc2VsZWN0ZWQgc2VydmljZSBvYmplY3QgaW4gcG9wdXAKICAgICAgdG90YWxOdW1iZXI6IDAsCiAgICAgIHRvdGFsUHJpY2U6IDAKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgY2FydExpc3Q6IHsKICAgICAgZGVlcDogdHJ1ZSwKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcih2YWwpIHsKICAgICAgICB2YXIgYWxsID0gMDsKICAgICAgICB2YXIgbnVtID0gMDsKICAgICAgICB2YXIgcHJpY2UgPSAwOwogICAgICAgIHZhbC5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0KSB7CiAgICAgICAgICBpZiAobGlzdC5zZWxfc3RhdHVzKSB7CiAgICAgICAgICAgIG51bSArPSBsaXN0Lm51bTsKCiAgICAgICAgICAgIGlmIChsaXN0LnByaWNlKSB7CiAgICAgICAgICAgICAgcHJpY2UgKz0gbGlzdC5udW0gKiBsaXN0LnByaWNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgYWxsICs9IGxpc3QubnVtOwogICAgICAgIH0pOwogICAgICAgIHRoaXMudG90YWxOdW1iZXIgPSBudW07CiAgICAgICAgdGhpcy50b3RhbFByaWNlID0gcHJpY2U7CiAgICAgICAgdGhpcy5zZXRDYXJ0Q291bnQoYWxsKTsKICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoWydpc0xvZ2luJ10pKSwKICBiZWZvcmVSb3V0ZUVudGVyOiBmdW5jdGlvbiBiZWZvcmVSb3V0ZUVudGVyKHRvLCBmcm9tLCBuZXh0KSB7CiAgICBpZiAoZnJvbS5uYW1lKSB7CiAgICAgIGdldENhcnRMaXN0KCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgbmV4dChmdW5jdGlvbiAodm0pIHsKICAgICAgICAgIHJldHVybiB2bS5zZXRDYXJ0TGlzdChyZXMpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIG5leHQoZnVuY3Rpb24gKHZtKSB7CiAgICAgICAgcmV0dXJuIHZtLmZldGNoQ2FydExpc3QoKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcE11dGF0aW9ucyh7CiAgICBzZXRDYXJ0Q291bnQ6ICdjYXJ0L3NldENvdW50JwogIH0pKSwge30sIHsKICAgIGZldGNoQ2FydExpc3Q6IGZ1bmN0aW9uIGZldGNoQ2FydExpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBnZXRDYXJ0TGlzdCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLnNldENhcnRMaXN0KHJlcyk7CiAgICAgIH0pOwogICAgfSwKICAgIHNldENhcnRMaXN0OiBmdW5jdGlvbiBzZXRDYXJ0TGlzdChyZXMpIHsKICAgICAgdGhpcy4kTlByb2dyZXNzLmRvbmUoKTsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRWaWV3TG9hZGluZycsIGZhbHNlKTsKICAgICAgLyoqCiAgICAgICAqIGdldCBkYXRhIGZyb20gcmVtb3RlCiAgICAgICAqLwogICAgICAvLyB0aGlzLmNhcnRMaXN0ID0gcmVzLmRhdGEuaXRlbXMKCiAgICAgIC8qKgogICAgICAgKiBnZXQgZGF0YSBmcm9tIG1vY2sKICAgICAgICovCgogICAgICB2YXIgaXRlbXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNhcnRMaXN0KSkuZGF0YS5pdGVtczsKICAgICAgLyoqCiAgICAgICAqIERlYWwgc2VyaXZjZQogICAgICAgKiBkZWZhdWx0IHNlcnZpY2UsIHNlcnZpY2VzIHdoaWNoIG5lZWQgdG8gc2VsZWN0CiAgICAgICAqLwogICAgICAvLyB0aGUgc2VsZWN0ZWQgc2VydmljZSBvZiBzZWxlY3RlZCBnb29kcwogICAgICAvLyBsaWtlOiBhZnRlciBoYXZlIHNlbGVjdGVkIHNvbWUgZ29vZHMsIGl0IHdpbGwgc2VsZWN0IHNvbWUgbmVjZXNzYXJ5IHNlcnZpY2UgYnkgZGVmYXVsdAoKICAgICAgdmFyIHNlcnZpY2VTZWxlY3QgPSBbXTsKICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGlmIChpdGVtLnNlcnZpY2VfaW5mbykgewogICAgICAgICAgLy8gcHV0IGl0ZW1zIC0+IHNlcnZpY2VfaW5mbyAtPiBzZXJ2aWNlX2luZm8gaW4gdGhpcyB2YXJpYWJsZQogICAgICAgICAgLy8gbWVhbndoaWxlIGtlZXAgdGhlIHNlcnZpY2VfaW5mbyBpcyBjb21tb24gc2VydmljZQogICAgICAgICAgLy8gb3IgdGhlIHNlcnZpY2VfaW5mbyBkb2VzIG5vdCBiZWxvbmcgdG8gc3BlY2lhbCBnb29kcwogICAgICAgICAgLy8gc28gdGhhdCBwYWdlIGlzIGdvaW5nIHRvIHJlbmRlcgogICAgICAgICAgaXRlbS5zZXJ2aWNlTGlzdCA9IFtdOwogICAgICAgICAgaXRlbS5zZXJ2aWNlX2luZm8uZm9yRWFjaChmdW5jdGlvbiAoc2VydmljZSkgewogICAgICAgICAgICBzZXJ2aWNlLnNlcnZpY2VfaW5mby5mb3JFYWNoKGZ1bmN0aW9uIChpbmZvKSB7CiAgICAgICAgICAgICAgaWYgKCFpbmZvLnNlbF9zdGF0dXMpIHsKICAgICAgICAgICAgICAgIGl0ZW0uc2VydmljZUxpc3QucHVzaChpbmZvKTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uc2VsX3N0YXR1cykgewogICAgICAgICAgICAgICAgc2VydmljZVNlbGVjdC5wdXNoKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaW5mbyksIHt9LCB7CiAgICAgICAgICAgICAgICAgIHBhcmVudF9nb29kc0lkOiBpdGVtLmdvb2RzSWQgLy8gYWZ0ZXIgdGhpcywgaXQgcmVwcmVzZW50IHNlcnZpY2Ugb3IgZ2lmdCB3aGVuIHBhcmVudF9nb29kc0lkID09PSBnb29kc0lkCgogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOyAvLyBwdXQgJ3NlcnZpY2VTZWxlY3QnIGJlaGluZCB0aGUgcmVsYXRlZCBnb29kcwoKICAgICAgc2VydmljZVNlbGVjdC5mb3JFYWNoKGZ1bmN0aW9uIChpbmZvKSB7CiAgICAgICAgdmFyIGluZGV4ID0gaXRlbXMuZmluZEluZGV4KGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAvLyBpdCByZXByZXNlbnQgc2VydmljZSBvciBnaWZ0IHdoZW4gcGFyZW50X2dvb2RzSWQgPT09IGdvb2RzSWQKICAgICAgICAgIHJldHVybiBpdGVtLmdvb2RzSWQgPT09IGluZm8ucGFyZW50X2dvb2RzSWQ7CiAgICAgICAgfSk7CiAgICAgICAgaXRlbXMuc3BsaWNlKGluZGV4ICsgMSwgMCwgewogICAgICAgICAgZ29vZHNJZDogaW5mby5zZXJ2aWNlX2dvb2RzX2lkLAogICAgICAgICAgaW1hZ2VfdXJsOiBpbmZvLnNlcnZpY2VfaW1hZ2VfdXJsLAogICAgICAgICAgbnVtOiBpbmZvLm51bSwKICAgICAgICAgIGJ1eV9saW1pdDogaXRlbXNbaW5kZXhdLm51bSwKICAgICAgICAgIHByaWNlOiBpbmZvLnNlcnZpY2VfcHJpY2UsCiAgICAgICAgICBwcm9kdWN0X25hbWU6IGluZm8uc2VydmljZV9zaG9ydF9uYW1lLAogICAgICAgICAgc2VsX3N0YXR1czogMSwKICAgICAgICAgIHBhcmVudF9nb29kc0lkOiBpbmZvLnBhcmVudF9nb29kc0lkLAogICAgICAgICAgLy8gcmVwcmVzZW50IHRoaXMgc2VydmljZSBpcyBkZWZhdWx0IHNlcnZpY2UgYmVsb25nIHRvIHNvbWUgZ29vZHMKICAgICAgICAgIGlzU2VydmljZTogdHJ1ZQogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgLyoqCiAgICAgICAqIERlYWwgZ2lmdHMKICAgICAgICovCiAgICAgIC8vIHRoZSBzZWVsY3RlZCBnaWZ0cyBvZiBzZWxlY3RlZCBnb29vZHMKCiAgICAgIHZhciBnaWZ0U2VsZWN0ID0gW107CiAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpZiAoaXRlbS5zZWxfc3RhdHVzICYmIGl0ZW0uZ2lmdCkgewogICAgICAgICAgaXRlbS5naWZ0LmZvckVhY2goZnVuY3Rpb24gKGdpZnQpIHsKICAgICAgICAgICAgZ2lmdFNlbGVjdC5wdXNoKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZ2lmdCksIHt9LCB7CiAgICAgICAgICAgICAgcGFyZW50X2dvb2RzSWQ6IGl0ZW0uZ29vZHNJZAogICAgICAgICAgICB9KSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOyAvLyBwdXQgJ2dpZnRTZWxlY3QnIGJlaGluZCByZWxhdGVkIGdvb2RzCgogICAgICBnaWZ0U2VsZWN0LmZvckVhY2goZnVuY3Rpb24gKGdpZnQpIHsKICAgICAgICB2YXIgaW5kZXggPSBpdGVtcy5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBpdGVtLmdvb2RzSWQgPT0gZ2lmdC5wYXJlbnRfZ29vZHNJZDsKICAgICAgICB9KTsKICAgICAgICBpdGVtcy5zcGxpY2UoaW5kZXggKyAxLCAwLCB7CiAgICAgICAgICBidXlfbGltaXQ6IGl0ZW1zW2luZGV4XS5udW0sCiAgICAgICAgICBnb29kc0lkOiBnaWZ0LmFjdElkLAogICAgICAgICAgaW1hZ2VfdXJsOiBnaWZ0LmltYWdlX3VybCwKICAgICAgICAgIG51bTogaXRlbXNbaW5kZXhdLm51bSwKICAgICAgICAgIHByb2R1Y3RfbmFtZTogZ2lmdC5wcm9kdWN0X25hbWUsCiAgICAgICAgICBzZWxfc3RhdHVzOiAxLAogICAgICAgICAgcGFyZW50X2dvb2RzSWQ6IGdpZnQucGFyZW50X2dvb2RzSWQsCiAgICAgICAgICBpc0dpZnQ6IHRydWUKICAgICAgICB9KTsKICAgICAgfSk7IC8vIHRoaXMuY2FydExpc3QgPSBbXQoKICAgICAgdGhpcy5jYXJ0TGlzdCA9IGl0ZW1zOwogICAgICBjb25zb2xlLmxvZyhpdGVtcyk7CiAgICB9LAogICAgY2FydFNlbGVjdDogZnVuY3Rpb24gY2FydFNlbGVjdChpdGVtLCBpbmRleCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBzZWxfc3RhdHVzID0gaXRlbS5zZWxfc3RhdHVzID8gMCA6IDE7CiAgICAgIHNlbGVjdEdvb2RzKHsKICAgICAgICBnb29kc0lkOiBpdGVtLmdvb2RzSWQsCiAgICAgICAgc2VsZWN0X3N0YXR1czogc2VsX3N0YXR1cwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICBpdGVtLnNlbF9zdGF0dXMgPSBzZWxfc3RhdHVzOwoKICAgICAgICAgIGlmICghaXRlbS5zZWxfc3RhdHVzKSB7CiAgICAgICAgICAgIC8vIENhbmNlbCBzZWxlY3RlZCBnb29kcwogICAgICAgICAgICAvLyBJZiBoYXZpbmcgc2VydmljZXMgYW5kIGdpZnQsIGRlbGV0ZSBpdAogICAgICAgICAgICB2YXIgc3ViSW5kZXggPSBfdGhpczIuY2FydExpc3QuZmluZEluZGV4KGZ1bmN0aW9uIChsaXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIGxpc3QucGFyZW50X2dvb2RzSWQgPT09IGl0ZW0uZ29vZHNJZDsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICB3aGlsZSAoc3ViSW5kZXggPiAtMSkgewogICAgICAgICAgICAgIF90aGlzMi5jYXJ0TGlzdC5zcGxpY2Uoc3ViSW5kZXgsIDEpOwoKICAgICAgICAgICAgICBzdWJJbmRleCA9IF90aGlzMi5jYXJ0TGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKGxpc3QpIHsKICAgICAgICAgICAgICAgIHJldHVybiBsaXN0LnBhcmVudF9nb29kc0lkID09PSBpdGVtLmdvb2RzSWQ7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gLy8gc2V0IGFsbCBzZWxlY3RlZCBzdGF0dXMgYXMgMAogICAgICAgICAgICAvLyBtZWFud2hpbGUgcHV0IGl0IGludG8gb3B0aW9uYWwgc2VydmljZSBsaXN0CgoKICAgICAgICAgICAgaXRlbS5zZXJ2aWNlX2luZm8uZm9yRWFjaChmdW5jdGlvbiAobGlzdCkgewogICAgICAgICAgICAgIGxpc3Quc2VydmljZV9pbmZvLmZvckVhY2goZnVuY3Rpb24gKGluZm8pIHsKICAgICAgICAgICAgICAgIGlmIChpbmZvLnNlbF9zdGF0dXMpIHsKICAgICAgICAgICAgICAgICAgaW5mby5zZWxfc3RhdHVzID0gMDsKICAgICAgICAgICAgICAgICAgaXRlbS5zZXJ2aWNlTGlzdC5wdXNoKGluZm8pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIFNlbGVjdGVkIHN0YXR1cwogICAgICAgICAgICBpZiAoaXRlbS5naWZ0ICYmIGl0ZW0uZ2lmdC5sZW5ndGgpIHsKICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2lmdCB0byBnb29kcyBpZiBoYXZpbmcgZ2lmdAogICAgICAgICAgICAgIGl0ZW0uZ2lmdC5mb3JFYWNoKGZ1bmN0aW9uIChnaWZ0KSB7CiAgICAgICAgICAgICAgICBfdGhpczIuY2FydExpc3Quc3BsaWNlKGluZGV4ICsgMSwgMCwgewogICAgICAgICAgICAgICAgICBidXlfbGltaXQ6IGl0ZW0ubnVtLAogICAgICAgICAgICAgICAgICBnb29kc0lkOiBnaWZ0LmFjdElkLAogICAgICAgICAgICAgICAgICBpbWFnZV91cmw6IGdpZnQuaW1hZ2VfdXJsLAogICAgICAgICAgICAgICAgICBudW06IGl0ZW0ubnVtLAogICAgICAgICAgICAgICAgICBwcm9kdWN0X25hbWU6IGdpZnQucHJvZHVjdF9uYW1lLAogICAgICAgICAgICAgICAgICBzZWxfc3RhdHVzOiAxLAogICAgICAgICAgICAgICAgICBwYXJlbnRfZ29vZHNJZDogaXRlbS5nb29kc0lkLAogICAgICAgICAgICAgICAgICBpc0dpZnQ6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjYXJ0RWRpdDogZnVuY3Rpb24gY2FydEVkaXQoaXRlbSwgbnVtKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgaWYgKG51bSA8IDAgJiYgaXRlbS5udW0gPT09IDEpIHJldHVybjsKICAgICAgaWYgKG51bSA+IDAgJiYgaXRlbS5udW0gPT0gaXRlbS5idXlfbGltaXQpIHJldHVybjsKICAgICAgdmFyIGNvbnN1bXB0aW9uID0gbnVtID4gMCA/IDIgOiAxOwogICAgICBlZGl0Q2FydCh7CiAgICAgICAgZ29vZHNJZDogaXRlbS5nb29kc0lkLAogICAgICAgIGNvbnN1bXB0aW9uOiBjb25zdW1wdGlvbgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzICYmIHJlcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgaXRlbS5udW0gKz0gbnVtOyAvLyBkZWFsIHJlbGF0ZWQgcXVhbnRpdHkgb2YgZ2lmdCBhbmQgc2VydmljZQoKICAgICAgICAgIF90aGlzMy5jYXJ0TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0KSB7CiAgICAgICAgICAgIGlmIChsaXN0LnBhcmVudF9nb29kc0lkID09PSBpdGVtLmdvb2RzSWQpIHsKICAgICAgICAgICAgICAvLyBkZWFsIHNlcnZpY2UgcXVhbnRpdHkKICAgICAgICAgICAgICBsaXN0LmJ1eV9saW1pdCA9IGl0ZW0ubnVtOwoKICAgICAgICAgICAgICBpZiAobGlzdC5pc0dpZnQpIHsKICAgICAgICAgICAgICAgIC8vIGRlYWwgZ2lmdCBxdWFudGl0eQogICAgICAgICAgICAgICAgbGlzdC5udW0gPSBpdGVtLm51bTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgdG9DYXJ0U2VsU2VydmljZTogZnVuY3Rpb24gdG9DYXJ0U2VsU2VydmljZShpdGVtKSB7CiAgICAgIHRoaXMuc2hvd1NlcnZpY2VJbmZvID0gdHJ1ZTsKICAgICAgdmFyIGFyciA9IFtdOwogICAgICBpdGVtLnNlcnZpY2VfaW5mby5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0LCBpbmRleCkgewogICAgICAgIHZhciBjdXJMaXN0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShsaXN0KSk7CiAgICAgICAgY3VyTGlzdC5zZXJ2aWNlX2luZm8gPSBbXTsKICAgICAgICBsaXN0LnNlcnZpY2VfaW5mby5mb3JFYWNoKGZ1bmN0aW9uIChzZXJ2aWNlKSB7CiAgICAgICAgICBpZiAoIXNlcnZpY2Uuc2VsX3N0YXR1cykgewogICAgICAgICAgICBjdXJMaXN0LnNlcnZpY2VfaW5mby5wdXNoKHNlcnZpY2UpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGFyci5wdXNoKGN1ckxpc3QpOwogICAgICB9KTsKICAgICAgdGhpcy5zZXJ2aWNlSW5mb0xpc3QgPSBhcnI7CiAgICAgIHRoaXMuc2VydmljZVNlbGVjdENhc2hJdGVtID0gaXRlbTsKICAgIH0sCiAgICBzZWxlY3RTZXJ2aWNlOiBmdW5jdGlvbiBzZWxlY3RTZXJ2aWNlKGxpc3QsIHNlcnZpY2UpIHsKICAgICAgaWYgKHNlcnZpY2Uuc2VsX3N0YXR1cykgewogICAgICAgIHNlcnZpY2Uuc2VsX3N0YXR1cyA9IDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbGlzdC5zZXJ2aWNlX2luZm8uZm9yRWFjaChmdW5jdGlvbiAoaW5mbykgewogICAgICAgICAgaW5mby5zZWxfc3RhdHVzID0gMDsKICAgICAgICB9KTsKICAgICAgICBzZXJ2aWNlLnNlbF9zdGF0dXMgPSAxOwogICAgICB9CgogICAgICB2YXIgYXJyID0gW107CiAgICAgIHRoaXMuc2VydmljZUluZm9MaXN0LmZvckVhY2goZnVuY3Rpb24gKGxpc3QpIHsKICAgICAgICBsaXN0LnNlcnZpY2VfaW5mby5mb3JFYWNoKGZ1bmN0aW9uIChzZXJ2aWNlKSB7CiAgICAgICAgICBpZiAoc2VydmljZS5zZWxfc3RhdHVzKSB7CiAgICAgICAgICAgIGFyci5wdXNoKHNlcnZpY2UpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgdGhpcy5zZXJ2aWNlU2VsZWN0TWVzc2FnZSA9IGFyci5sZW5ndGggPyAiXHU1REYyXHU5MDA5XHU2MkU5Ii5jb25jYXQoYXJyLmxlbmd0aCwgIlx1OTg3OVx1NjcwRFx1NTJBMSIpIDogJ+ivt+mAieaLqeacjeWKoeexu+Weiyc7CiAgICAgIHRoaXMuc2VydmljZVNlbGVjdENhc2hBcnIgPSBhcnI7CiAgICB9LAogICAgc2VydmljZVNlbGVjdFN1Ym1pdDogZnVuY3Rpb24gc2VydmljZVNlbGVjdFN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICB2YXIgY2FzaEl0ZW0gPSB0aGlzLnNlcnZpY2VTZWxlY3RDYXNoSXRlbTsKICAgICAgc2VsZWN0U2VydmljZXMoewogICAgICAgIHBhcmVudF9nb29kc0lkOiBjYXNoSXRlbS5wYXJlbnRfZ29vZHNJZCwKICAgICAgICBzZXJ2aWNlX2dvb2RzX2lkOiBjYXNoSXRlbS5nb29kc0lkLAogICAgICAgIHNlbF9zdGF0dXM6IDEKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgdmFyIGFyciA9IF90aGlzNC5zZXJ2aWNlU2VsZWN0Q2FzaEFycjsKCiAgICAgICAgICBpZiAoYXJyLmxlbmd0aCkgewogICAgICAgICAgICBhcnIuZm9yRWFjaChmdW5jdGlvbiAobGlzdCkgewogICAgICAgICAgICAgIC8vIGRlbGV0ZSB0aGUgc2VsZWN0ZWQgc2VydmljZSBmcm9tIG9wdGlvbmFsIHNlcnZpY2UgbGlzdAogICAgICAgICAgICAgIHZhciBzZXJ2aWNlTGlzdEluZGV4ID0gY2FzaEl0ZW0uc2VydmljZUxpc3QuZmluZEluZGV4KGZ1bmN0aW9uIChzZXJ2aWNlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gc2VydmljZS5zZXJ2aWNlX2dvb2RzX2lkID09PSBsaXN0LnNlcnZpY2VfZ29vZHNfaWQ7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgY2FzaEl0ZW0uc2VydmljZUxpc3Quc3BsaWNlKHNlcnZpY2VMaXN0SW5kZXgsIDEpOyAvLyBmb3Igb3JpZ2luYWwgc2VydmljZSBsaXN0LCBjaGFuZ2UgdGhlIHNlbGVjdCBzdGF0dXMKCiAgICAgICAgICAgICAgY2FzaEl0ZW0uc2VydmljZV9pbmZvLmZvckVhY2goZnVuY3Rpb24gKGluZm8pIHsKICAgICAgICAgICAgICAgIGluZm8uc2VydmljZV9pbmZvLmZvckVhY2goZnVuY3Rpb24gKHNlcnZpY2UpIHsKICAgICAgICAgICAgICAgICAgaWYgKHNlcnZpY2Uuc2VydmljZV9nb29kc19pZCA9PT0gbGlzdC5zZXJ2aWNlX2dvb2RzX2lkKSB7CiAgICAgICAgICAgICAgICAgICAgc2VydmljZS5zZWxfc3RhdHVzID0gMTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSk7IC8vIHRyYW5zZm9ybSBzZWxlY3RlZCBzZXJ2aWNlIHRvIGdvb2RzCgogICAgICAgICAgICAgIHZhciBpbmRleCA9IF90aGlzNC5jYXJ0TGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmdvb2RzSWQgPT09IGNhc2hJdGVtLmdvb2RzSWQ7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIF90aGlzNC5jYXJ0TGlzdC5zcGxpY2UoaW5kZXggKyAxLCAwLCB7CiAgICAgICAgICAgICAgICBidXlfbGltaXQ6IGNhc2hJdGVtLm51bSwKICAgICAgICAgICAgICAgIGdvb2RzSWQ6IGxpc3Quc2VydmljZV9nb29kc19pZCwKICAgICAgICAgICAgICAgIGltYWdlX3VybDogbGlzdC5zZXJ2aWNlX2ltYWdlX3VybCwKICAgICAgICAgICAgICAgIG51bTogbGlzdC5udW0sCiAgICAgICAgICAgICAgICBwcmljZTogbGlzdC5zZXJ2aWNlX3ByaWNlLAogICAgICAgICAgICAgICAgcHJvZHVjdF9uYW1lOiBsaXN0LnNlcnZpY2Vfc2hvcnRfbmFtZSwKICAgICAgICAgICAgICAgIHNlbF9zdGF0dXM6IDEsCiAgICAgICAgICAgICAgICBwYXJlbnRfZ29vZHNJZDogY2FzaEl0ZW0uZ29vZHNJZCwKICAgICAgICAgICAgICAgIGlzU2VydmljZTogdHJ1ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpczQuc2hvd1NlcnZpY2VJbmZvID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjYXJ0RGVsZXRlOiBmdW5jdGlvbiBjYXJ0RGVsZXRlKGl0ZW0sIGluZGV4KSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgZGVsZXRlR29vZHMoewogICAgICAgIGdvb2RzSWQ6IGl0ZW0uZ29vZHNJZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyBwdXQgc2VydmljZSBpbnRvIHJlbGF0ZWQgZ29vZHMgbGlzdAogICAgICAgIF90aGlzNS5jYXJ0TGlzdC5zcGxpY2UoaW5kZXgsIDEpOwoKICAgICAgICBpZiAoaXRlbS5wYXJlbnRfZ29vZHNJZCkgewogICAgICAgICAgdmFyIGN1ckdvb2QgPSBfdGhpczUuY2FydExpc3QuZmluZChmdW5jdGlvbiAobGlzdCkgewogICAgICAgICAgICByZXR1cm4gbGlzdC5nb29kc0lkID09PSBpdGVtLnBhcmVudF9nb29kc0lkOwogICAgICAgICAgfSk7CgogICAgICAgICAgY3VyR29vZC5zZXJ2aWNlX2luZm8uZm9yRWFjaChmdW5jdGlvbiAoaW5mbykgewogICAgICAgICAgICBpbmZvLnNlcnZpY2VfaW5mby5mb3JFYWNoKGZ1bmN0aW9uIChzZXJ2aWNlKSB7CiAgICAgICAgICAgICAgaWYgKHNlcnZpY2Uuc2VydmljZV9nb29kc19pZCA9PT0gaXRlbS5nb29kc0lkKSB7CiAgICAgICAgICAgICAgICBzZXJ2aWNlLnNlbF9zdGF0dXMgPSAwOwogICAgICAgICAgICAgICAgY3VyR29vZC5zZXJ2aWNlTGlzdC5wdXNoKHNlcnZpY2UpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gZGVsZXRlIGFsbCBzZXJ2aWNlIGFuZCBnaWZ0IGJlbG9uZyB0byB0aGlzIGdvb2RzCiAgICAgICAgICB2YXIgc3ViSW5kZXggPSBfdGhpczUuY2FydExpc3QuZmluZEluZGV4KGZ1bmN0aW9uIChsaXN0KSB7CiAgICAgICAgICAgIHJldHVybiBsaXN0LnBhcmVudF9nb29kc0lkID09PSBpdGVtLmdvb2RzSWQ7CiAgICAgICAgICB9KTsKCiAgICAgICAgICB3aGlsZSAoc3ViSW5kZXggPiAtMSkgewogICAgICAgICAgICBfdGhpczUuY2FydExpc3Quc3BsaWNlKHN1YkluZGV4LCAxKTsKCiAgICAgICAgICAgIHN1YkluZGV4ID0gX3RoaXM1LmNhcnRMaXN0LmZpbmRJbmRleChmdW5jdGlvbiAobGlzdCkgewogICAgICAgICAgICAgIHJldHVybiBsaXN0LnBhcmVudF9nb29kc0lkID09PSBpdGVtLmdvb2RzSWQ7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSkKfTs="},{"version":3,"sources":["/Users/apple/xiaoMi/FE/xiaomi-mall-mobile/src/views/MiCart/MiCart.js"],"names":["cartList","MiPop","MiRecommend","getCartList","selectGoods","selectServices","editCart","deleteGoods","mapGetters","mapMutations","components","data","serviceInfoList","showServiceInfo","serviceSelectMessage","serviceSelectCashArr","serviceSelectCashItem","totalNumber","totalPrice","watch","deep","handler","val","all","num","price","forEach","list","sel_status","setCartCount","computed","beforeRouteEnter","to","from","next","name","then","res","vm","setCartList","fetchCartList","methods","$NProgress","done","$store","commit","items","JSON","parse","stringify","serviceSelect","item","service_info","serviceList","service","info","push","parent_goodsId","goodsId","index","findIndex","splice","service_goods_id","image_url","service_image_url","buy_limit","service_price","product_name","service_short_name","isService","giftSelect","gift","actId","isGift","console","log","cartSelect","select_status","status","subIndex","length","cartEdit","consumption","toCartSelService","arr","curList","selectService","serviceSelectSubmit","cashItem","serviceListIndex","cartDelete","curGood","find"],"mappings":"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","sourcesContent":["import { cartList } from '@/mock/cart.js'\n// import MiSearch from '@/components/MiTitle.vue'\nimport MiPop from '@/components/MiPop.vue'\nimport MiRecommend from '@/components/MiRecommend.vue'\nimport {\n  getCartList,\n  selectGoods,\n  selectServices,\n  editCart,\n  // addGoods,\n  deleteGoods\n} from '@/api/cart'\nimport { mapGetters, mapMutations } from 'vuex'\n\nexport default {\n  components: {\n    // MiSearch,\n    MiPop,\n    MiRecommend\n  },\n  data() {\n    return {\n      cartList: null,\n      serviceInfoList: null, // Currently. service list dose not be selected\n      showServiceInfo: false,\n      serviceSelectMessage: '请选择服务类型',\n      serviceSelectCashArr: [],\n      serviceSelectCashItem: null, // Current, selected service object in popup\n      totalNumber: 0,\n      totalPrice: 0\n    }\n  },\n  watch: {\n    cartList: {\n      deep: true,\n      handler(val) {\n        let all = 0\n        let num = 0\n        let price = 0\n        val.forEach(list => {\n          if(list.sel_status) {\n            num += list.num\n            if(list.price) {\n              price += list.num * list.price\n            }\n          }\n          all += list.num\n        })\n\n        this.totalNumber = num\n        this.totalPrice = price\n        this.setCartCount(all)\n      }\n    }\n  },\n  computed: {\n    ...mapGetters(['isLogin'])\n  },\n  beforeRouteEnter(to, from, next) {\n    if(from.name) {\n      getCartList().then(res => {\n        next(vm => vm.setCartList(res))\n      })\n    } else {\n      next(vm => vm.fetchCartList())\n    }\n  },\n  methods: {\n    ...mapMutations({\n      setCartCount: 'cart/setCount'\n    }),\n    fetchCartList() {\n      getCartList().then(res => {\n        this.setCartList(res)\n      })\n    },\n    setCartList(res) {\n      this.$NProgress.done()\n      this.$store.commit('setViewLoading', false)\n      /**\n       * get data from remote\n       */\n      // this.cartList = res.data.items\n\n      /**\n       * get data from mock\n       */\n      let items = JSON.parse(JSON.stringify(cartList)).data.items\n\n      /**\n       * Deal serivce\n       * default service, services which need to select\n       */\n      // the selected service of selected goods\n      // like: after have selected some goods, it will select some necessary service by default\n      let serviceSelect = []\n      items.forEach(item => {\n        if(item.service_info) {\n          // put items -> service_info -> service_info in this variable\n          // meanwhile keep the service_info is common service\n          // or the service_info does not belong to special goods\n          // so that page is going to render\n          item.serviceList = []\n          item.service_info.forEach(service => {\n            service.service_info.forEach(info => {\n              if(!info.sel_status) {\n                item.serviceList.push(info)\n              } else if(item.sel_status) {\n                serviceSelect.push({\n                  ...info,\n                  parent_goodsId: item.goodsId\n                  // after this, it represent service or gift when parent_goodsId === goodsId\n                })\n              }\n            })\n          })\n        }\n      })\n\n      // put 'serviceSelect' behind the related goods\n      serviceSelect.forEach(info => {\n        let index = items.findIndex(item => {\n          // it represent service or gift when parent_goodsId === goodsId\n          return item.goodsId === info.parent_goodsId\n        })\n        items.splice(index + 1, 0, {\n          goodsId: info.service_goods_id,\n          image_url: info.service_image_url,\n          num: info.num,\n          buy_limit: items[index].num,\n          price: info.service_price,\n          product_name: info.service_short_name,\n          sel_status: 1,\n          parent_goodsId: info.parent_goodsId, // represent this service is default service belong to some goods\n          isService: true\n        })\n      })\n\n      /**\n       * Deal gifts\n       */\n      // the seelcted gifts of selected gooods\n      let giftSelect = []\n      items.forEach(item => {\n        if(item.sel_status && item.gift) {\n          item.gift.forEach(gift => {\n            giftSelect.push({\n              ...gift,\n              parent_goodsId: item.goodsId\n            })\n          })\n        }\n      })\n      // put 'giftSelect' behind related goods\n      giftSelect.forEach(gift => {\n        let index = items.findIndex(item => {\n          return item.goodsId == gift.parent_goodsId\n        })\n        items.splice(index + 1, 0, {\n          buy_limit: items[index].num,\n          goodsId: gift.actId,\n          image_url: gift.image_url,\n          num: items[index].num,\n          product_name: gift.product_name,\n          sel_status: 1,\n          parent_goodsId: gift.parent_goodsId,\n          isGift: true\n        })\n      })\n      // this.cartList = []\n      this.cartList = items\n      console.log(items)\n    },\n    cartSelect(item, index) {\n      let sel_status = item.sel_status ? 0 : 1\n      selectGoods({\n        goodsId: item.goodsId,\n        select_status: sel_status\n      }).then(res => {\n        if(res.status === 200) {\n          item.sel_status = sel_status\n          if(!item.sel_status) {\n            // Cancel selected goods\n            // If having services and gift, delete it\n            let subIndex = this.cartList.findIndex(list => {\n              return list.parent_goodsId === item.goodsId\n            })\n            while(subIndex > -1) {\n              this.cartList.splice(subIndex, 1)\n              subIndex = this.cartList.findIndex(list => {\n                return list.parent_goodsId === item.goodsId\n              })\n            }\n            // set all selected status as 0\n            // meanwhile put it into optional service list\n            item.service_info.forEach(list => {\n              list.service_info.forEach(info => {\n                if(info.sel_status) {\n                  info.sel_status = 0\n                  item.serviceList.push(info)\n                }\n              })\n            })\n          } else {\n            // Selected status\n            if(item.gift && item.gift.length) {\n              // transform gift to goods if having gift\n              item.gift.forEach(gift => {\n                this.cartList.splice(index + 1, 0, {\n                  buy_limit: item.num,\n                  goodsId: gift.actId,\n                  image_url: gift.image_url,\n                  num: item.num,\n                  product_name: gift.product_name,\n                  sel_status: 1,\n                  parent_goodsId: item.goodsId,\n                  isGift: true\n                })\n              })\n            }\n          }\n        }\n      })\n    },\n    cartEdit(item, num) {\n      if(num < 0 && item.num === 1) return\n      if(num > 0 && item.num == item.buy_limit) return\n\n      let consumption = num > 0 ? 2 : 1\n      editCart({\n        goodsId: item.goodsId,\n        consumption\n      }).then(res => {\n        if(res && res.status === 200) {\n          item.num += num\n          // deal related quantity of gift and service\n          this.cartList.forEach(list => {\n            if(list.parent_goodsId === item.goodsId) {\n              // deal service quantity\n              list.buy_limit = item.num\n              if(list.isGift) {\n                // deal gift quantity\n                list.num = item.num\n              }\n            }\n          })\n        }\n      })\n    },\n    toCartSelService(item) {\n      this.showServiceInfo = true\n      let arr = []\n      item.service_info.forEach((list, index) => {\n        let curList = JSON.parse(JSON.stringify(list))\n        curList.service_info = []\n        list.service_info.forEach(service => {\n          if(!service.sel_status) {\n            curList.service_info.push(service)\n          }\n        })\n        arr.push(curList)\n      })\n      this.serviceInfoList = arr\n      this.serviceSelectCashItem = item\n    },\n    selectService(list, service) {\n      if(service.sel_status) {\n        service.sel_status = 0\n      } else {\n        list.service_info.forEach(info => {\n          info.sel_status = 0\n        })\n        service.sel_status = 1\n      }\n      let arr = []\n      this.serviceInfoList.forEach(list => {\n        list.service_info.forEach(service => {\n          if(service.sel_status) {\n            arr.push(service)\n          }\n        })\n      })\n      this.serviceSelectMessage = arr.length ? `已选择${arr.length}项服务` : '请选择服务类型'\n      this.serviceSelectCashArr = arr\n    },\n    serviceSelectSubmit() {\n      let cashItem = this.serviceSelectCashItem\n      selectServices({\n        parent_goodsId: cashItem.parent_goodsId,\n        service_goods_id: cashItem.goodsId,\n        sel_status: 1\n      }).then(res => {\n        if(res.status === 200) {\n          let arr = this.serviceSelectCashArr\n          if(arr.length) {\n            arr.forEach(list => {\n              // delete the selected service from optional service list\n              let serviceListIndex = cashItem.serviceList.findIndex(service => {\n                return service.service_goods_id === list.service_goods_id\n              })\n              cashItem.serviceList.splice(serviceListIndex, 1)\n\n              // for original service list, change the select status\n              cashItem.service_info.forEach(info => {\n                info.service_info.forEach(service => {\n                  if(service.service_goods_id === list.service_goods_id) {\n                    service.sel_status = 1\n                  }\n                })\n              })\n\n              // transform selected service to goods\n              let index = this.cartList.findIndex(item => {\n                return item.goodsId === cashItem.goodsId\n              })\n              this.cartList.splice(index + 1, 0, {\n                buy_limit: cashItem.num,\n                goodsId: list.service_goods_id,\n                image_url: list.service_image_url,\n                num: list.num,\n                price: list.service_price,\n                product_name: list.service_short_name,\n                sel_status: 1,\n                parent_goodsId: cashItem.goodsId,\n                isService: true\n              })\n            })\n          }\n          this.showServiceInfo = false\n        }\n      })\n    },\n    cartDelete(item, index) {\n      deleteGoods({\n        goodsId: item.goodsId\n      }).then(res => {\n        // put service into related goods list\n        this.cartList.splice(index, 1)\n        if(item.parent_goodsId) {\n          let curGood = this.cartList.find(list => {\n            return list.goodsId === item.parent_goodsId\n          })\n          curGood.service_info.forEach(info => {\n            info.service_info.forEach(service => {\n              if(service.service_goods_id === item.goodsId) {\n                service.sel_status = 0\n                curGood.serviceList.push(service)\n              }\n            })\n          })\n        } else {\n          // delete all service and gift belong to this goods\n          let subIndex = this.cartList.findIndex(list => {\n            return list.parent_goodsId === item.goodsId\n          })\n          while(subIndex > -1) {\n            this.cartList.splice(subIndex, 1)\n            subIndex = this.cartList.findIndex(list => {\n              return list.parent_goodsId === item.goodsId\n            })\n          }\n        }\n      })\n    }\n  }\n}\n"]}]}