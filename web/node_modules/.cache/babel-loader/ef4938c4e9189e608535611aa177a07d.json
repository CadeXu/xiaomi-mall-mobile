{"remainingRequest":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/babel-loader/lib/index.js!/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/eslint-loader/index.js??ref--13-0!/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/router/listen-router.js","dependencies":[{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/router/listen-router.js","mtime":1637369758871},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHJvdXRlciBmcm9tICcuJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUvaW5kZXgnOwppbXBvcnQgTlByb2dyZXNzIGZyb20gJ25wcm9ncmVzcyc7CmltcG9ydCAnbnByb2dyZXNzL25wcm9ncmVzcy5jc3MnOwppbXBvcnQgeyBmcm9tIH0gZnJvbSAnY29yZS1qcy9jb3JlL2FycmF5JzsKTlByb2dyZXNzLmNvbmZpZ3VyZSh7CiAgc2hvd1NwaW5uZXI6IGZhbHNlCn0pOwpyb3V0ZXIuYmVmb3JlRWFjaChmdW5jdGlvbiAodG8sIGZvcm0sIG5leHQpIHsKICAvLyB0cmlnZ2VyIHRoZSByZWxhdGVkIG11dGF0aW9uIHRvIGNoYW5nZSBzdGF0ZSBzdGF0dXMKICBzdG9yZS5jb21taXQoJ3NldFZpZXdMb2FkaW5nJywgdHJ1ZSk7CiAgTlByb2dyZXNzLnN0YXJ0KCk7IC8vIGludGVyY2VwdCByb3V0ZQogIC8vIGp1ZGdlIHJvdXRlIGF1dGhlbnRpY2F0aW9uCgogIGlmICh0by5tZXRhLnJlcXVpcmVzQXV0aCAmJiAhc3RvcmUuZ2V0dGVycy5pc0xvZ2luKSB7CiAgICBuZXh0KHsKICAgICAgbmFtZTogJ2xvZ2luJyAvLyBxdWVyeTogeyByZWRpcmVjdDogZnJvbS5mdWxsUGF0aCB9CgogICAgfSk7CiAgfSBlbHNlIHsKICAgIG5leHQoKTsKICB9Cn0pOwpleHBvcnQgZGVmYXVsdCBOUHJvZ3Jlc3M7"},{"version":3,"sources":["/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/router/listen-router.js"],"names":["router","store","NProgress","from","configure","showSpinner","beforeEach","to","form","next","commit","start","meta","requiresAuth","getters","isLogin","name"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,GAAnB;AACA,OAAOC,KAAP,MAAkB,eAAlB;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,OAAO,yBAAP;AACA,SAASC,IAAT,QAAqB,oBAArB;AACAD,SAAS,CAACE,SAAV,CAAoB;AAAEC,EAAAA,WAAW,EAAE;AAAf,CAApB;AAEAL,MAAM,CAACM,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpC;AACAR,EAAAA,KAAK,CAACS,MAAN,CAAa,gBAAb,EAA+B,IAA/B;AACAR,EAAAA,SAAS,CAACS,KAAV,GAHoC,CAKpC;AACA;;AACA,MAAGJ,EAAE,CAACK,IAAH,CAAQC,YAAR,IAAwB,CAACZ,KAAK,CAACa,OAAN,CAAcC,OAA1C,EAAmD;AACjDN,IAAAA,IAAI,CAAC;AACHO,MAAAA,IAAI,EAAE,OADH,CAEH;;AAFG,KAAD,CAAJ;AAID,GALD,MAKO;AACLP,IAAAA,IAAI;AACL;AACF,CAfD;AAiBA,eAAeP,SAAf","sourcesContent":["import router from '.'\r\nimport store from '@/store/index'\r\nimport NProgress from 'nprogress'\r\nimport 'nprogress/nprogress.css'\r\nimport { from } from 'core-js/core/array'\r\nNProgress.configure({ showSpinner: false })\r\n\r\nrouter.beforeEach((to, form, next) => {\r\n  // trigger the related mutation to change state status\r\n  store.commit('setViewLoading', true)\r\n  NProgress.start()\r\n\r\n  // intercept route\r\n  // judge route authentication\r\n  if(to.meta.requiresAuth && !store.getters.isLogin) {\r\n    next({\r\n      name: 'login',\r\n      // query: { redirect: from.fullPath }\r\n    })\r\n  } else {\r\n    next()\r\n  }\r\n})\r\n\r\nexport default NProgress\r\n"]}]}