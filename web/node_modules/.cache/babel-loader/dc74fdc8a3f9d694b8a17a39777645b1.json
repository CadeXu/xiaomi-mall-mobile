{"remainingRequest":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/babel-loader/lib/index.js!/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/eslint-loader/index.js??ref--13-0!/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/api/index.js","dependencies":[{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/api/index.js","mtime":1637977732449},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CgovKioNCiAqIEVuY2Fwc3VsYXRlIHVybA0KICovCi8vIC8vIFRoZSBob3N0IGlzIGluIGRldmVsb3BtZW50Ci8vIGNvbnN0IGhvc3QgPSBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJCi8vIC8vIFRoZSBob3N0IGlzIG51bGwgYWZ0ZXIgb25saW5lCi8vIC8vIGNvbnN0IGhvc3QgPSAnJwovLyBjb25zdCB1cmwgPSB7Ci8vICAgZ2V0Q29kZTogJy9nZXRDb2RlJywKLy8gICBsb2dpbjogJy9sb2dpbicKLy8gfQovLyBPYmplY3Qua2V5cyh1cmwpLmZvckVhY2goa2V5ID0+IHsKLy8gICB1cmxba2V5XSA9IGhvc3QgKyB1cmxba2V5XQovLyB9KQovLyBleHBvcnQgZGVmYXVsdCB1cmwKCi8qKg0KICogSW1wb3J0IHJlbGF0ZWQgYXBpIGZ1bmN0aW9uIHdoZXJlIG5lZWRlZA0KICovCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7IC8vIGltcG9ydCBtb2NrIGZyb20gJ0AvbW9jaycgICAgLy8gaXQgd2lsbCBiZSBwYWNrYWdlZCB3aGVuIHByb2plY3QgcGFja2FnZQoKdmFyIGJhc2VVUkwgPSAnJzsKdmFyIF9wcm9jZXNzJGVudiA9IHByb2Nlc3MuZW52LAogICAgTk9ERV9FTlYgPSBfcHJvY2VzcyRlbnYuTk9ERV9FTlYsCiAgICBWVUVfQVBQX0FQSSA9IF9wcm9jZXNzJGVudi5WVUVfQVBQX0FQSTsKCmlmIChOT0RFX0VOViA9PSAnZGV2ZWxvcG1lbnQnIHx8IE5PREVfRU5WID09PSAncHJvZHVjdGlvbicgJiYgVlVFX0FQUF9BUEkgPT0gJ3JhcCcpIHsKICBiYXNlVVJMID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSTsKfQoKdmFyIGF4aW9zSW5zdGFuY2UgPSBheGlvcy5jcmVhdGUoewogIGJhc2VVUkw6IGJhc2VVUkwgLy8gdGltZW91dDogNTAwMCwKICAvLyBoZWFkZXJzOiB7J1gtQ3VzdG9tLUhlYWRlcic6ICdmb29iYXInfSwKICAvLyB3aXRoQ3JlZGVudGlhbHM6IHRydWUgLy8gc2VuZCBjb29raWVzIHdoZW4gY3Jvc3MtZG9tYWluIHJlcXVlc3RzCgp9KTsgLy8gRG8gc29tZXRoaW5nIGJlZm9yZSBzZW5kaW5nIHJlcXVlc3QKCmF4aW9zSW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICAvLyAvLyBBZGQgQXV0aG9yaXphdGlvbiBCZWFyZXIgVG9rZW4gaGVhZGVyIHRvIGV2ZXJ5IHJlcXVlc3QKICAvLyBpZih0b2tlbikgewogIC8vICAgY29uZmlnLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9ICdCZWFlcicgKyB0b2tlbgogIC8vIH0KICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsgLy8gRG8gc29tZXRoaW5nIGFmdGVyIHJlY2VpdmluZyByZXBvbnNlCgpheGlvc0luc3RhbmNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7Cn0sIGZ1bmN0aW9uIChlcnIpIHsKICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykgewogICAgLy8gcGFja2FnZSBzdGF0dXMKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpOwogIH0gZWxzZSB7CiAgICAvLyBkZXZlbG9wbWVudCBzdGF0dXMKICAgIC8vIHRha2UgQ29tbW9uSnMKICAgIHZhciBtb2NrID0gcmVxdWlyZSgnQC9tb2NrJyk7CgogICAgY29uc29sZS5lcnJvcihlcnIpOwogICAgcmV0dXJuIG1vY2suZ2V0Q29kZTsKICB9Cn0pOwpleHBvcnQgZGVmYXVsdCBheGlvc0luc3RhbmNlOw=="},{"version":3,"sources":["/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/api/index.js"],"names":["axios","baseURL","process","env","NODE_ENV","VUE_APP_API","VUE_APP_BASE_API","axiosInstance","create","interceptors","request","use","config","error","Promise","reject","response","data","err","mock","require","console","getCode"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;;AAEA;AACA;AACA;AACA,OAAOA,KAAP,MAAkB,OAAlB,C,CACA;;AAEA,IAAIC,OAAO,GAAG,EAAd;AACA,mBAAkCC,OAAO,CAACC,GAA1C;AAAA,IAAQC,QAAR,gBAAQA,QAAR;AAAA,IAAkBC,WAAlB,gBAAkBA,WAAlB;;AACA,IAAGD,QAAQ,IAAI,aAAZ,IAA8BA,QAAQ,KAAK,YAAb,IAA6BC,WAAW,IAAI,KAA7E,EAAqF;AACnFJ,EAAAA,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYG,gBAAtB;AACD;;AAED,IAAMC,aAAa,GAAGP,KAAK,CAACQ,MAAN,CAAa;AACjCP,EAAAA,OAAO,EAAEA,OADwB,CAEjC;AACA;AACA;;AAJiC,CAAb,CAAtB,C,CAOA;;AACAM,aAAa,CAACE,YAAd,CAA2BC,OAA3B,CAAmCC,GAAnC,CACE,UAAUC,MAAV,EAAkB;AAChB;AACA;AACA;AACA;AAEA,SAAOA,MAAP;AACD,CARH,EASE,UAAUC,KAAV,EAAiB;AACf,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAXH,E,CAcA;;AACAN,aAAa,CAACE,YAAd,CAA2BO,QAA3B,CAAoCL,GAApC,CAEE,UAAUK,QAAV,EAAoB;AAClB,SAAOA,QAAQ,CAACC,IAAhB;AACD,CAJH,EAKE,UAAUC,GAAV,EAAe;AACb,MAAGhB,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA5B,EAA0C;AACxC;AACA,WAAOU,OAAO,CAACC,MAAR,CAAeG,GAAf,CAAP;AACD,GAHD,MAGO;AACL;AACA;AACA,QAAIC,IAAI,GAAGC,OAAO,CAAC,QAAD,CAAlB;;AACAC,IAAAA,OAAO,CAACR,KAAR,CAAcK,GAAd;AACA,WAAOC,IAAI,CAACG,OAAZ;AACD;AACF,CAhBH;AAmBA,eAAef,aAAf","sourcesContent":["/**\r\n * Encapsulate url\r\n */\r\n// // The host is in development\r\n// const host = process.env.VUE_APP_BASE_API\r\n\r\n// // The host is null after online\r\n// // const host = ''\r\n\r\n// const url = {\r\n//   getCode: '/getCode',\r\n//   login: '/login'\r\n// }\r\n\r\n// Object.keys(url).forEach(key => {\r\n//   url[key] = host + url[key]\r\n// })\r\n\r\n// export default url\r\n\r\n/**\r\n * Import related api function where needed\r\n */\r\nimport axios from 'axios'\r\n// import mock from '@/mock'    // it will be packaged when project package\r\n\r\nlet baseURL = ''\r\nconst { NODE_ENV, VUE_APP_API } = process.env\r\nif(NODE_ENV == 'development' || (NODE_ENV === 'production' && VUE_APP_API == 'rap')) {\r\n  baseURL = process.env.VUE_APP_BASE_API\r\n}\r\n\r\nconst axiosInstance = axios.create({\r\n  baseURL: baseURL\r\n  // timeout: 5000,\r\n  // headers: {'X-Custom-Header': 'foobar'},\r\n  // withCredentials: true // send cookies when cross-domain requests\r\n})\r\n\r\n// Do something before sending request\r\naxiosInstance.interceptors.request.use(\r\n  function (config) {\r\n    // // Add Authorization Bearer Token header to every request\r\n    // if(token) {\r\n    //   config.headers['Authorization'] = 'Beaer' + token\r\n    // }\r\n\r\n    return config\r\n  },\r\n  function (error) {\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// Do something after receiving reponse\r\naxiosInstance.interceptors.response.use(\r\n\r\n  function (response) {\r\n    return response.data\r\n  },\r\n  function (err) {\r\n    if(process.env.NODE_ENV === 'production') {\r\n      // package status\r\n      return Promise.reject(err)\r\n    } else {\r\n      // development status\r\n      // take CommonJs\r\n      let mock = require('@/mock')\r\n      console.error(err)\r\n      return mock.getCode\r\n    }\r\n  }\r\n)\r\n\r\nexport default axiosInstance\r\n"]}]}