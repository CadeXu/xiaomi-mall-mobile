{"remainingRequest":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/babel-loader/lib/index.js!/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/views/MiAddress/MiAddressEdit.vue?vue&type=script&lang=js","dependencies":[{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/views/MiAddress/MiAddressEdit.vue","mtime":1637847564973},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0IE1pQWRkcmVzc0FsbCBmcm9tICdAL2NvbXBvbmVudHMvTWlBZGRyZXNzQWxsLnZ1ZSc7IC8vIGltcG9ydCB7IGFkZHJlc3NEZXRhaWwsIGFkZHJlc3NBZGQsIGFkZHJlc3NTYXZlIH0gZnJvbSAnQC9hcGkvYWRkcmVzcy5qcycKCmltcG9ydCBBZGRyZXNzIGZyb20gJ0AvYXBpL2FkZHJlc3NTZXJ2aWNlJzsKaW1wb3J0IERpYWxvZyBmcm9tICdAL2NvbXBvbmVudHMvZGlhbG9nJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIE1pQWRkcmVzc0FsbDogTWlBZGRyZXNzQWxsCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGl0bGU6ICcnLAogICAgICBzaG93UmVnaW9uczogZmFsc2UsCiAgICAgIGFkZHJlc3NJbmZvOiB7CiAgICAgICAgY29uc2lnbmVlOiAnJywKICAgICAgICB0ZWw6ICcnLAogICAgICAgIHByb3ZpbmNlOiAnJywKICAgICAgICBwcm92aW5jZV9pZDogJycsCiAgICAgICAgY2l0eTogJycsCiAgICAgICAgY2l0eV9pZDogJycsCiAgICAgICAgZGlzdHJpY3Q6ICcnLAogICAgICAgIGRpc3RyaWN0X2lkOiAnJywKICAgICAgICBhcmVhOiAnJywKICAgICAgICBhcmVhX2lkOiAnJywKICAgICAgICBhZGRyZXNzOiAnJywKICAgICAgICBpc19kZWZhdWx0OiBmYWxzZQogICAgICB9LAogICAgICB0ZWxwbGFjZWhvbGRlcjogJ+aJi+acuuWPtycKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgYWRkcmVzc1N0cjogZnVuY3Rpb24gYWRkcmVzc1N0cigpIHsKICAgICAgdmFyIGluZm8gPSB0aGlzLmFkZHJlc3NJbmZvOwogICAgICByZXR1cm4gIiIuY29uY2F0KGluZm8ucHJvdmluY2UsICIgIikuY29uY2F0KGluZm8uY2l0eSwgIiAiKS5jb25jYXQoaW5mby5kaXN0cmljdCwgIiAiKS5jb25jYXQoaW5mby5hcmVhKS50cmltKCk7CiAgICB9CiAgfSwKICBiZWZvcmVSb3V0ZUVudGVyOiBmdW5jdGlvbiBiZWZvcmVSb3V0ZUVudGVyKHRvLCBmcm9tLCBuZXh0KSB7CiAgICB2YXIgaWQgPSB0by5xdWVyeS5hZGRyZXNzX2lkOwoKICAgIGlmIChpZCkgewogICAgICAvLyBFZGl0CiAgICAgIGlmIChmcm9tLm5hbWUpIHsKICAgICAgICBBZGRyZXNzLmRldGFpbChpZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgIG5leHQoZnVuY3Rpb24gKHZtKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHZtLnNldEFkZHJlc3MocmVzKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmV4dChmdW5jdGlvbiAodm0pIHsKICAgICAgICAgIHJldHVybiB2bS5nZXRBZGRyZXNzKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIC8vIEFkZCBuZXcgb25lCiAgICAgIG5leHQoKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICBpZiAodGhpcy4kcm91dGUucXVlcnkuYWRkcmVzc19pZCkgewogICAgICAvLyBFZGl0CiAgICAgIHRoaXMudGl0bGUgPSAn57yW6L6R5Zyw5Z2AJzsKICAgIH0gZWxzZSB7CiAgICAgIC8vIEFkZCBuZXcgb25lCiAgICAgIHRoaXMudGl0bGUgPSAn5paw5bu65Zyw5Z2AJzsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRWaWV3TG9hZGluZycsIGZhbHNlKTsKICAgICAgdGhpcy4kTlByb2dyZXNzLmRvbmUoKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEFkZHJlc3M6IGZ1bmN0aW9uIGdldEFkZHJlc3MoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBBZGRyZXNzLmRldGFpbCh0aGlzLiRyb3V0ZS5xdWVyeS5hZGRyZXNzX2lkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICBfdGhpcy5zZXRBZGRyZXNzKHJlcyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzZXRBZGRyZXNzOiBmdW5jdGlvbiBzZXRBZGRyZXNzKHJlcykgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldFZpZXdMb2FkaW5nJywgZmFsc2UpOwogICAgICB0aGlzLiROUHJvZ3Jlc3MuZG9uZSgpOwogICAgICB2YXIgaW5mbyA9IHJlcy5kYXRhOwogICAgICBpbmZvLmlzX2RlZmF1bHQgPSBpbmZvLmlzX2RlZmF1bHQgPT09IDE7CiAgICAgIHRoaXMuYWRkcmVzc0luZm8gPSBpbmZvOwogICAgICB0aGlzLnRlbHBsYWNlaG9sZGVyID0gaW5mby50ZWw7CiAgICAgIHRoaXMuYWRkcmVzc0luZm8udGVsID0gJyc7CiAgICB9LAogICAgY2hhbmdlUmVnaW9uOiBmdW5jdGlvbiBjaGFuZ2VSZWdpb24ocmVnaW9uKSB7CiAgICAgIHRoaXMuYWRkcmVzc0luZm8gPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmFkZHJlc3NJbmZvLCByZWdpb24pOwogICAgfSwKICAgIHBvcHVwRGlhbG9nOiBmdW5jdGlvbiBwb3B1cERpYWxvZyhwcm9tcHRJbmZvKSB7CiAgICAgIERpYWxvZy5hbGVydCh7CiAgICAgICAgbWVzc2FnZTogcHJvbXB0SW5mbwogICAgICB9KTsKICAgIH0sCiAgICBzdWJtaXQ6IGZ1bmN0aW9uIHN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAvLyBWZXJpZnkKICAgICAgdmFyIGFpID0gdGhpcy5hZGRyZXNzSW5mbzsgLy8gdmVyaWZ5IGNvbnNpZ25lZQoKICAgICAgaWYgKCFhaS5jb25zaWduZWUpIHsKICAgICAgICAvLyBEaWFsb2cuYWxlcnQoewogICAgICAgIC8vICAgbWVzc2FnZTogJ+ivt+i+k+WFpeaUtui0p+S6uuWnk+WQjScKICAgICAgICAvLyB9KQogICAgICAgIHRoaXMucG9wdXBEaWFsb2coJ+ivt+i+k+WFpeaUtui0p+S6uuWnk+WQjScpOwogICAgICAgIHJldHVybjsKICAgICAgfSAvLyB2ZXJpZnkgdGVscGhvbmUKCgogICAgICB2YXIgcmVnID0gL14oKDFbMy05XVswLTldKStcZHs4fSkkLzsKCiAgICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5hZGRyZXNzX2lkKSB7CiAgICAgICAgaWYgKGFpLnRlbCAmJiAhcmVnLnRlc3QoYWkudGVsKSkgewogICAgICAgICAgLy8gRGlhbG9nLmFsZXJ0KHsKICAgICAgICAgIC8vICAgbWVzc2FnZTogJ+ivt+i+k+WFpTEx5L2N5omL5py65Y+356CBJwogICAgICAgICAgLy8gfSkKICAgICAgICAgIHRoaXMucG9wdXBEaWFsb2coJ+ivt+i+k+WFpTEx5L2N5omL5py65Y+356CBJyk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmICghYWkudGVsIHx8ICFyZWcudGVzdChhaS50ZWwpKSB7CiAgICAgICAgICAvLyBEaWFsb2cuYWxlcnQoewogICAgICAgICAgLy8gICBtZXNzYWdlOiAn6K+36L6T5YWlMTHkvY3miYvmnLrlj7fnoIEnCiAgICAgICAgICAvLyB9KQogICAgICAgICAgdGhpcy5wb3B1cERpYWxvZygn6K+36L6T5YWlMTHkvY3miYvmnLrlj7fnoIEnKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0gLy8gdmVyaWZ5IGFyZWEKCgogICAgICBpZiAoIXRoaXMuYWRkcmVzc1N0cikgewogICAgICAgIC8vIERpYWxvZy5hbGVydCh7CiAgICAgICAgLy8gICBtZXNzYWdlOiAn6K+36YCJ5oup5omA5Zyo5Zyw5Yy6JwogICAgICAgIC8vIH0pCiAgICAgICAgdGhpcy5wb3B1cERpYWxvZygn6K+36YCJ5oup5omA5Zyo5Zyw5Yy6Jyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIHZlcmlmeSBhZGRyZXNzIGRldGFpbAoKCiAgICAgIGlmICghYWkuYWRkcmVzcykgewogICAgICAgIC8vIERpYWxvZy5hbGVydCh7CiAgICAgICAgLy8gICBtZXNzYWdlOiAn6K+36L6T5YWl6K+m57uG5Zyw5Z2AJwogICAgICAgIC8vIH0pCiAgICAgICAgdGhpcy5wb3B1cERpYWxvZygn6K+36L6T5YWl6K+m57uG5Zyw5Z2AJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIHZlcmlmeSBhZGRyZXNzIGxlbmd0aAoKCiAgICAgIHZhciBsZW4gPSBhaS5hZGRyZXNzLmxlbmd0aDsKCiAgICAgIGlmIChsZW4gPCA1IHx8IGxlbiA+IDEyMCkgewogICAgICAgIC8vIERpYWxvZy5hbGVydCh7CiAgICAgICAgLy8gICBtZXNzYWdlOiAn5oqx5q2J77yM6K+m57uG5Zyw5Z2A5LiN6IO95bCR5LqONeS4quWtl++8jOS4jeiDveWkmuS6jjEyMOS4quWtlycKICAgICAgICAvLyB9KQogICAgICAgIHRoaXMucG9wdXBEaWFsb2coJ+aKseatie+8jOivpue7huWcsOWdgOS4jeiDveWwkeS6jjXkuKrlrZfvvIzkuI3og73lpJrkuo4xMjDkuKrlrZcnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuYWRkcmVzc0luZm8uaXNfZGVmYXVsdCA9IHRoaXMuYWRkcmVzc0luZm8uaXNfZGVmYXVsdCA/IDEgOiAyOwogICAgICB2YXIgYXBpID0gdGhpcy4kcm91dGUucXVlcnkuYWRkcmVzc19pZCA/ICdzYXZlJyA6ICdhZGQnOwogICAgICBBZGRyZXNzW2FwaV0odGhpcy5hZGRyZXNzSW5mbykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgX3RoaXMyLiRyb3V0ZXIuZ28oLTEpOwogICAgICAgIH0KICAgICAgfSk7IC8vIGlmKHRoaXMuJHJvdXRlLnF1ZXJ5LmFkZHJlc3NfaWQpIHsKICAgICAgLy8gICAvLyBFZGl0CiAgICAgIC8vICAgQWRkcmVzcy5zYXZlKHRoaXMuYWRkcmVzc0luZm8pLnRoZW4ocmVzID0+IHsKICAgICAgLy8gICAgIGlmKHJlcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAvLyAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpCiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgfSkKICAgICAgLy8gfSBlbHNlIHsKICAgICAgLy8gICAvLyBBZGQgbmV3IG9uZQogICAgICAvLyAgIEFkZHJlc3MuYWRkKHRoaXMuYWRkcmVzc0luZm8pLnRoZW4ocmVzID0+IHsKICAgICAgLy8gICAgIGlmKHJlcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAvLyAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpCiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgfSkKICAgICAgLy8gfQogICAgfQogIH0KfTs="},{"version":3,"sources":["/Volumes/HD/xiaoMi/FE/xiaomi-mall-mobile/src/views/MiAddress/MiAddressEdit.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"app-shell app-shell-bottom-navigation\">\n    <div class=\"app-view-wrapper\">\n\n      <MiTitle :title=\"title\" :show-search-icon=\"false\"/>\n\n      <div class=\"container app-view app-view-with-header\">\n        <div class=\"page-wrap\">\n          <div class=\"address-manager\">\n            <div class=\"address-manager-edit\">\n              <ul class=\"ui-list\">\n\n                <li class=\"ui-list-item\">\n                  <div class=\"label\">收货人：</div>\n                  <div class=\"ui-input\">\n                    <input\n                      v-model.trim=\"addressInfo.consignee\"\n                      placeholder=\"真实姓名\"\n                      name=\"consignee\"\n                      maxlength=\"15\"\n                      type=\"text\"\n                      autocomplete=\"off\"\n                    >\n                  </div>\n                </li>\n\n                <li class=\"ui-list-item\">\n                  <div class=\"label\">手机号码：</div>\n                  <div class=\"ui-input\">\n                    <input\n                      v-model.trim.number=\"addressInfo.tel\"\n                      :placeholder=\"telplaceholder\"\n                      name=\"tel\"\n                      maxlength=\"11\"\n                      id=\"tel\"\n                      type=\"tel\"\n                      autocomplete=\"off\"\n                    >\n                  </div>\n                </li>\n\n                <li class=\"ui-list-item\">\n                  <div class=\"label\">所在地区：</div>\n                  <div class=\"ui-input\" @click=\"showRegions=true\">\n                    <input\n                      :value=\"addressStr\"\n                      placeholder=\"省 市 区 街道信息\"\n                      name=\"pcd\"\n                      maxlength=\"20\"\n                      type=\"text\"\n                      readonly=\"readonly\"\n                    >\n                  </div>\n                </li>\n\n                <li class=\"ui-list-item\">\n                  <div class=\"label\">详细地址：</div>\n                  <div class=\"ui-input\">\n                    <input\n                      v-model.trim=\"addressInfo.address\"\n                      placeholder=\"详细地址\"\n                      id=\"address\"\n                      name=\"address\"\n                      maxlength=\"40\"\n                      type=\"text\"\n                      autocomplete=\"off\"\n                    >\n                  </div>\n                </li>\n\n                <li class=\"ui-list-item\">\n                  <div class=\"label\">设置为默认地址</div>\n                  <label class=\"ui-cell\">\n                    <input\n                      name=\"is_default\"\n                      type=\"checkbox\"\n                      v-model=\"addressInfo.is_default\"\n                    >\n                  </label>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"add\">\n          <a class=\"btn ui-button ui-button-active\" @click=\"submit\">\n            <span>保存地址</span>\n          </a>\n        </div>\n\n        <MiAddressAll v-model:value=\"showRegions\" @region=\"changeRegion\"/>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport MiAddressAll from '@/components/MiAddressAll.vue'\n// import { addressDetail, addressAdd, addressSave } from '@/api/address.js'\nimport Address from '@/api/addressService'\nimport Dialog from '@/components/dialog'\n\nexport default {\n  components: {\n    MiAddressAll\n  },\n  data() {\n    return {\n      title: '',\n      showRegions: false,\n      addressInfo: {\n        consignee: '',\n        tel: '',\n        province: '',\n        province_id: '',\n        city: '',\n        city_id: '',\n        district: '',\n        district_id: '',\n        area: '',\n        area_id: '',\n        address: '',\n        is_default: false\n      },\n      telplaceholder: '手机号'\n    }\n  },\n  computed: {\n    addressStr() {\n      let info = this.addressInfo\n      return `${info.province} ${info.city} ${info.district} ${info.area}`.trim()\n    }\n  },\n  beforeRouteEnter(to, from, next) {\n    let id = to.query.address_id\n    if(id) {\n      // Edit\n      if(from.name) {\n        Address.detail(id).then(res => {\n          if(res.status === 200) {\n            next(vm => vm.setAddress(res))\n          }\n        })\n      } else {\n        next(vm => vm.getAddress())\n      }\n    } else {\n      // Add new one\n      next()\n    }\n  },\n  created() {\n    if(this.$route.query.address_id) {\n      // Edit\n      this.title = '编辑地址'\n    } else {\n      // Add new one\n      this.title = '新建地址'\n      this.$store.commit('setViewLoading', false)\n      this.$NProgress.done()\n    }\n  },\n  methods: {\n    getAddress() {\n      Address.detail(this.$route.query.address_id).then(res => {\n        if(res.status === 200) {\n          this.setAddress(res)\n        }\n      })\n    },\n    setAddress(res) {\n      this.$store.commit('setViewLoading', false)\n      this.$NProgress.done()\n\n      let info = res.data\n      info.is_default = info.is_default === 1\n\n      this.addressInfo = info\n      this.telplaceholder = info.tel\n      this.addressInfo.tel = ''\n    },\n    changeRegion(region) {\n      this.addressInfo = Object.assign({}, this.addressInfo, region)\n    },\n    popupDialog(promptInfo) {\n      Dialog.alert({\n        message: promptInfo\n      })\n    },\n    submit() {\n      // Verify\n      let ai = this.addressInfo\n\n      // verify consignee\n      if(!ai.consignee) {\n        // Dialog.alert({\n        //   message: '请输入收货人姓名'\n        // })\n        this.popupDialog('请输入收货人姓名')\n        return\n      }\n\n      // verify telphone\n      const reg = /^((1[3-9][0-9])+\\d{8})$/\n      if(this.$route.query.address_id) {\n        if(ai.tel && !reg.test(ai.tel)) {\n          // Dialog.alert({\n          //   message: '请输入11位手机号码'\n          // })\n          this.popupDialog('请输入11位手机号码')\n          return\n        }\n      } else {\n        if(!ai.tel || !reg.test(ai.tel)) {\n          // Dialog.alert({\n          //   message: '请输入11位手机号码'\n          // })\n          this.popupDialog('请输入11位手机号码')\n          return\n        }\n      }\n\n      // verify area\n      if(!this.addressStr) {\n        // Dialog.alert({\n        //   message: '请选择所在地区'\n        // })\n        this.popupDialog('请选择所在地区')\n        return\n      }\n\n      // verify address detail\n      if(!ai.address) {\n        // Dialog.alert({\n        //   message: '请输入详细地址'\n        // })\n        this.popupDialog('请输入详细地址')\n        return\n      }\n\n      // verify address length\n      let len = ai.address.length\n      if(len < 5 || len > 120) {\n        // Dialog.alert({\n        //   message: '抱歉，详细地址不能少于5个字，不能多于120个字'\n        // })\n        this.popupDialog('抱歉，详细地址不能少于5个字，不能多于120个字')\n        return\n      }\n\n      this.addressInfo.is_default = this.addressInfo.is_default ? 1 : 2\n\n      let api = this.$route.query.address_id ? 'save' : 'add'\n      Address[api](this.addressInfo).then(res => {\n        if(res.status === 200) {\n          this.$router.go(-1)\n        }\n      })\n      // if(this.$route.query.address_id) {\n      //   // Edit\n      //   Address.save(this.addressInfo).then(res => {\n      //     if(res.status === 200) {\n      //       this.$router.go(-1)\n      //     }\n      //   })\n      // } else {\n      //   // Add new one\n      //   Address.add(this.addressInfo).then(res => {\n      //     if(res.status === 200) {\n      //       this.$router.go(-1)\n      //     }\n      //   })\n      // }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.address-manager {\n  .ui-list {\n    position: relative;\n\n    .ui-list-item {\n      border-bottom: 1px solid #f6f6f6;\n      font-size: 14px;\n      overflow: hidden;\n      background: #fff;\n      padding: 10px 15px;\n      display: flex;\n      display: -webkit-box;\n      box-align: center;\n      -webkit-box-align: center\n    }\n\n    .ui-input {\n      border: 0;\n      box-flex: 1;\n      overflow: hidden;\n      font-size: 12px;\n      width: 100%;\n\n      input {\n      padding: 9px 15px;\n      width: 100%;\n      -webkit-box-flex: 1;\n      box-sizing: border-box;\n      font-size: 14px;\n      border: 0;\n      text-decoration: none;\n      outline: 0;\n      vertical-align: middle;\n    }\n    }\n\n    .ui-cell {\n      display: block;\n      box-flex: 1;\n      -webkit-box-flex: 1;\n      width: 100%;\n      text-align: right;\n    }\n  }\n}\n\n[type=checkbox], [type=radio] {\n  box-sizing: border-box;\n  padding: 0;\n}\n\n.add {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: #fff;\n  z-index: 1;\n\n  span {\n    font-size: 15px;\n    color: #fff;\n  }\n}\n</style>\n"],"sourceRoot":""}]}