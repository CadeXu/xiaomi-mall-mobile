{"version":3,"sources":["webpack:///./src/views/MiList.vue","webpack:///./src/views/MiList.vue?0a53","webpack:///./src/views/MiList.vue?e15b"],"names":["class","title","commodityList","list","tag","key","product_id","to","src","img_url","lazy","icon_img","name","product_desc","price","components","MiRecommend","MiTitle","data","beforeRouteEnter","from","next","category_id","params","id","then","res","code","vm","setList","fetchCommodityById","destoryed","this","$NProgress","remove","methods","done","forEach","item","sanitize","$store","commit","$route","__exports__","render"],"mappings":"kLACOA,MAAM,a,GAQJA,MAAM,oB,GACJA,MAAM,sD,GASFA,MAAM,qB,uBAYJA,MAAM,4B,GACJA,MAAM,kB,GAGNA,MAAM,mB,mBAGNA,MAAM,yB,GACHA,MAAM,S,kLAtC1B,eAkDM,MAlDN,EAkDM,CAjDJ,eAAwB,GAAdC,MAAM,SAOhB,eAwCM,MAxCN,EAwCM,CAvCJ,eAsCM,MAtCN,EAsCM,CArCJ,eAkCK,Y,mBAjCH,eAgCc,2BA9BG,EAAAC,eAAa,SAArBC,G,wBAFT,eAgCc,GA/BZC,IAAI,KAEHC,IAAKF,EAAKG,WACVC,GAAE,0BAAgCJ,EAAKG,aACxCN,MAAM,6B,yBAEN,iBAWI,CAXJ,eAWI,IAXJ,EAWI,CAVF,eAGE,OAFCQ,IAAKL,EAAKM,QACXC,KAAK,U,UAEP,eAKO,aAJL,eAGE,OAFCF,IAAKL,EAAKQ,SACXD,KAAK,U,cAIX,eAYM,MAZN,EAYM,CAXJ,eAEM,MAFN,EAEM,CADJ,eAAoB,wBAAfP,EAAKS,MAAI,KAEhB,eAEM,MAFN,EAEM,CADJ,eAAgC,KAA7B,UAAQT,EAAKU,c,YAElB,eAIM,MAJN,EAIM,CAHJ,eAEO,OAFP,EAAoB,KACZ,eAAEV,EAAKW,OAAK,W,6BAO5B,eAAgB,OAGpB,eAAc,K,gHAaH,GACbC,WAAY,CAEVC,cAAA,KACAC,UAAA,MAGFC,KAPa,WAQX,MAAO,CACLhB,cAAe,OAInBiB,iBAba,SAaIZ,EAAIa,EAAMC,GACtBD,EAAKR,KACN,eAAiB,CACfU,YAAaf,EAAGgB,OAAOC,KACtBC,MAAK,SAAAC,GACU,MAAbA,EAAIC,MACLN,GAAK,SAAAO,GAAC,OAAKA,EAAGC,QAAQH,EAAIR,KAAKf,YAInCkB,GAAK,SAAAO,GAAC,OAAKA,EAAGE,yBAQlBC,UA/Ba,WAgCXC,KAAKC,WAAWC,UAElBC,QAAS,CACPN,QADO,SACC1B,GACN6B,KAAKC,WAAWG,OAChBjC,EAAKkC,SAAQ,SAAAC,GACXA,EAAKzB,aAAe,IAAU0B,SAASD,EAAKzB,iBAE9CmB,KAAK9B,cAAgBC,EAGrB6B,KAAKQ,OAAOC,OAAO,kBAAkB,IAEjCX,mBAXC,WAWoB,wKACnB,eAAiB,CACrBR,YAAa,EAAKoB,OAAOnB,OAAOC,KAC/BC,MAAK,SAAAC,GACU,MAAbA,EAAIC,MACL,EAAKE,QAAQH,EAAIR,KAAKf,SALD,gD,iCCrG/B,MAAMwC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E,gB,yDCTf","file":"js/list.a98c086b.js","sourcesContent":["<template>\r\n  <div class=\"app-shell\">\r\n    <mi-title title=\"商品列表\"/>\r\n\r\n    <!-- <div v-if=\"loading\">\r\n      <span>Loading . . .</span>\r\n    </div> -->\r\n\r\n    <!-- <div v-else class=\"app-view-wrapper\"> -->\r\n    <div class=\"app-view-wrapper\">\r\n      <div class=\"app-view app-view-with-header app-view-with-footer\">\r\n        <ol>\r\n          <router-link\r\n            tag=\"li\"\r\n            v-for=\"list in commodityList\"\r\n            :key=\"list.product_id\"\r\n            :to=\"{name: 'detail', params: {id: list.product_id}}\"\r\n            class=\"item ui-flex align-center\"\r\n          >\r\n            <a class=\"item-img exposure\">\r\n              <img\r\n                :src=\"list.img_url\"\r\n                lazy=\"loaded\"\r\n              />\r\n              <span>\r\n                <img\r\n                  :src=\"list.icon_img\"\r\n                  lazy=\"loaded\"\r\n                />\r\n              </span>\r\n            </a>\r\n            <div class=\"item-intro box-flex flex\">\r\n              <div class=\"item-name flex\">\r\n                <p>{{list.name}}</p>\r\n              </div>\r\n              <div class=\"item-brief flex\">\r\n                <p v-html=\"list.product_desc\" />\r\n              </div>\r\n              <div class=\"item-intro-price flex\">\r\n                <span class=\"price\">\r\n                  &nbsp;{{list.price}}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </router-link>\r\n        </ol>\r\n\r\n        <mi-recommend />\r\n      </div>\r\n    </div>\r\n    <page-footer/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getCommodityById } from '@/api/category'\r\n// import MiSearch from '@/components/MiTitle.vue'\r\n// import bus from '@/util/bus.js'\r\nimport MiRecommend from '@/components/MiRecommend.vue'\r\nimport DOMPurify from 'dompurify'\r\nimport MiTitle from '@/components/MiTitle.vue'\r\n// import PageFooter from '@/components/PageFooter.vue'\r\n\r\nexport default {\r\n  components: {\r\n    // MiSearch,\r\n    MiRecommend,\r\n    MiTitle\r\n    // PageFooter\r\n  },\r\n  data() {\r\n    return {\r\n      commodityList: null\r\n      // loading: true\r\n    }\r\n  },\r\n  beforeRouteEnter(to, from, next) {\r\n    if(from.name) {\r\n      getCommodityById({\r\n        category_id: to.params.id\r\n      }).then(res => {\r\n        if(res.code === 200) {\r\n          next(vm => vm.setList(res.data.list))\r\n        }\r\n      })\r\n    } else {\r\n      next(vm => vm.fetchCommodityById())\r\n    }\r\n  },\r\n  // created() {\r\n  //   this.fetchCommodityById({\r\n  //     category_id: this.$route.params.id\r\n  //   })\r\n  // },\r\n  destoryed() {\r\n    this.$NProgress.remove()\r\n  },\r\n  methods: {\r\n    setList(list) {\r\n      this.$NProgress.done()\r\n      list.forEach(item => {\r\n        item.product_desc = DOMPurify.sanitize(item.product_desc)\r\n      })\r\n      this.commodityList = list\r\n      // this.loading = false\r\n      // bus.emit('loading', false)\r\n      this.$store.commit('setViewLoading', false)\r\n    },\r\n    async fetchCommodityById() {\r\n      await getCommodityById({\r\n        category_id: this.$route.params.id\r\n      }).then(res => {\r\n        if(res.code === 200) {\r\n          this.setList(res.data.list)\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.item:not(:last-child) {\r\n  padding: 0 0 3px;\r\n  position: relative;\r\n}\r\n\r\n.item:not(:last-child)::after {\r\n  content: \"\";\r\n  position: absolute;\r\n  bottom: 1px;\r\n  left: 1px;\r\n  right: 1px;\r\n  border-bottom: 1px solid #e4e4e4;\r\n}\r\n\r\n.item-img {\r\n  position: relative;\r\n  width: 156px;\r\n  height: 156px;\r\n  text-align: center;\r\n  display: block;\r\n\r\n  img {\r\n    width: auto;\r\n    height: 100%;\r\n  }\r\n\r\n  span {\r\n    display: block;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 78px;\r\n  }\r\n}\r\n\r\n.item-img span img {\r\n  width: auto;\r\n  height: 16px;\r\n}\r\n\r\n.item-intro {\r\n  display: block;\r\n  padding: 0 16px 4px;\r\n  width: 185px;\r\n  box-sizing: border-box;\r\n  text-align: left;\r\n\r\n  .item-name {\r\n    font-size: 16px;\r\n    color: rgba(0,0,0,.87);\r\n    margin-bottom: 8px;\r\n  }\r\n\r\n  .item-brief {\r\n    font-size: 12px;\r\n    color: rgba(0,0,0,.54);\r\n    margin-bottom: 8px;\r\n    line-height: 16px;\r\n    height: 32px;\r\n    overflow: hidden;\r\n\r\n    p {\r\n      text-overflow: ellipsis;\r\n      overflow: hidden;\r\n      -webkit-line-clamp: 2;\r\n      -webkit-box-orient: vertical;\r\n      word-break: break-all;\r\n    }\r\n  }\r\n\r\n  span {\r\n    color: #ff6000;\r\n  }\r\n}\r\n\r\n// .price {\r\n//   position: relative;\r\n//   padding-left: 8px;\r\n//   line-height: 18px;\r\n// }\r\n\r\n// .price:before {\r\n//   content: \"\\A5\";\r\n//   position: absolute;\r\n//   left: 0;\r\n//   top: 0;\r\n//   font-size: 16px;\r\n//   text-decoration: none;\r\n// }\r\n</style>\r\n","import { render } from \"./MiList.vue?vue&type=template&id=a514c5bc&scoped=true\"\nimport script from \"./MiList.vue?vue&type=script&lang=js\"\nexport * from \"./MiList.vue?vue&type=script&lang=js\"\n\nimport \"./MiList.vue?vue&type=style&index=0&id=a514c5bc&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/apple/xiaomi-mall-mobile/web/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a514c5bc\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./MiList.vue?vue&type=style&index=0&id=a514c5bc&lang=scss&scoped=true\""],"sourceRoot":""}