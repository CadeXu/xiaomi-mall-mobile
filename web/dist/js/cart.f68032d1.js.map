{"version":3,"sources":["webpack:///./src/components/MiPop.vue","webpack:///./src/components/MiPop.vue?f8d8","webpack:///./node_modules/core-js/modules/es.array.splice.js","webpack:///./node_modules/core-js/modules/es.array.find-index.js","webpack:///./src/components/MiPop.vue?64d4","webpack:///./src/views/MiCart/MiCart.scss?66ec","webpack:///./src/views/MiCart/MiCart.vue","webpack:///./src/mock/cart.js","webpack:///./src/views/MiCart/MiCart.js","webpack:///./src/views/MiCart/MiCart.vue?59ff"],"names":["class","overlayClass","style","overlayStyle","clickOverlay","value","overlay","name","transition","close","props","type","Boolean","required","default","String","Object","closeOnClickOverlay","methods","this","$emit","__exports__","render","$","global","toAbsoluteIndex","toIntegerOrInfinity","lengthOfArrayLike","toObject","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","TypeError","max","Math","min","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","target","proto","forced","splice","start","deleteCount","insertCount","actualDeleteCount","A","k","from","to","O","len","actualStart","argumentsLength","arguments","length","$findIndex","findIndex","addToUnscopables","FIND_INDEX","SKIPS_HOLES","Array","callbackfn","undefined","title","isLogin","cartList","item","index","key","goodsId","sel_status","cartSelect","parent_goodsId","src","image_url","lazy","product_name","price","isService","num","cartEdit","buy_limit","cartDelete","serviceList","service","service_goods_id","toCartSelService","service_image_url","service_short_name","service_price","totalNumber","totalPrice","showServiceInfo","close-on-click-overlay","overlay-style","serviceInfoList","list","type_name","service_info","href","service_url","selectService","serviceSelectMessage","serviceSelectSubmit","Mock","mock","response","components","MiPop","MiRecommend","data","serviceSelectCashArr","serviceSelectCashItem","watch","deep","handler","val","all","forEach","setCartCount","computed","mapGetters","beforeRouteEnter","next","getCartList","then","res","vm","setCartList","fetchCartList","mapMutations","$NProgress","done","$store","commit","items","JSON","parse","stringify","serviceSelect","info","push","giftSelect","gift","actId","isGift","console","log","selectGoods","select_status","status","subIndex","consumption","editCart","arr","curList","cashItem","selectServices","serviceListIndex","deleteGoods","curGood","find"],"mappings":"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","file":"js/cart.f68032d1.js","sourcesContent":["<template>\n  <div class=\"insurance-pop\">\n    <div\n      v-show=\"value && overlay\"\n      :class=\"overlayClass\"\n      :style=\"overlayStyle\"\n      @click=\"clickOverlay\"\n    />\n\n    <transition :name=\"transition\">\n      <div\n        v-show=\"value\"\n        class=\"pop\"\n      >\n        <div\n          class=\"close\"\n          @click=\"close\"\n        >\n          <i class=\"image-icons iconfont icon-icon-close\" />\n        </div>\n\n        <slot></slot>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    value: {\n      type: Boolean,\n      required: true,\n      default: false\n    },\n    overlay: {\n      type: Boolean,\n      default: true\n    },\n    overlayClass: {\n      type: String,\n      default: 'ui-mask'\n    },\n    overlayStyle: {\n      type: Object\n    },\n    closeOnClickOverlay: {\n      type: Boolean,\n      default: false\n    },\n    transition: {\n      type: String,\n      default: 'bottom-up'\n    }\n  },\n  methods: {\n    close() {\n      this.$emit('update:value', false)\n    },\n    clickOverlay() {\n      if(!this.closeOnClickOverlay) return\n      this.close()\n    }\n  }\n}\n</script>\n\n<style scoped>\n.bottom-up-enter-active, .bottom-up-leave-active {\n  transition: all .5s;\n}\n.bottom-up-enter {\n  transform: translateY(100%);\n}\n.bottom-up-enter-to, .bottom-up-leave {\n  transform: translateX(0);\n}\n.bottom-up-leave-to {\n  transform: translateY(100%);\n}\n</style>\n","import { render } from \"./MiPop.vue?vue&type=template&id=f4261d42&scoped=true\"\nimport script from \"./MiPop.vue?vue&type=script&lang=js\"\nexport * from \"./MiPop.vue?vue&type=script&lang=js\"\n\nimport \"./MiPop.vue?vue&type=style&index=0&id=f4261d42&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/apple/xiaomi-mall-mobile/web/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f4261d42\"]])\n\nexport default __exports__","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\n\nvar TypeError = global.TypeError;\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toIntegerOrInfinity(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.es/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./MiPop.vue?vue&type=style&index=0&id=f4261d42&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!./MiCart.scss?vue&type=style&index=0&id=23236370&lang=scss&scoped=true\"","<template>\n  <div class=\"app-shell app-shell-bottom-navigation\">\n    <mi-title title=\"购物车\"/>\n    <div class=\"app-view-wrapper\">\n      <div class=\"container fluid app-view app-view-with-header app-view-with-footer\">\n        <div class=\"page-wrap\">\n          <div v-if=\"!isLogin\" class=\"nologin\">\n            <router-link\n              class=\"box-flex align-center justify-space-between\"\n              :to=\"{name: 'login', query: {redirect: '/cart'}}\"\n            >\n              <span class=\"flex\"> 登录后享受更多优惠 </span>\n              <em class=\"flex\"> 去登录 </em>\n            </router-link>\n          </div>\n\n          <div\n            v-if=\"cartList && cartList.length\"\n            class=\"cart-list\"\n          >\n            <ol>\n              <li\n                v-for=\"(item, index) in cartList\"\n                :key=\"item.goodsId\"\n                class=\"item\"\n              >\n                <div class=\"ui-flex align-center justify-center\">\n                  <div class=\"choose flex\"\n                    :class=\"{checked: item.sel_status}\"\n                    @click=\"cartSelect(item, index)\">\n                    <i\n                      v-if=\"!item.parent_goodsId\"\n                      class=\"iconfont\"\n                      :class=\"item.sel_status ? 'icon-roundcheckfill' : 'icon-round'\"\n                    />\n                  </div>\n\n                  <router-link\n                    :to=\"{name: 'detail', params: { id: item.goodsId }}\"\n                    class=\"imgProduct flex\"\n                  >\n                    <img :src=\"item.image_url\" lazy=\"loaded\">\n                  </router-link>\n\n                  <div class=\"info flex\">\n                    <p class=\"name\">\n                      <span class=\"flex\">{{item.product_name}}</span>\n                    </p>\n\n                    <div\n                      v-if=\"item.price\"\n                      class=\"price-without\"\n                    >\n                      <span>售价：</span>\n                      <span>{{item.price}} 元</span>\n                      <template v-if=\"item.isService\">\n                        <span>合计：</span>\n                        <span>{{item.price * item.num}} 元</span>\n                      </template>\n                    </div>\n\n                    <div class=\"num\">\n                      <div class=\"xm-input-number\">\n                        <div\n                          class=\"input-sub\"\n                          :class=\"{'active': item.num > 1 && item.price}\"\n                          @click=\"cartEdit(item, -1)\"\n                        >\n                          <i class=\"iconfont icon-reduce3\"></i>\n                        </div>\n\n                        <div class=\"input-num\">\n                          <span>{{item.num}}</span>\n                        </div>\n\n                        <div\n                          class=\"input-add\"\n                          :class=\"{'active': item.num < item.buy_limit && item.price}\"\n                          @click=\"cartEdit(item, 1)\"\n                        >\n                          <i class=\"iconfont icon-add\"></i>\n                        </div>\n                      </div>\n                      <div\n                        v-if=\"item.price\"\n                        class=\"delete\"\n                        @click=\"cartDelete(item, index)\"\n                      >\n                        <i class=\"iconfont icon-delete\"></i>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div\n                  v-if=\"item.sel_status\"\n                  class=\"append flex\"\n                >\n                  <div\n                    v-for=\"service in item.serviceList\"\n                    :key=\"service.service_goods_id\"\n                    @click=\"toCartSelService(item)\">\n                    <div class=\"insurance\">\n                      <div class=\"i1\">\n                        <img :src=\"service.service_image_url\" lazy=\"loaded\">\n                      </div>\n\n                      <div class=\"i2\">\n                        <span> {{service.service_short_name}} {{service.service_price}}元</span>\n                      </div>\n\n                      <div class=\"i3\">\n                        <span>选购</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </li>\n            </ol>\n\n            <div class=\"point-box\">\n              <div class=\"point\">\n                <span class=\"act act_gift\">赠品</span>\n                <span>赠小米蓝牙耳机</span>\n              </div>\n\n              <div class=\"point\">\n                <span class=\"act act_special\">活动</span>\n                <span>下单立减100元</span>\n              </div>\n\n              <div class=\"point\" style=\"display: none;\">\n                <span class=\"act act_special\">包邮</span>\n                <span></span>\n              </div>\n\n              <div class=\"point\">\n                <p>温馨提示：产品是否购买成功，以最终下单为准，请尽快结算</p>\n              </div>\n            </div>\n            <!-- <div class=\"ui-line\"></div> -->\n          </div>\n\n          <div v-else class=\"noitems\">\n            <router-link :to=\"{name: 'home'}\" class=\"router-link-active\">\n              <span>购物车还是空的</span>\n              <em>去逛逛</em>\n            </router-link>\n          </div>\n\n          <MiRecommend />\n        </div>\n\n        <div class=\"bottom-submit box-flex\">\n          <div class=\"price-box flex\">\n            <span>共 {{totalNumber}} 件 金额：</span>\n            <br>\n            <strong>{{totalPrice}}</strong>\n            <span>元</span>\n          </div>\n\n          <router-link\n            :to=\"{name: 'category'}\"\n            class=\"btn disable black flex\"\n          >\n            继续购物\n          </router-link>\n\n          <a class=\"btn flex\">去结算</a>\n        </div>\n\n        <MiPop\n          v-model:value=\"showServiceInfo\"\n          :close-on-click-overlay=\"true\"\n          :overlay-style=\"{'background-color': 'rgba(0,0,0,.4)'}\"\n        >\n          <div class=\"h1\">购买服务</div>\n\n          <div class=\"max5\">\n            <div\n              v-for=\"list in serviceInfoList\"\n              :key=\"list.type_name\"\n              class=\"border-top-1px mt2x\">\n              <div\n                v-if=\"list.service_info.length\"\n                class=\"option-title pt32\"\n              >\n                {{list.type_name}}\n                <a :href=\"list.service_url\" class=\"service-url\">\n                  <i class=\"iconfont icon-question\"></i>\n                </a>\n              </div>\n\n              <div\n                v-for=\"service in list.service_info\"\n                :key=\"service.service_goods_id\"\n                class=\"options-group\"\n                @click=\"selectService(list, service)\"\n              >\n                <div class=\"align-center justify-start layout wrap\">\n                  <div\n                    class=\"option-item border-1px\"\n                    :class=\"{'on':service.sel_status}\"\n                  >\n                    <p>{{service.service_short_name}}  {{service.service_price}}元</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"btn-bottom align-center justify-canter layout\">\n            <div class=\"flex\">{{serviceSelectMessage}}</div>\n            <div class=\"btn\" @click=\"serviceSelectSubmit\">确定</div>\n          </div>\n        </MiPop>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script src=\"./MiCart.js\"></script>\n\n<style lang=\"scss\" scoped src=\"./MiCart.scss\"></style>\n","/* eslint-disable */\nimport Mock from 'mockjs'\n\nlet cartList = Mock.mock({\n  \"status\": 200,\n  \"message\": \"ok\",\n  \"description\": \"success\",\n  \"data\": {\n    \"items\": [\n      {\n        \"goodsId\": \"2181100015\",\n        \"image_url\": \"//i1.mifile.cn/a1/pms_1522318330.86967810!180x1800.jpg\",\n        \"buy_limit\": 5,\n        \"sel_status\": 0, // 0 -cancel 1-checked/selected\n        \"product_name\": \"小米电视4C 50英寸 黑色 50英寸\",\n        \"price\": 1999,\n        \"num\": 1,    // 2 - add, 1 - subtraction\n        \"service_info\": [\n          {\n            \"can_multi\": false,\n            \"type_name\": \"会员服务\",\n            \"service_url\": \"//cdn.cnbj0.fds.api.mi-img.com/b2c-data-mishop/72d5bc482304.html\",\n            \"service_info\": [\n              {\n                \"service_goods_id\": \"2182000044\",\n                \"service_image_url\": \"//i1.mifile.cn/a1/T1TexjBsKT1RXrhCrK.jpg\",\n                \"service_short_name\": \"影视会员年卡\",\n                \"service_price\": 299,\n                \"sel_status\": 0,\n                \"num\": 1\n              }\n            ]\n          },\n          {\n            \"can_multi\": false,\n            \"type_name\": \"安装服务\",\n            \"service_url\": \"//cdn.cnbj0.fds.api.mi-img.com/b2c-data-mishop/a739137749cc.html\",\n            \"service_info\": [\n              {\n                \"service_goods_id\": \"81000020071102471X\",\n                \"service_image_url\": \"//i1.mifile.cn/a1/pms_1523433952.48583019.jpg\",\n                \"service_short_name\": \"电视座装服务\",\n                \"service_price\": 80,\n                \"sel_status\": 0,\n                \"num\": 1\n              },\n              {\n                \"service_goods_id\": \"990000197006122668\",\n                \"service_image_url\": \"//i1.mifile.cn/a1/pms_1523434179.92866217.jpg\",\n                \"service_short_name\": \"电视挂装服务\",\n                \"service_price\": 190,\n                \"sel_status\": 0,\n                \"num\": 1\n              }\n            ]\n          }\n        ]\n      },\n      {\n        \"goodsId\": \"630000199612247492\",\n        \"image_url\": \"//i1.mifile.cn/a1/pms_1527060176.9632373!180x1800.jpg\",\n        \"buy_limit\": 5,\n        \"sel_status\": 1,\n        \"price\": 1299,\n        \"product_name\": \"小米电视4X 55英寸 黑色 55英寸\",\n        \"num\": 1,\n        \"service_info\": [\n          {\n            \"can_multi\": false,\n            \"type_name\": \"会员服务\",\n            \"service_url\": \"//cdn.cnbj0.fds.api.mi-img.com/b2c-data-mishop/72d5bc482304.html\",\n            \"service_info\": [\n              {\n                \"service_goods_id\": \"2182000044\",\n                \"service_image_url\": \"//i1.mifile.cn/a1/T1TexjBsKT1RXrhCrK.jpg\",\n                \"service_short_name\": \"影视会员年卡\",\n                \"service_price\": 299,\n                \"sel_status\": 0,\n                \"num\": 1\n              }\n            ]\n          },\n          {\n            \"can_multi\": false,\n            \"type_name\": \"安装服务\",\n            \"service_url\": \"//cdn.cnbj0.fds.api.mi-img.com/b2c-data-mishop/a739137749cc.html\",\n            \"service_info\": [\n              {\n                \"service_goods_id\": \"81000020071102471X\",\n                \"service_image_url\": \"//i1.mifile.cn/a1/pms_1523433952.48583019.jpg\",\n                \"service_short_name\": \"电视座装服务\",\n                \"service_price\": 80,\n                \"sel_status\": 1,\n                \"num\": 1\n              },\n              {\n                \"service_goods_id\": \"990000197006122668\",\n                \"service_image_url\": \"//i1.mifile.cn/a1/pms_1523434179.92866217.jpg\",\n                \"service_short_name\": \"电视挂装服务\",\n                \"service_price\": 190,\n                \"sel_status\": 0,\n                \"num\": 1\n              }\n            ]\n          }\n        ]\n      },\n      {\n        \"goodsId\": \"330000197302099463\",\n        \"image_url\": \"//i1.mifile.cn/a1/pms_1524621084.0039673!180x1800.jpg\",\n        \"buy_limit\": 2,\n        \"sel_status\": 0,\n        \"product_name\": \"小米6X 全网通版 4GB内存 64GB 流沙金\",\n        \"price\": 1599,\n        \"num\": 1,\n        \"service_info\": [\n          {\n            \"can_multi\": false,\n            \"type_name\": \"保障服务\",\n            \"service_url\": \"//cdn.cnbj0.fds.api.mi-img.com/b2c-data-mishop/4a15d767c1fe.html\",\n            \"service_info\": [\n              {\n                \"service_goods_id\": \"650000197903152244\",\n                \"service_image_url\": \"//i1.mifile.cn/a1/pms_1524032278.1757986.jpg\",\n                \"service_short_name\": \"意外保障服务\",\n                \"service_price\": 179,\n                \"sel_status\": 0,\n                \"num\": 1\n              }\n            ]\n          }\n        ],\n        \"gift\": [{\n          \"product_name\": \"小米蓝牙耳机青春版 白色\",\n          \"image_url\": \"//i1.mifile.cn/a1/pms_1478248761.54944181.jpg\",\n          \"actId\": \"820000200604066342\"\n        }]\n      },\n      {\n        \"goodsId\": \"340000198205095723\",\n        \"image_url\": \"//i1.mifile.cn/a1/pms_1524621078.90015819!180x1800.jpg\",\n        \"buy_limit\": 2,\n        \"sel_status\": 1,\n        \"product_name\": \"\",\n        \"price\": 1599,\n        \"num\": 2,\n        \"service_info\": [\n          {\n            \"can_multi\": false,\n            \"type_name\": \"保障服务\",\n            \"service_url\": \"//cdn.cnbj0.fds.api.mi-img.com/b2c-data-mishop/4a15d767c1fe.html\",\n            \"service_info\": [\n              {\n                \"service_goods_id\": \"650000197903152244\",\n                \"service_image_url\": \"//i1.mifile.cn/a1/pms_1524032278.1757986.jpg\",\n                \"service_short_name\": \"意外保障服务\",\n                \"service_price\": 179,\n                \"sel_status\": 0,\n                \"num\": 1\n              }\n            ]\n          }\n        ],\n        \"gift\": [{\n          \"product_name\": \"小米蓝牙耳机青春版 白色\",\n          \"image_url\": \"//i1.mifile.cn/a1/pms_1478248761.54944181.jpg\",\n          \"actId\": \"460000199402246828\"\n        }]\n      }\n    ]\n  }\n})\n\nlet response = {\n  \"code\": 0,\n  \"description\": \"success\",\n  \"result\": \"ok\"\n}\n\nlet cartSelect = Mock.mock(response)\nlet cartEdit = Mock.mock(response)\nlet cartAdd = Mock.mock(response)\nlet cartDelete = Mock.mock(response)\nlet cartSelService = Mock.mock(response)\n\nexport {\n  cartList,\n  cartSelect,\n  cartEdit,\n  cartAdd,\n  cartDelete,\n  cartSelService\n}\n","import { cartList } from '@/mock/cart.js'\n// import MiSearch from '@/components/MiTitle.vue'\nimport MiPop from '@/components/MiPop.vue'\nimport MiRecommend from '@/components/MiRecommend.vue'\nimport {\n  getCartList,\n  selectGoods,\n  selectServices,\n  editCart,\n  // addGoods,\n  deleteGoods\n} from '@/api/cart'\nimport { mapGetters, mapMutations } from 'vuex'\n\nexport default {\n  components: {\n    // MiSearch,\n    MiPop,\n    MiRecommend\n  },\n  data() {\n    return {\n      cartList: null,\n      serviceInfoList: null, // Currently. service list dose not be selected\n      showServiceInfo: false,\n      serviceSelectMessage: '请选择服务类型',\n      serviceSelectCashArr: [],\n      serviceSelectCashItem: null, // Current, selected service object in popup\n      totalNumber: 0,\n      totalPrice: 0\n    }\n  },\n  watch: {\n    cartList: {\n      deep: true,\n      handler(val) {\n        let all = 0\n        let num = 0\n        let price = 0\n        val.forEach(list => {\n          if(list.sel_status) {\n            num += list.num\n            if(list.price) {\n              price += list.num * list.price\n            }\n          }\n          all += list.num\n        })\n\n        this.totalNumber = num\n        this.totalPrice = price\n        this.setCartCount(all)\n      }\n    }\n  },\n  computed: {\n    ...mapGetters(['isLogin'])\n  },\n  beforeRouteEnter(to, from, next) {\n    if(from.name) {\n      getCartList().then(res => {\n        next(vm => vm.setCartList(res))\n      })\n    } else {\n      next(vm => vm.fetchCartList())\n    }\n  },\n  methods: {\n    ...mapMutations({\n      setCartCount: 'cart/setCount'\n    }),\n    fetchCartList() {\n      getCartList().then(res => {\n        this.setCartList(res)\n      })\n    },\n    setCartList(res) {\n      this.$NProgress.done()\n      this.$store.commit('setViewLoading', false)\n      /**\n       * get data from remote\n       */\n      // this.cartList = res.data.items\n\n      /**\n       * get data from mock\n       */\n      let items = JSON.parse(JSON.stringify(cartList)).data.items\n\n      /**\n       * Deal serivce\n       * default service, services which need to select\n       */\n      // the selected service of selected goods\n      // like: after have selected some goods, it will select some necessary service by default\n      let serviceSelect = []\n      items.forEach(item => {\n        if(item.service_info) {\n          // put items -> service_info -> service_info in this variable\n          // meanwhile keep the service_info is common service\n          // or the service_info does not belong to special goods\n          // so that page is going to render\n          item.serviceList = []\n          item.service_info.forEach(service => {\n            service.service_info.forEach(info => {\n              if(!info.sel_status) {\n                item.serviceList.push(info)\n              } else if(item.sel_status) {\n                serviceSelect.push({\n                  ...info,\n                  parent_goodsId: item.goodsId\n                  // after this, it represent service or gift when parent_goodsId === goodsId\n                })\n              }\n            })\n          })\n        }\n      })\n\n      // put 'serviceSelect' behind the related goods\n      serviceSelect.forEach(info => {\n        let index = items.findIndex(item => {\n          // it represent service or gift when parent_goodsId === goodsId\n          return item.goodsId === info.parent_goodsId\n        })\n        items.splice(index + 1, 0, {\n          goodsId: info.service_goods_id,\n          image_url: info.service_image_url,\n          num: info.num,\n          buy_limit: items[index].num,\n          price: info.service_price,\n          product_name: info.service_short_name,\n          sel_status: 1,\n          parent_goodsId: info.parent_goodsId, // represent this service is default service belong to some goods\n          isService: true\n        })\n      })\n\n      /**\n       * Deal gifts\n       */\n      // the seelcted gifts of selected gooods\n      let giftSelect = []\n      items.forEach(item => {\n        if(item.sel_status && item.gift) {\n          item.gift.forEach(gift => {\n            giftSelect.push({\n              ...gift,\n              parent_goodsId: item.goodsId\n            })\n          })\n        }\n      })\n      // put 'giftSelect' behind related goods\n      giftSelect.forEach(gift => {\n        let index = items.findIndex(item => {\n          return item.goodsId == gift.parent_goodsId\n        })\n        items.splice(index + 1, 0, {\n          buy_limit: items[index].num,\n          goodsId: gift.actId,\n          image_url: gift.image_url,\n          num: items[index].num,\n          product_name: gift.product_name,\n          sel_status: 1,\n          parent_goodsId: gift.parent_goodsId,\n          isGift: true\n        })\n      })\n      // this.cartList = []\n      this.cartList = items\n      console.log(items)\n    },\n    cartSelect(item, index) {\n      let sel_status = item.sel_status ? 0 : 1\n      selectGoods({\n        goodsId: item.goodsId,\n        select_status: sel_status\n      }).then(res => {\n        if(res.status === 200) {\n          item.sel_status = sel_status\n          if(!item.sel_status) {\n            // Cancel selected goods\n            // If having services and gift, delete it\n            let subIndex = this.cartList.findIndex(list => {\n              return list.parent_goodsId === item.goodsId\n            })\n            while(subIndex > -1) {\n              this.cartList.splice(subIndex, 1)\n              subIndex = this.cartList.findIndex(list => {\n                return list.parent_goodsId === item.goodsId\n              })\n            }\n            // set all selected status as 0\n            // meanwhile put it into optional service list\n            item.service_info.forEach(list => {\n              list.service_info.forEach(info => {\n                if(info.sel_status) {\n                  info.sel_status = 0\n                  item.serviceList.push(info)\n                }\n              })\n            })\n          } else {\n            // Selected status\n            if(item.gift && item.gift.length) {\n              // transform gift to goods if having gift\n              item.gift.forEach(gift => {\n                this.cartList.splice(index + 1, 0, {\n                  buy_limit: item.num,\n                  goodsId: gift.actId,\n                  image_url: gift.image_url,\n                  num: item.num,\n                  product_name: gift.product_name,\n                  sel_status: 1,\n                  parent_goodsId: item.goodsId,\n                  isGift: true\n                })\n              })\n            }\n          }\n        }\n      })\n    },\n    cartEdit(item, num) {\n      if(num < 0 && item.num === 1) return\n      if(num > 0 && item.num == item.buy_limit) return\n\n      let consumption = num > 0 ? 2 : 1\n      editCart({\n        goodsId: item.goodsId,\n        consumption\n      }).then(res => {\n        if(res && res.status === 200) {\n          item.num += num\n          // deal related quantity of gift and service\n          this.cartList.forEach(list => {\n            if(list.parent_goodsId === item.goodsId) {\n              // deal service quantity\n              list.buy_limit = item.num\n              if(list.isGift) {\n                // deal gift quantity\n                list.num = item.num\n              }\n            }\n          })\n        }\n      })\n    },\n    toCartSelService(item) {\n      this.showServiceInfo = true\n      let arr = []\n      item.service_info.forEach((list, index) => {\n        let curList = JSON.parse(JSON.stringify(list))\n        curList.service_info = []\n        list.service_info.forEach(service => {\n          if(!service.sel_status) {\n            curList.service_info.push(service)\n          }\n        })\n        arr.push(curList)\n      })\n      this.serviceInfoList = arr\n      this.serviceSelectCashItem = item\n    },\n    selectService(list, service) {\n      if(service.sel_status) {\n        service.sel_status = 0\n      } else {\n        list.service_info.forEach(info => {\n          info.sel_status = 0\n        })\n        service.sel_status = 1\n      }\n      let arr = []\n      this.serviceInfoList.forEach(list => {\n        list.service_info.forEach(service => {\n          if(service.sel_status) {\n            arr.push(service)\n          }\n        })\n      })\n      this.serviceSelectMessage = arr.length ? `已选择${arr.length}项服务` : '请选择服务类型'\n      this.serviceSelectCashArr = arr\n    },\n    serviceSelectSubmit() {\n      let cashItem = this.serviceSelectCashItem\n      selectServices({\n        parent_goodsId: cashItem.parent_goodsId,\n        service_goods_id: cashItem.goodsId,\n        sel_status: 1\n      }).then(res => {\n        if(res.status === 200) {\n          let arr = this.serviceSelectCashArr\n          if(arr.length) {\n            arr.forEach(list => {\n              // delete the selected service from optional service list\n              let serviceListIndex = cashItem.serviceList.findIndex(service => {\n                return service.service_goods_id === list.service_goods_id\n              })\n              cashItem.serviceList.splice(serviceListIndex, 1)\n\n              // for original service list, change the select status\n              cashItem.service_info.forEach(info => {\n                info.service_info.forEach(service => {\n                  if(service.service_goods_id === list.service_goods_id) {\n                    service.sel_status = 1\n                  }\n                })\n              })\n\n              // transform selected service to goods\n              let index = this.cartList.findIndex(item => {\n                return item.goodsId === cashItem.goodsId\n              })\n              this.cartList.splice(index + 1, 0, {\n                buy_limit: cashItem.num,\n                goodsId: list.service_goods_id,\n                image_url: list.service_image_url,\n                num: list.num,\n                price: list.service_price,\n                product_name: list.service_short_name,\n                sel_status: 1,\n                parent_goodsId: cashItem.goodsId,\n                isService: true\n              })\n            })\n          }\n          this.showServiceInfo = false\n        }\n      })\n    },\n    cartDelete(item, index) {\n      deleteGoods({\n        goodsId: item.goodsId\n      }).then(res => {\n        // put service into related goods list\n        this.cartList.splice(index, 1)\n        if(item.parent_goodsId) {\n          let curGood = this.cartList.find(list => {\n            return list.goodsId === item.parent_goodsId\n          })\n          curGood.service_info.forEach(info => {\n            info.service_info.forEach(service => {\n              if(service.service_goods_id === item.goodsId) {\n                service.sel_status = 0\n                curGood.serviceList.push(service)\n              }\n            })\n          })\n        } else {\n          // delete all service and gift belong to this goods\n          let subIndex = this.cartList.findIndex(list => {\n            return list.parent_goodsId === item.goodsId\n          })\n          while(subIndex > -1) {\n            this.cartList.splice(subIndex, 1)\n            subIndex = this.cartList.findIndex(list => {\n              return list.parent_goodsId === item.goodsId\n            })\n          }\n        }\n      })\n    }\n  }\n}\n","import { render } from \"./MiCart.vue?vue&type=template&id=23236370&scoped=true\"\nimport script from \"./MiCart.js?vue&type=script&lang=js\"\nexport * from \"./MiCart.js?vue&type=script&lang=js\"\n\nimport \"./MiCart.scss?vue&type=style&index=0&id=23236370&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/apple/xiaomi-mall-mobile/web/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-23236370\"]])\n\nexport default __exports__"],"sourceRoot":""}