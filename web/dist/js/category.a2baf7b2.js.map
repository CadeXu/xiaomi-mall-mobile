{"version":3,"sources":["webpack:///./src/components/CategoryGroup.vue?53e5","webpack:///./src/api/category.js","webpack:///./src/views/MiCategory.vue?34be","webpack:///./src/views/MiCategory.vue","webpack:///./src/components/CategoryGroup.vue","webpack:///./src/components/CategoryGroup.vue?b904","webpack:///./src/views/MiCategory.vue?6276"],"names":["getCategory","request","url","method","getCommodityById","data","getRecommendBlank","getProductView","getRecommend","class","index","title","categoryList","list","key","category_id","curIndex","handleChangeIndex","category_name","handleWrapScroll","ref","src","category_img","lazy","category_list","item","id","category_title","products","category_group","product","tag","to","img_url","product_name","props","type","Array","required","__exports__","components","CategoryGroup","offsetTop","scrollTimer","beforeRouteEnter","from","next","name","then","res","status","vm","setNavList","lists","getCategoryList","destoryed","this","$NProgress","remove","methods","done","$store","commit","$nextTick","forEach","push","$refs","listWrapDom","document","querySelector","removeEventListener","scrollHandler","scrollTo","addEventListener","clearTimeout","setTimeout","scrollTop","len","length","render"],"mappings":"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","file":"js/category.a2baf7b2.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CategoryGroup.vue?vue&type=style&index=0&id=39b080b0&lang=scss&scoped=true\"","import request from './index'\r\n\r\nexport const getCategory = () =>\r\n  request({\r\n    url: '/category',\r\n    method: 'get'\r\n  })\r\n\r\nexport const getCommodityById = (data) =>\r\n  request({\r\n    url: 'commodity',\r\n    method: 'post',\r\n    data\r\n  })\r\n\r\nexport const getRecommendBlank = () =>\r\n  request({\r\n    url: 'recommendBlank',\r\n    method: 'get'\r\n  })\r\n\r\nexport const getProductView = (data) =>\r\n  request({\r\n    url: 'productView',\r\n    method: 'post',\r\n    data\r\n  })\r\n\r\nexport const getRecommend = (data) =>\r\n  request({\r\n    url: 'recommend',\r\n    method: 'post',\r\n    data\r\n  })\r\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./MiCategory.vue?vue&type=style&index=0&id=e302afa4&lang=scss&scoped=true\"","<template>\r\n  <div class=\"app-shell\">\r\n    <mi-title title=\"分类\"/>\r\n    <!-- <div v-if=\"loading\">\r\n      <span>Loading . . .</span>\r\n    </div> -->\r\n    <!-- <div v-else class=\"app-view-wrapper\"> -->\r\n    <div class=\"app-view-wrapper\">\r\n      <div class=\"container app-view app-view-with-header app-view-with-footer\">\r\n        <div class=\"list-navbar\">\r\n          <ul>\r\n            <li\r\n              v-for=\"(list,index) in categoryList\"\r\n              :key=\"list.category_id\"\r\n              :class=\"index == curIndex ? 'active' : ''\"\r\n              @click=\"handleChangeIndex(index)\"\r\n            >\r\n              <a>\r\n                <span>{{list.category_name}}</span>\r\n              </a>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div class=\"list-wrap\" @touchstart=\"handleWrapScroll\">\r\n          <div\r\n            v-for=\"(list, index) in categoryList\"\r\n            :key=\"list.category_id\"\r\n            :ref=\"'category'+index\"\r\n            class=\"list-item\"\r\n          >\r\n            <div class=\"component-list-main\">\r\n              <div class=\"cells_auto_fill\" index =\"0\">\r\n                <a class=\"exposure items\">\r\n                  <img :src=\"list.category_img\" lazy=\"loaded\">\r\n                </a>\r\n              </div>\r\n              <template\r\n                v-for=\"item in list.category_list\"\r\n                :key=\"item.id\"\r\n              >\r\n                <div\r\n                  class=\"category_title\"\r\n                >\r\n                  <span>{{item.category_title}}</span>\r\n                </div>\r\n                <category-group :products=\"item.category_group\" />\r\n              </template>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <page-footer/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getCategory } from '@/api/category'\r\nimport CategoryGroup from '@/components/CategoryGroup.vue'\r\n// import MiSearch from '@/components/MiTitle.vue'\r\n// import bus from '@/util/bus.js'\r\n// import PageFooter from '@/components/PageFooter.vue'\r\n\r\nexport default {\r\n  components: {\r\n    CategoryGroup\r\n    // MiSearch\r\n    // PageFooter\r\n  },\r\n  data() {\r\n    return {\r\n      categoryList: null,\r\n      curIndex: 0,\r\n      // loading: true,\r\n      offsetTop: [],\r\n      scrollTimer: null\r\n    }\r\n  },\r\n  beforeRouteEnter(to, from, next) {\r\n    // Judge whether the router is refreshed or switched\r\n    if(from.name) {\r\n      // refresh\r\n      getCategory().then(res => {\r\n        if(res.status === 200) {\r\n          next(vm => vm.setNavList(res.data.lists))\r\n        }\r\n      })\r\n    } else {\r\n      // switch\r\n      next(vm => vm.getCategoryList())\r\n    }\r\n  },\r\n  // created() {\r\n  //   this.getCategoryList()\r\n  // },\r\n  destoryed() {\r\n    this.$NProgress.remove()\r\n  },\r\n  // unmounted() {\r\n  //   this.$NProgress.remove()\r\n  // },\r\n  methods: {\r\n    getCategoryList() {\r\n      getCategory().then(res => {\r\n        if(res.status === 200) {\r\n          this.setNavList(res.data.lists)\r\n        }\r\n      })\r\n    },\r\n    setNavList(res) {\r\n      this.$NProgress.done()\r\n      this.categoryList = res\r\n      this.$store.commit('setViewLoading', false)\r\n      // this.loading = false\r\n      /**\r\n       * vue2.x\r\n       */\r\n      // bus.$emit('loading', false)\r\n\r\n      /**\r\n       * vue3.x\r\n       */\r\n      // local invoke\r\n      // bus.emit('loading', false)\r\n\r\n      // global invoke\r\n      // this.$bus.emit('loading', false)\r\n\r\n      // Handle scroll\r\n      this.$nextTick(() => {\r\n        this.categoryList.forEach((item, index) => {\r\n          this.offsetTop.push(this.$refs['category' + index].offsetTop)\r\n        })\r\n      })\r\n    },\r\n    handleChangeIndex(index) {\r\n      this.curIndex = index\r\n      const listWrapDom = document.querySelector('.list-wrap')\r\n      listWrapDom.removeEventListener('scroll', this.scrollHandler)\r\n      listWrapDom.scrollTo(0, this.offsetTop[index])\r\n    },\r\n    handleWrapScroll() {\r\n      document.querySelector('.list-wrap').addEventListener('scroll', this.scrollHandler)\r\n    },\r\n    scrollHandler() {\r\n      clearTimeout(this.scrollTimer)\r\n      this.scrollTimer = null\r\n      this.scrollTimer = setTimeout(() => {\r\n        const scrollTop = document.querySelector('.list-wrap').scrollTop\r\n        const len = this.offsetTop.length\r\n        for(let index = 0; index < len; ++index) {\r\n          if(scrollTop >= this.offsetTop[index] && scrollTop < this.offsetTop[index + 1]) {\r\n            this.curIndex = index\r\n            break\r\n          }\r\n        }\r\n      }, 100)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n  margin-right: auto;\r\n  margin-left: auto;\r\n  flex-basis: 100%;\r\n\r\n  .list-navbar {\r\n    position: fixed;\r\n    top: 40px;\r\n    bottom: 40px;\r\n    left: 0;\r\n    width: 80px;\r\n    border-right: 1px solid #efefef;\r\n    overflow: hidden;\r\n\r\n    ul {\r\n      z-index: 90;\r\n      position: absolute;\r\n      top: 0;\r\n      bottom: 0;\r\n      left: 0;\r\n      /* hide scroll bar */\r\n      right: -6px;\r\n      padding: 8px 6px 8px 0px;\r\n      background: #fefefe;\r\n      overflow-y: auto;\r\n      -webkit-overflow-scrolling: touch;\r\n\r\n      li {\r\n        font-size: 18px;\r\n        height: 50px;\r\n        line-height: 50px;\r\n        overflow: hidden;\r\n        text-align: center;\r\n        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\r\n        transition: transform 0.1s linear;\r\n        transform-origin: center center;\r\n        transform: scale(0.76);\r\n\r\n        span {\r\n          display: inline-block;\r\n        }\r\n      }\r\n\r\n      li.active {\r\n        color: #fb7d34;\r\n        transform: scale(1);\r\n      }\r\n    }\r\n  }\r\n\r\n  .list-wrap {\r\n    position: absolute;\r\n    left: 80px;\r\n    right: 0;\r\n    top: 59px;\r\n    bottom: 50px;\r\n    padding: 2px 16px;\r\n    overflow: auto;\r\n\r\n    .component-list-main {\r\n      .cells_auto_fill {\r\n        .items {\r\n          height: auto!important;\r\n          display: block;\r\n\r\n          img {\r\n            width: 260px;\r\n            height: 104px;\r\n            background-color: #f2f2f2;\r\n          }\r\n        }\r\n      }\r\n\r\n      .category_title {\r\n        background: #fff;\r\n        font-size: 16px;\r\n        text-align: center;\r\n        font-weight: 400;\r\n        margin-top: 10px;\r\n        height: 66px;\r\n        line-height: 66px;\r\n        overflow: hidden;\r\n\r\n        span {\r\n          position: relative;\r\n        }\r\n\r\n        span::after, span::before{\r\n          content: \"\";\r\n          position: absolute;\r\n          top: 50%;\r\n          left: 0;\r\n          width: 30px;\r\n          border-top: 1px solid #e0e0e0;\r\n          transform: translate3d(-150%,-50%,0);\r\n        }\r\n\r\n        span::after {\r\n          left: auto;\r\n          right: 0;\r\n          transform: translate3d(150%,-50%,0);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\n  <div class=\"category_group box-flex\">\n    <div class=\"box\">\n      <router-link\n        v-for=\"product in products\"\n        :key=\"product.category_id\"\n        class=\"product\"\n        tag=\"div\"\n        :to=\"{name: 'list', params: {id: product.category_id}}\"\n      >\n        <a class=\"exposure item\">\n          <div class=\"img\">\n            <img class=\"big\" :src=\"product.img_url\" lazy=\"loaded\"/>\n          </div>\n          <div class=\"name\">{{product.product_name}}</div>\n        </a>\n      </router-link>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    products: {\n      type: Array,\n      required: true\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.category_group {\n  width: 100%;\n  overflow: hidden;\n\n  .product {\n    float: left;\n    width: 33.333333333333336%;\n    text-align: center;\n    margin-top: 10px;\n    margin-bottom: 15px;\n    overflow: hidden;\n\n    .img {\n      width: 52px;\n      height: 52px;\n      margin: 0 auto;\n      background: #f2f2f2;\n      overflow: hidden;\n\n      img {\n        width: 100%;\n      }\n    }\n  }\n\n  .big {\n    height: 100% !important;\n    width: auto !important;\n  }\n\n  .img {\n    display: block;\n    position: relative;\n    overflow: hidden;\n  }\n\n  .name {\n    margin-top: 14px;\n    white-space: nowrap;\n    font-size: 12px;\n    color: rgba(0,0,0,.54);\n  }\n}\n\n.box-flex>*, .box-inline-flex>* {\n  flex: 1 1 auto;\n}\n</style>\n","import { render } from \"./CategoryGroup.vue?vue&type=template&id=39b080b0&scoped=true\"\nimport script from \"./CategoryGroup.vue?vue&type=script&lang=js\"\nexport * from \"./CategoryGroup.vue?vue&type=script&lang=js\"\n\nimport \"./CategoryGroup.vue?vue&type=style&index=0&id=39b080b0&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/apple/xiaomi-mall-mobile/web/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-39b080b0\"]])\n\nexport default __exports__","import { render } from \"./MiCategory.vue?vue&type=template&id=e302afa4&scoped=true\"\nimport script from \"./MiCategory.vue?vue&type=script&lang=js\"\nexport * from \"./MiCategory.vue?vue&type=script&lang=js\"\n\nimport \"./MiCategory.vue?vue&type=style&index=0&id=e302afa4&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/apple/xiaomi-mall-mobile/web/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e302afa4\"]])\n\nexport default __exports__"],"sourceRoot":""}